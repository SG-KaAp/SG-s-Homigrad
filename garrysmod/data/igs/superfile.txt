{"igs\/dependencies\/resources.lua":"-- FontAwesome 32\n-- https:\/\/steamcommunity.com\/sharedfiles\/filedetails\/?id=1562487365\n-- \/materials\/icons\/fa32\/{icon_name}.png\nresource.AddWorkshop(\"1562487365\")\n\n-- resource.AddWorkshop(\"577994158\") -- –º–æ–¥–µ–ª–∏ –ø–æ–¥–∞—Ä–∫–æ–≤\n-- \"models\/christmas_gift2\/christmas_gift.mdl\"\n-- \"models\/christmas_gift2\/christmas_gift2.mdl\"", "igs\/modules\/extra\/installation_check_sv.lua":"local function isMounted(path)\n\treturn file.Exists(path, \"LUA\")\nend\n\nlocal function isWorkshopped(path)\n\treturn file.Exists(\"lua\/\" .. path, \"WORKSHOP\")\nend\n\nlocal function isDownloaded(path)\n\treturn IGS_MOUNT and IGS_MOUNT[path]\nend\n\n\n\nlocal function isUnpacked(path)\n\treturn isMounted(path) and not (isWorkshopped(path) or isDownloaded(path))\nend\n\nhook.Add(\"IGS.Initialized\", \"installation_check\", function()\n\tlocal path = \"igs\/launcher.lua\"\n\tif isUnpacked(path) then\n\t\tIGS.prints(Color(250, 100, 100), \"–ü–æ—Ö–æ–∂–µ, —á—Ç–æ –∞–≤—Ç–æ–¥–æ–Ω–∞—Ç —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω –≤ \/addons. \", \"–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç üö®\")\n\tend\n\n\tif isWorkshopped(path) and isDownloaded(path) then\n\t\tIGS.prints(\"–£–¥–∞–ª–∏—Ç–µ –∞–≤—Ç–æ–¥–æ–Ω–∞—Ç –∏–∑ –≤–∞—à–µ–π –∫–æ–ª–ª–µ–∫—Ü–∏–∏ –≤ –≤–æ—Ä–∫—à–æ–ø–µ. –û–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ GitHub\")\n\tend\nend)\n\n-- PRINT(file.Find(\"*\", \"LUA\")) -- mediaplayer, wire\n-- PRINT(file.Find(\"lua\/*\", \"THIRDPARTY\")) -- mediaplayer, wire\n\n\n-- print(isUnpacked(\"wire\/wireshared.lua\"))\n", "igs\/interface\/vgui\/igs_sidebar.lua":"local PANEL = {}\n\nfunction PANEL:Init()\n\t-- –•–µ—Ä–Ω—è —Å–ø—Ä–∞–≤–∞ –æ—Ç –ª—ç–π–∞—É—Ç–∞ —Å —É—Å–ª—É–≥–∞–º–∏ http:\/\/joxi.ru\/52aQQ8Efzov120\n\t-- –í–∏–¥ –±–µ–∑ –Ω–µ–µ: http:\/\/joxi.ru\/eAO44lGcXORlro\n\tself.sidebar = uigs.Create(\"Panel\", function(sbar)\n\t\tsbar:Dock(FILL)\n\tend, self)\n\n\t-- –í–µ—Ä—Ö–Ω—è—è —á–∞—Å—Ç—å http:\/\/joxi.ru\/5mdWW05tzW6Wr1\n\tself.header = uigs.Create(\"Panel\", function(header)\n\t\theader:SetTall(40)\n\t\theader:Dock(TOP)\n\tend, self.sidebar)\nend\n\n-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–∞–π–¥–±–∞—Ä–∞ \"–ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ–∫—É–ø–∫–∏\" –∏ —Ç.–¥.\nfunction PANEL:SetTitle(sTitle)\n\tself.title = self.title or uigs.Create(\"DLabel\", function(title)\n\t\ttitle:Dock(BOTTOM)\n\t\ttitle:SetTall(24)\n\t\ttitle:SetFont(\"igs.19\")\n\t\ttitle:SetTextColor(IGS.col.TEXT_HARD)\n\t\ttitle:SetContentAlignment(8)\n\tend, self.header)\n\n\tself.title:SetText(sTitle)\n\n\treturn self.title\nend\n\nvgui.Register(\"igs_sidebar\",PANEL,\"Panel\")\n--IGS.UI()\n", "igs\/dependencies\/plurals.lua":"local plural_type = function(i)\n\treturn i % 10 == 1 and i % 100 ~= 11 and 1\n\t\tor (i % 10 >= 2 and i % 10 <= 4 and (i % 100 < 10 or i % 100 >= 20) and 2\n\t\t\tor 3\n\t\t)\nend\n\nfunction util.formatPlural(plurals, num)\n\tlocal type = plural_type(num)\n\tlocal suffix = plurals[type]\n\treturn num .. \" \" .. suffix, suffix\nend\n\nfunction PLUR(plurals)\n\treturn function(num)\n\t\treturn util.formatPlural(plurals, num)\n\tend\nend\n\n-- local P = PLUR({\"–ø–æ—Å—Ç\", \"–ø–æ—Å—Ç–∞\", \"–ø–æ—Å—Ç–æ–≤\"})\n-- PRINT(P(1), P(2), P(5))\n", "igs\/dependencies\/lolib.lua":"-- 2021.01.18 Logging library\n-- Author https:\/\/amd-nick.me\/about\n\nlolib = {}\n\n-- https:\/\/colorswall.com\/palette\/3\/\nlocal COLOR_DEBUG   = Color(2, 117, 216)\nlocal COLOR_FADED   = Color(247, 247, 247)\nlocal COLOR_INFO    = Color(91, 192, 222)\nlocal COLOR_WARNING = Color(255, 255, 0)\nlocal COLOR_ERROR   = Color(240, 50, 50)\n\nlolib.LEVELS = {\n\tDISABLE = 0,\n\tDEBUG   = 1,\n\tINFO    = 2,\n\tWARNING = 3,\n\tERROR   = 4,\n\n\t{\"D\", COLOR_DEBUG,   COLOR_DEBUG},\n\t{\"I\", COLOR_INFO,    COLOR_FADED},\n\t{\"W\", COLOR_WARNING, COLOR_FADED},\n\t{\"E\", COLOR_ERROR,   COLOR_WARNING},\n}\n\nlocal function echo(pref_col, pref, text_col, text)\n\tMsgC(pref_col, pref, text_col, \" \" .. text .. \"\\n\")\nend\n\nlocal function fp(a)\n\tlocal func = a[1]\n\treturn function(...)\n\t\treturn func(unpack(a, 2), ...)\n\tend\nend\n\nfunction lolib.new()\n\tlocal logger = {\n\t\tlevel   = lolib.default_level or 3,\n\t\tpattern = \"{message}\"\n\t}\n\n\tlogger.build_message = function(fmt, ...)\n\t\tlocal args = {...}\n\t\tlocal count = 0\n\t\treturn fmt:gsub(\"{}\", function()\n\t\t\tcount = count + 1\n\t\t\tlocal replacement_val = (args[count] ~= nil) and args[count]\n\t\t\tif istable(replacement_val) then\n\t\t\t\treturn util.TableToJSON(replacement_val)\n\t\t\telse\n\t\t\t\treturn tostring(replacement_val)\n\t\t\tend\n\t\tend)\n\tend\n\n\tlogger.format = function(fmt, ...)\n\t\tlocal text = logger.build_message(fmt, ...)\n\n\t\t-- invalid capture index error. \"foo %9 bar\" > \"foo %%9 bar\"\n\t\ttext = text:gsub(\"%%\", \"%%%%%\")\n\t\t-- text = text:gsub(\"%%(%d)\", \"%%%%%1\")\n\n\t\treturn logger.pattern\n\t\t\t:gsub(\"{time}\", os.date(\"%H:%M:%S\"))\n\t\t\t:gsub(\"{message}\", text)\n\tend\n\n\tlogger.filter = function(tRecord)\n\t\tif tRecord.level < logger.level or logger.level == 0 then return end\n\t\treturn true\n\tend\n\n\tlogger.log = function(iLevel, fmt, ...)\n\t\tif not logger.filter({level = iLevel}) then return end\n\n\t\tlocal text = logger.format(fmt, ...)\n\n\t\tlocal level_data = lolib.LEVELS[iLevel]\n\t\techo(level_data[2], \"[\" .. level_data[1] .. \"]\", level_data[3], text)\n\tend\n\n\tlogger.debug   = fp{logger.log, lolib.LEVELS.DEBUG}\n\tlogger.info    = fp{logger.log, lolib.LEVELS.INFO}\n\tlogger.warning = fp{logger.log, lolib.LEVELS.WARNING}\n\tlogger.error   = fp{logger.log, lolib.LEVELS.ERROR}\n\n\tlogger.setLevel = function(iLevel)\n\t\tlogger.level = iLevel\n\tend\n\n\tlogger.setCvar = function(sVarName, iDefaultValue)\n\t\tlocal cvar = CreateConVar(sVarName, iDefaultValue or 0, FCVAR_ARCHIVE)\n\n\t\tcvars.AddChangeCallback(sVarName, function(_, _, new)\n\t\t\tlocal level = tonumber(new) or 0\n\t\t\tassert(level >= 0 and level <= 5)\n\t\t\tlogger.setLevel(level)\n\t\t\tMsgN(\"logging level has been changed. New level is: \" .. level)\n\t\tend, \"lolib\")\n\n\t\tlogger.setLevel(cvar:GetInt())\n\n\t\treturn cvar\n\tend\n\n\tlogger.setFormat = function(sPattern)\n\t\tlogger.pattern = sPattern\n\tend\n\n\treturn logger\nend\n\n--[[\nlocal log = lolib.new()\nlog.setLevel(lolib.LEVELS.INFO)\n\nlog.debug(\"debug value: {}\", 123)\nlog.info(\"info value: {}\", 123)\nlog.warning(\"warning value: {}\", 123)\nlog.error(\"error value: {}\", 123)\n]]\n\n-- return lolib\n", "igs\/interface\/activities\/purchases.lua":"hook.Add(\"IGS.CatchActivities\",\"purchases\",function(activity,sidebar)\n\tlocal bg = sidebar:AddPage(\"–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏\")\n\n\n\t--[[-------------------------------------------------------------------------\n\t\t–û—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç—å —Ñ—Ä–µ–π–º–∞\n\t---------------------------------------------------------------------------]]\n\tuigs.Create(\"igs_table\", function(pnl)\n\t\tpnl:Dock(FILL)\n\t\tpnl:DockMargin(5,5,5,5)\n\n\t\tpnl:SetTitle(\"–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏\")\n\n\t\tlocal multisv = IGS.SERVERS.TOTAL > 1\n\t\tif multisv then\n\t\t\tpnl:AddColumn(\"–°–µ—Ä–≤–µ—Ä\",100)\n\t\telse\n\t\t\tpnl:AddColumn(\"#\",40)\n\t\tend\n\n\t\tpnl:AddColumn(\"–ü—Ä–µ–¥–º–µ—Ç\")\n\t\tpnl:AddColumn(\"–ö—É–ø–ª–µ–Ω\",90)\n\t\tpnl:AddColumn(\"–ò—Å—Ç–µ—á–µ—Ç\",90)\n\n\n\t\tIGS.GetMyPurchases(function(d)\n\t\t\tif not IsValid(pnl) then return end -- –î–æ–ª–≥–æ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–∞–ª–∏—Å—å, —Ñ—Ä–µ–π–º —É—Å–ø–µ–ª–∏ –∑–∞–∫—Ä—ã—Ç—å\n\n\t\t\tIGS.AddTextBlock(bg.side,\"–ß—Ç–æ —Ç—É—Ç?\",\n\t\t\t\t#d == 0 and\n\t\t\t\t\t\"–ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤–∞—à–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–∫—É–ø–∫–∏\\n\\n\" ..\n\t\t\t\t\t\"–ù–µ —Å–∞–º–æ–µ –ª–∏ –ø–æ–¥—Ö–æ–¥—è—â–µ–µ –≤—Ä–µ–º—è, —á—Ç–æ–±—ã —Å–æ–≤–µ—Ä—à–∏—Ç—å –ø–µ—Ä–≤—É—é?\\n\\n\" ..\n\t\t\t\t\t\"–¢–∞–±–ª–∏—á–∫–∞ —Å—Ä–∞–∑—É —Å—Ç–∞–Ω–µ—Ç –∫—Ä–∞—Å–∏–≤–µ–µ. –ß–µ—Å—Ç–Ω–æ-—á–µ—Å—Ç–Ω–æ\"\n\t\t\t\t\tor\n\t\t\t\t\t\"–°–ª–µ–≤–∞ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤–∞—à–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ —É—Å–ª—É–≥–∏.\\n\\n\" ..\n\t\t\t\t\t\"–ß–µ–º –±–æ–ª—å—à–µ —É—Å–ª—É–≥, —Ç–µ–º –∫—Ä–∞—Å–∏–≤–µ–µ —ç—Ç–∞ —Ç–∞–±–ª–∏—á–∫–∞ –≤—ã–≥–ª—è–¥–∏—Ç, –∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –±–æ–ª–µ–µ —Å—á–∞—Å—Ç–ª–∏–≤–∞—è ;)\"\n\t\t\t)\n\n\t\t\tIGS.AddButton(bg.side,\"–ö—É–ø–∏—Ç—å –ø–ª—é—à–∫—É\",function()\n\t\t\t\tif #IGS.GetItems() == 0 then -- –µ—Å–ª–∏ NULL —É–±–µ—Ä—É\n\t\t\t\t\tLocalPlayer():ChatPrint(\"–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –ø—Ä–µ–¥–º–µ—Ç—ã –∞–≤—Ç–æ–¥–æ–Ω–∞—Ç–∞ –≤ sh_additems.lua\")\n\t\t\t\t\treturn\n\t\t\t\tend\n\n\t\t\t\twhile true do\n\t\t\t\t\tlocal random_ITEM = table.Random(IGS.GetItems())\n\t\t\t\t\tif random_ITEM:CanSee( LocalPlayer() ) then\n\t\t\t\t\t\tIGS.WIN.Item(random_ITEM:UID())\n\t\t\t\t\t\tbreak\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\tend)\n\n\t\t\tfor i,v in ipairs(d) do\n\t\t\t\tlocal sv_name = IGS.ServerName(v.server)\n\t\t\t\tlocal ITEM    = IGS.GetItemByUID(v.item)\n\t\t\t\tlocal sName   = ITEM.isnull and v.item or ITEM:Name()\n\n\t\t\t\tpnl:AddLine(\n\t\t\t\t\t-- v.id,\n\t\t\t\t\tmultisv and sv_name or #d - i + 1,\n\t\t\t\t\tsName,\n\t\t\t\t\tIGS.TimestampToDate(v.purchase) or \"–ù–∏–∫–æ–≥–¥–∞\",\n\t\t\t\t\tIGS.TimestampToDate(v.expire)   or \"–ù–∏–∫–æ–≥–¥–∞\"\n\t\t\t\t):SetTooltip(\"–ò–º—è —Å–µ—Ä–≤–µ—Ä–∞: \" .. sv_name .. \"\\nID –≤ —Å–∏—Å—Ç–µ–º–µ: \" .. v.id .. \"\\n–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ: \" .. v.item)\n\t\t\tend\n\t\tend)\n\tend, bg)\n\n\tactivity:AddTab(\"–ü–æ–∫—É–ø–∫–∏\",bg,\"materials\/icons\/fa32\/reorder.png\")\nend)\n\n-- IGS.UI()\n", "igs\/dependencies\/bib.lua":"bib = bib or {} -- –ù–µ –∑–Ω–∞—é, –ø–æ—á–µ–º—É —è —Ä–µ—à–∏–ª –¥–∞—Ç—å –µ–º—É –∏–º–µ–Ω–Ω–æ —Ç–∞–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ\n\nfunction bib.set(key,value)\n\tsql.Query([[\n\t\tREPLACE INTO `bib`(`key`,`value`)\n\t\tVALUES (]] .. sql.SQLStr(key) .. \",\" .. sql.SQLStr(value) .. [[)\n\t]])\nend\n\nfunction bib.get(key,fallback)\n\treturn sql.QueryValue([[\n\t\tSELECT `value`\n\t\tFROM `bib`\n\t\tWHERE `key` = ]] .. sql.SQLStr(key)\n\t) or fallback\nend\n\nfunction bib.delete(key)\n\tsql.Query([[\n\t\tDELETE FROM `bib`\n\t\tWHERE `key` = ]] .. sql.SQLStr(key)\n\t)\nend\n\nfunction bib.getAll()\n\tlocal t = sql.Query([[\n\t\tSELECT `key`,`value`\n\t\tFROM `bib`\n\t]]) or {}\n\n\tlocal kv = {}\n\tfor _,v in ipairs(t) do\n\t\tkv[v.key] = v.value\n\tend\n\n\treturn kv\nend\n\nfunction bib.reset()\n\tsql.Query([[\n\t\tDELETE FROM `bib`\n\t]])\nend\n\nsql.Query([[\n\tCREATE TABLE IF NOT EXISTS `bib` (\n\t\t`key`   TEXT NOT NULL UNIQUE,\n\t\t`value` TEXT,\n\t\tPRIMARY KEY(key)\n\t);\n]])\n\n\n\n\n\n--[[-------------------------------------------------------------------------\n\tBools\n---------------------------------------------------------------------------]]\nfunction bib.getBool(k, bFallback)\n\tlocal v = bib.get(k)\n\tif v == nil then\n\t\treturn bFallback\n\tend\n\n\treturn v == \"t\"\nend\n\nfunction bib.setBool(k,b)\n\tbib.set(k,b and \"t\" or \"f\")\nend\n\n-- local function g() return bib.getBool(\"foo\") end\n-- local function s(b) bib.setBool(\"foo\",b) end\n-- s(nil)   print(\"false\",g())\n-- s(true)  print(\"true\",g())\n-- s(false) print(\"false\",g())\n-- s(1)     print(\"true\",g())\n\n\n--[[-------------------------------------------------------------------------\n\tNumbers\n---------------------------------------------------------------------------]]\nfunction bib.getNum(k,iFallback)\n\treturn tonumber(bib.get(k,iFallback))\nend\n\nfunction bib.setNum(k,i)\n\tbib.set(k,i)\nend\n\nfunction bib.increment(k, i_)\n\tlocal i = bib.getNum(k, 0) + (i_ or 1)\n\tbib.setNum(k, i)\n\treturn i\nend\n\n", "igs\/extensions\/evolve.lua":"local ITEM = MT_IGSItem\n\nfunction ITEM:SetEvolveRank(rank)\n\treturn self:SetInstaller(function(pl)\n\t\tevolve.PlayerInfo[pl:UniqueID()][\"Rank\"] = rank\n\tend):SetValidator(function(pl)\n\t\treturn evolve.PlayerInfo[pl:UniqueID()][\"Rank\"] == rank\n\tend):SetMeta(\"ev_rank\", rank)\nend\n", "igs\/modules\/inv_log\/_main.lua":"IGS.sv(\"core_sv.lua\")\nIGS.sv(\"integrator_sv.lua\")\nIGS.cl(\"core_cl.lua\")\nIGS.cl(\"interface_cl.lua\")\n", "igs\/interface\/vgui\/igs_panels_layout.lua":"-- http:\/\/joxi.ru\/Vm6bbvlipXRZmZ\n\n-- TODO –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å. –°–ù–û–í–ê. –ß—Ç–æ–±—ã –Ω–æ—Ä–º –≤—Å—Ç–∞–≤–ª—è–ª–æ —ç–ª–ª–µ–º–µ–Ω—Ç—ã —Å —Ä–∞–∑–Ω–æ–π —à–∏—Ä–∏–Ω–æ–π, –Ω–µ –≤—ã—Ö–æ–¥—è –∑–∞ –ø—Ä–µ–¥–µ–ª—ã —Å—Ç—Ä–æ–∫–∏\nlocal PANEL = {}\n\nfunction PANEL:Init()\n\tself.name  = \"Untitled\"\n\tself.panels = {} -- line, panels\n\n\tself.current_line = 1\n\n\t--self.elements_tall = 80\nend\n\nfunction PANEL:SetName(sName)\n\tif not sName then return end\n\n\tself.name = sName\n\n\tself.title = self.title or uigs.Create(\"DLabel\", function(title)\n\t\ttitle:SetSize(self:GetWide() - 10 - 10,30)\n\t\ttitle:SetPos(10,10)\n\t\ttitle:SetFont(\"igs.24\")\n\n\t\t-- 30 is label height, 10 is margins\n\t\tself.last_y = 10 + 30\n\tend, self)\n\n\tself.title:SetText(self.name)\n\n\treturn self.title\nend\n\nfunction PANEL:GetLineWide(iLine)\n\tlocal w = 0\n\tfor _,pan in ipairs(self.panels[iLine]) do\n\t\tw = w + pan:GetWide()\n\tend\n\n\t-- 10 - —Ä–∞–∑–º–µ—Ä –æ—Ç—Å—Ç—É–ø–∞\n\treturn w + (#self.panels[iLine] - 1) * 10\nend\n\n-- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–∞–Ω–µ–ª–∏ –≤ —Å—Ç—Ä–æ–∫–µ\n-- function PANEL:GetLine(iLine)\n-- \treturn self.panels[iLine]\n-- end\n\nfunction PANEL:GetCurrentLine()\n\treturn self.panels[self.current_line]\nend\n\n-- Y –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ —Ä—è–¥–∞ –ø–∞–Ω–µ–ª–µ–∫\nfunction PANEL:GetY()\n\tlocal y = (#self.panels - 1) * (self.elements_tall + 10) -- –≤ #self.panels –∫–æ–ª-–≤–æ –ª–∏–Ω–∏–π\n\n\treturn self.title and (y + 10 + 30) or y\nend\n\nfunction PANEL:Add(panel)\n\tpanel:SetParent(self)\n\n\t-- –í—Å–µ —ç–ª–ª–µ–º–µ–Ω—Ç—ã –≤ –ª—ç–π–∞—É—Ç–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤–æ–π –≤—ã—Å–æ—Ç—ã, —Ö–æ—Ç—è –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–∞–∑–Ω–æ–π —à–∏—Ä–∏–Ω—ã\n\tself.elements_tall = self.elements_tall or panel:GetTall()\n\n\tself.panels[self.current_line] = self.panels[self.current_line] or {}\n\ttable.insert(self.panels[self.current_line],panel)\n\n\tlocal line_wide = self:GetLineWide(self.current_line)\n\n\tlocal borders = not self.disabled_align and (self:GetWide() - line_wide) \/ 2 -- –æ—Ç—Å—Ç—É–ø—ã –ø–æ —Å—Ç–æ—Ä–æ–Ω–∞–º\n\tlocal line_panels = self:GetCurrentLine()\n\n\tfor i,pan in ipairs(line_panels) do\n\n\t\t-- –ï—Å–ª–∏ –ø–µ—Ä–≤–∞—è –ø–∞–Ω–µ–ª—å, —Ç–æ –¥–µ–ª–∞–µ–º –æ—Ç—Å—Ç—É–ø, —á—Ç–æ–±—ã –≤ –∫–æ–Ω—Ü–µ –≤—Å–µ –±—ã–ª–æ –ø–æ —Å–µ—Ä–µ–¥–∏–Ω–µ\n\t\tif i == 1 then\n\t\t\tpan:SetPos(self.disabled_align and 10 or borders, self:GetY())\n\t\telse\n\t\t\tlocal x,y = line_panels[i - 1]:GetPos()\n\t\t\tpan:SetPos(x + line_panels[i - 1]:GetWide() + 10,y)\n\t\tend\n\tend\n\n\t-- –ï—Å–ª–∏ —Ä–∞–∑–º–µ—Ä —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ + –µ—â–µ –æ–¥–∏–Ω <= —Ä–∞–∑–º–µ—Ä –ª—ç–π–∞—É—Ç–∞, —Ç–æ –≤—Å—Ç–∞–≤–ª—è–µ–º —ç–ª–ª–µ–º–µ–Ω—Ç\n\t-- if panel.tag then\n\t-- \tprint(\"\\n\\n\")\n\t-- \tprint(\"self:GetWide()\",self:GetWide())\n\t-- \tprint(\"panel:GetWide()\",panel:GetWide())\n\t-- \tprint(\"line_wide\",line_wide)\n\t-- \tprint(panel)\n\t-- end\n\tif line_wide + 10 + panel:GetWide() > self:GetWide() then\n\t\t-- if panel.tag then\n\t\t-- \tPrintTable(self.panels)\n\t\t-- \tprint(\"–ü–µ—Ä–µ—à–ª–∏ –Ω–∞ —Å–ª–µ–¥. —Ä—è–¥\")\n\t\t-- \t--panel:SetPos(self.disabled_align and 10 or borders, self:GetY())\n\t\t-- end\n\t\tself.current_line = self.current_line + 1\n\tend\n\n\tself:PerformLayout()\nend\n\nfunction PANEL:PerformLayout()\n\tself:SetHeight(self:GetY() + self.elements_tall) -- + 10 margin\nend\n\n-- –û—Ç–∫–ª—é—á–∞–µ—Ç —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–ª–ª–µ–º–µ–Ω—Ç–æ–≤\nfunction PANEL:DisableAlignment(bDisable)\n\tself.disabled_align = bDisable\nend\n\n\nvgui.Register(\"igs_panels_layout\", PANEL, \"Panel\")\n--IGS.UI()\n", "igs\/extensions\/shwhitelist.lua":"-- –ê–≤—Ç–æ—Ä @Joch\n-- –¢—É—Ç –∏ –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è\n-- https:\/\/forum.gm-donate.net\/t\/2129\/7\n\nlocal ITEM = MT_IGSItem\n\nfunction ITEM:SetSHWhitelist(team_cmd)\n\treturn self:SetCanActivate(function(pl)\n\t\tif SH_WHITELIST:CanBecomeJob(pl, DarkRP.getJobByCommand(team_cmd)) then\n\t\t\treturn \"–í—ã –≤ –≤–∞–π—Ç–ª–∏—Å—Ç–µ\"\n\t\tend\n\tend):AddHook(\"SH_WHITELIST.CanBecomeJob\", function(pl, job)\n\t\tif job.command == team_cmd then return true end\n\tend):SetValidator(function(pl)\n\t\treturn SH_WHITELIST:CanBecomeJob(pl, DarkRP.getJobByCommand(team_cmd))\n\tend)\nend\n", "igs\/interface\/vgui\/igs_item.lua":"-- –ü–ª–∞—à–µ—á–∫–∞ –ø—Ä–µ–¥–º–µ—Ç–∞ —Å –∏–∫–æ–Ω–∫–æ–π, —Ü–µ–Ω–æ–π\n\n--[[-------------------------------------------------------------------------\n\t:SetIcon –î–û–õ–ñ–ï–ù –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –î–û :SetName\n\t–∞ :SetName –î–û–õ–ñ–ï–ù –≤—ã–∑—ã–≤–∞—Ç—å—Å—è –î–û :SetSign\n---------------------------------------------------------------------------]]\nlocal PANEL = {}\n\nlocal function getBottomText(ITEM, bShowDiscounted)\n\tlocal iDiscFrom = bShowDiscounted and ITEM.discounted_from\n\n\tlocal iReal = iDiscFrom or ITEM:GetPrice( LocalPlayer() )\n\tlocal real = PL_MONEY(iReal)\n\treturn real\nend\n\n\nlocal font_exists\nfunction PANEL:Init()\n\tself:SetSize(180,70)\n\n\tif not font_exists then\n\t\tsurface.CreateFont(\"roboto_15\",{\n\t\t\tfont     = \"roboto\",\n\t\t\textended = true,\n\t\t\tsize     = 15,\n\t\t})\n\n\t\tsurface.CreateFont(\"roboto_20\",{\n\t\t\tfont     = \"roboto\",\n\t\t\textended = true,\n\t\t\tsize     = 20,\n\t\t})\n\tend\nend\n\nfunction PANEL:SetItem(STORE_ITEM)\n\tself.item = STORE_ITEM\n\n\tself:SetIcon(STORE_ITEM:ICON())\n\tself:SetName(STORE_ITEM:Name())\n\t-- self:SetPrice(STORE_ITEM:GetPrice( LocalPlayer() ))\n\n\tself:SetTitleColor(STORE_ITEM:GetHighlightColor()) -- nil\n\n\tself:SetSign( \"–î–µ–π—Å—Ç–≤. \" .. IGS.TermToStr(STORE_ITEM:Term()) )\n\n\tself:SetBottomText( getBottomText(STORE_ITEM, true) )\n\n\treturn self\nend\n\nfunction PANEL:SetName(sName)\n\t(self.icon or self):SetTooltip(sName .. (self.item and \"\\n\\n\" .. self.item:Description():gsub(\"\\n\\n\",\"\\n\") or \"\"))\n\n\tself.name = self.name or uigs.Create(\"DLabel\", function(lbl)\n\t\tlbl:SetTall(20)\n\t\tlbl:SetFont(\"roboto_20\")\n\t\tlbl:SetTextColor(self.title_color or IGS.col.TEXT_HARD)\n\tend, self)\n\n\tself.name:SetText(sName)\n\n\treturn self.name\nend\n\nfunction PANEL:SetSign(sSignature)\n\tself.sign = self.sign or uigs.Create(\"DLabel\", function(lbl)\n\t\tlbl:SetTall(15)\n\t\tlbl:SetFont(\"roboto_15\")\n\t\tlbl:SetTextColor(IGS.col.TEXT_SOFT)\n\tend, self)\n\n\tself.sign:SetText(sSignature)\n\n\treturn self.sign\nend\n\nfunction PANEL:SetBottomText(sBottomText)\n\tself.bottom = self.bottom or uigs.Create(\"DLabel\", function(lbl)\n\t\tlbl:SetTall(15)\n\t\tlbl:SetFont(\"roboto_15\")\n\t\tlbl:SetTextColor(IGS.col.TEXT_SOFT)\n\t\tlbl:SetContentAlignment(5)\n\t\t-- lbl:SetWrap(true)\n\t\t-- lbl:SetAutoStretchVertical(true)\n\tend, self)\n\n\tself.bottom:SetText(sBottomText)\n\n\treturn self.bottom\nend\n\n-- TODO —Å–Ω–∏–∑—É –≤ —Ä–∞–º–æ—á–∫—É –∏ DOCK RIGHT –≤–º–µ—Å—Ç–µ —Å –¥–æ–∫ —Ñ–∏–ª—å–Ω—ã–º —Å—Ä–æ–∫–æ–º\n-- function PANEL:SetPrice(iPrice)\n-- \tself.price = iPrice\n-- \treturn self\n-- end\n\nfunction PANEL:SetIcon(sIco, sMode) -- :SetIcon() –¥–ª—è —Å–±—Ä–æ—Å–∞\n\tif not sIco then return self end\n\n\tlocal bIsModel = sMode == true or sMode == \"model\"\n\tlocal bIsMaterial = sMode == \"material\"\n\n\tif bIsModel and not file.Exists(sIco, \"GAME\") then\n\t\tsIco = \"models\/props_lab\/huladoll.mdl\"\n\tend\n\n\tif not self.icon then\n\t\tlocal icobg = uigs.Create(\"Panel\", self)\n\t\ticobg:SetSize(40,40)\n\t\ticobg:SetPos(2,2)\n\t\ticobg.Paint = IGS.S.RoundedPanel\n\n\t\tself.icon = bIsModel and uigs.Create(\"DModelPanel\", function(mdl)\n\t\t\tmdl:Dock(FILL)\n\t\t\tmdl:DockMargin(2,2,2,2)\n\t\t\tmdl:SetModel(sIco)\n\n\t\t\tlocal mn, mx = mdl.Entity:GetRenderBounds()\n\t\t\tlocal size = 0\n\t\t\tsize = math.max(size, math.abs(mn.x) + math.abs(mx.x))\n\t\t\tsize = math.max(size, math.abs(mn.y) + math.abs(mx.y))\n\t\t\tsize = math.max(size, math.abs(mn.z) + math.abs(mx.z))\n\n\t\t\tmdl:SetFOV(30)\n\t\t\tmdl:SetCamPos(Vector(size, size, size))\n\t\t\tmdl:SetLookAt((mn + mx) * 0.5)\n\t\t\tmdl.LayoutEntity = function() return false end\n\t\tend, icobg)\n\n\t\t-- –ù–ï –º–æ–¥–µ–ª—å–∫–∞ (–°—Å—ã–ª–∫–∞ –Ω–∞ –∏–∫–æ–Ω–∫—É)\n\t\tor\n\n\t\tuigs.Create(\"igs_wmat\", function(ico)\n\t\t\tico:Dock(FILL)\n\t\t\tico:DockMargin(2,2,2,2)\n\t\tend, icobg)\n\tend\n\n\tif bIsModel then\n\t\tself.icon:SetModel(sIco)\n\telseif bIsMaterial then\n\t\tself.icon:SetMaterial(sIco)\n\telse\n\t\tself.icon:SetURL(sIco)\n\tend\n\n\treturn self\nend\n\nfunction PANEL:DoClick()\n\tIGS.WIN.Item(self.item:UID()) -- –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ SetItem\nend\n\nfunction PANEL:PerformLayout()\n\tif self.icon then\n\t\tlocal x = 2 + 40 + 5\n\t\tself.name:SetPos(x, 2)\n\t\tself.name:SetWide(self:GetWide() - x - 2)\n\telse\n\t\tself.name:SetPos(5, 2)\n\t\tself.name:SetWide(self:GetWide() - 2 - 5)\n\tend\n\n\tlocal nx,ny = self.name:GetPos() -- n = name\n\tself.sign:SetPos(nx, ny + self.name:GetTall() + 2)\n\tself.sign:SetWide(self.name:GetWide())\n\n\tif self.bottom then\n\t\tself.bottom:SetPos(2, 2 + 40 + 9)\n\t\tself.bottom:SetWide(self:GetWide() - 2 - 2)\n\tend\n\n\tif self.title_color then\n\t\tself.name:SetTextColor(self.title_color)\n\tend\nend\n\nfunction PANEL:SetTitleColor(c)\n\tself.title_color = c\nend\n\n\nfunction PANEL:Paint(w,h)\n\tIGS.S.RoundedPanel(self, w,h)\n\n\tif self.bottom then\n\t\tlocal bx,by = self.bottom:GetPos()\n\n\t\tsurface.SetDrawColor( IGS.col.HARD_LINE )\n\t\tsurface.DrawLine(bx + 5,by - 2,bx + self.bottom:GetWide() - 10,by - 2)\n\tend\n\n\treturn true\nend\n\n--[[-------------------------------------------------------------------------\n\t–ñ—Ç–æ –≤—Å–µ –Ω—É–∂–Ω–æ –±—ã–ª–æ –¥–ª—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ –ª–µ–π–±–ª–∞ —Å —Ä–∞–∑–º–µ—Ä–æ–º —Å–∫–∏–¥–∫–∏\n\t–ü—Ä–æ–±–ª–µ–º–∞ –æ–∫–∞–∑–∞–ª–∞—Å—å –Ω–∞ —ç—Ç–∞–ø–µ —Ä–∏—Å–æ–≤–∞–Ω–∏—è –ø–æ–≤–µ—Ä–Ω—É—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç–∞\n\t–ù–∞–±—Ä–æ—Å—ã: https:\/\/gist.github.com\/AMD-NICK\/7f2aeb674763fe91c2d0668f84357f2e\n\t–ö–∞—Ä—Ç–æ—á–∫–∞: https:\/\/trello.com\/c\/Zx6qTzBn\/303\n\n\tColor(220,30,70) -- –®—Ç—É–∫–∏ –∑–∞ –±–∏—Ä–∫–æ–π\n\tColor(255,30,85) -- –¶–≤–µ—Ç –±–∏—Ä–∫–∏\n\tColor(255,255,255) -- –¢–µ–∫—Å—Ç –±–∏—Ä–∫–∏\n\tdraw.RotatedText\n---------------------------------------------------------------------------]]\n-- local function draw_TextRotated(text, x, y, color, font, ang)\n-- \tsurface.SetFont(font)\n-- \tsurface.SetTextColor(color)\n-- \tsurface.GetTextSize(text)\n\n-- \tlocal m = Matrix()\n-- \tm:SetAngles(Angle(0, ang, 0))\n-- \tm:SetTranslation(Vector(x, y, 0))\n\n-- \tcam.PushModelMatrix(m)\n-- \t\tsurface.SetTextPos(0, 0)\n-- \t\tsurface.DrawText(text)\n-- \tcam.PopModelMatrix()\n-- end\n\n-- local function draw_Poly(tVertices,tColor_)\n-- \tsurface.SetDrawColor(tColor_ or color_white)\n-- \tdraw.NoTexture()\n-- \tsurface.DrawPoly(tVertices)\n-- end\n\n-- 2250, 3000 = 25\n-- local function diffNumsPercent(a, b)\n-- \treturn math.ceil(100 - a \/ (b \/ 100))\n-- end\n\n-- –í—Å. —Ñ—É–Ω–∫—Ü–∏—é –º–æ–∂–Ω–æ –Ω–∞–∑–≤–∞—Ç—å –ø–∏–∑–¥–µ—Ü–∫–æ–π –∫–æ—Å—Ç—ã–ª—è–∫–æ–π\nfunction PANEL:PaintOver(w,h)\n\tif self.item and self.item.discounted_from then\n\t\t-- local disc_price = self.item.discounted_from\n\t\t-- local disc = diffNumsPercent(disc_price, self.item:GetPrice( LocalPlayer() ))\n\n\t\tsurface.SetDrawColor(IGS.col.TEXT_SOFT)\n\n\t\t-- surface.DrawRect(w - 60,0,25,2)\n\t\t-- surface.DrawRect(w - 2,h - 10 - 25,2,25)\n\n\t\t-- draw_Poly({\n\t\t-- \t{x = w - 60,y = 2},\n\t\t-- \t{x = w - 60 + 25,y = 2},\n\t\t-- \t{x = w - 2,y = h - 10 - 25},\n\t\t-- \t{x = w - 2,y = h - 10},\n\t\t-- }, Color(255,30,85, 255))\n\n\t\t-- draw_TextRotated(\"-\" .. disc .. \"%\", 100, -50, Color(0,255,0), \"roboto_20\", 9)\n\t\t-- surface.SetTextColor(50,200,50)\n\t\t-- surface.SetFont(\"roboto_20\")\n\n\t\t-- local x,y = self:GetPos()\n\t\t-- draw.RotatedText(\"-\" .. disc .. \"%\", x, y, 1, 1, 9)\n\t\t-- draw.RotatedText(\"-\" .. disc .. \"%\", x, y, 3)\n\t\t-- draw.TextRotated(\"-\" .. disc .. \"%\", 0, 0, 3)\n\t\t-- draw.RotatedTextOnPanel(\"-\" .. disc .. \"%\", 0, 0, 5, self)\n\n\t\tlocal tw = draw.SimpleText(\n\t\t\tgetBottomText(self.item, false),\"roboto_15\",\n\t\t\tw \/ 2,h - 18 - 2 - 10,IGS.col.HIGHLIGHTING,TEXT_ALIGN_CENTER\n\t\t)\n\n\t\tlocal start_x, start_h = (w - tw) \/ 2 * 0.8, h - (20 \/ 2)\n\t\tsurface.DrawLine(start_x, start_h,w - start_x, start_h)\n\tend\nend\n\n\nvgui.Register(\"igs_item\",PANEL,\"DButton\")\n\n-- IGS.CloseUI()\n-- IGS.UI()\n", "igs\/extensions\/xadmin.lua":"IGS.ITEMS.XADMIN_USERS = IGS.ITEMS.XADMIN_USERS or {} -- by kip https:\/\/t.me\/c\/1353676159\/1673\n\nlocal STORE_ITEM = MT_IGSItem\n\nfunction STORE_ITEM:SetXAdminGroup(sUserGroup)\n\treturn self:SetInstaller(function(pl)\n\t\txAdmin.UserGroups[pl:SteamID()] = sUserGroup\n\t\tpl:SetUserGroup(sUserGroup)\n\t\tIGS.ITEMS.XADMIN_USERS[pl:SteamID()] = true\n\tend):SetValidator(function()\n\t\treturn false\n\tend)\nend\n\nhook.Add(\"PlayerDisconnected\", \"IGS.XAdminRemovePerm\", function(pl)\n\tif IGS.ITEMS.XADMIN_USERS[pl:SteamID()] then\n\t\txAdmin.UserGroups[pl:SteamID()] = nil\n\t\tIGS.ITEMS.XADMIN_USERS[pl:SteamID()] = nil\n\tend\nend)\n\n\n-- –ï—Å—Ç—å xAdmin.SetGroup(pl, sUserGroup)\n-- –Ω–æ —Ç–æ–≥–¥–∞ –±—É–¥–µ—Ç —Å–ª–æ–∂–Ω–µ–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–∏—Ä–æ–≤–∞—Ç—å —Å–Ω—è—Ç–∏–µ –ø—Ä–∞–≤, —Ç–∫ –∏–¥–µ—Ç –∑–∞–ø–∏—Å—å –≤ –ë–î\nfunction STORE_ITEM:SetXAdmin2Group(sUserGroup)\n\treturn self:SetInstaller(function(pl)\n\t\tlocal sid64 = pl:SteamID64()\n\t\tlocal oldgroup = pl:GetUserGroup()\n\n\t\txAdmin.UserData[sid64] = xAdmin.UserData[sid64] or {SteamID = sid64}\n\t\txAdmin.UserData[sid64].UserGroup = sUserGroup\n\n\t\tpl:SetUserGroup(sUserGroup)\n\n\t\txAdmin.UpdateGroupMembers(player.GetAll(), sUserGroup)\n\n\t\thook.Run(\"xAdminUserGroupUpdated\", pl, sUserGroup, oldgroup)\n\tend):AddHook(\"IGS.PlayerPurchasesLoaded\", function(pl, purchases)\n\t\tif CLIENT or not purchases then return end\n\n\t\tlocal priority_item = self\n\n\t\tfor uid in pairs(purchases) do\n\t\t\tlocal ITEM = IGS.GetItemByUID(uid)\n\t\t\tif ITEM:GetMeta(\"badmin2group\") and ITEM.id > self.id then\n\t\t\t\tpriority_item = ITEM\n\t\t\tend\n\t\tend\n\n\t\tif priority_item == self then\n\t\t\tself:Setup(pl)\n\t\tend\n\tend):SetMeta(\"badmin2group\", sUserGroup)\nend\n", "entities\/ent_igs\/cl_init.lua":"IGS.sh(\"shared.lua\")\n\nlocal UPPER_TEXT = Color(255,255,255)\nlocal LOWER_TEXT = Color(20, 150, 200)\nlocal OUTLINE    = Color(0,0,0)\n\nlocal font = \"igs.40\"\nlocal function drawSide(pos,ang,t1,t2)\n\tcam.Start3D2D(pos, ang, .1)\n\t\tdraw.SimpleTextOutlined(t1, font, 0, -385, UPPER_TEXT, TEXT_ALIGN_CENTER, nil, 1, OUTLINE)\n\t\tdraw.SimpleTextOutlined(t2, font, 0, -350, LOWER_TEXT, TEXT_ALIGN_CENTER, nil, 1, OUTLINE)\n\tcam.End3D2D()\nend\n\n\n\n-- –≤ Draw –∏–∑–º–µ–Ω—è—Ç—å –æ—Å—Ç–æ—Ä–æ–∂–Ω–æ\n-- (–º–æ–∂–µ—Ç –±—ã—Ç—å –∫—É—á–∞ –∏—Ç–µ–º–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —É—Å–∫–æ—Ä—è—é—Ç –∞–Ω–∏–º–∞—Ü–∏—é –ø—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –∫–æ–¥–µ)\nlocal ang = Angle(0,0,90)\nfunction ENT:Draw()\n\tang.y = -180 * math.Remap(CurTime() % 3, 0,3, 0,1) -- –º–∏–Ω—É—Å –∫—Ä—É—Ç–∏—Ç—å –≤ –¥—Ä—É–≥—É—é —Å—Ç–æ—Ä–æ–Ω—É\n\n\tself:DrawModel()\n\n\tlocal pos = self:GetPos()\n\n\tlocal ITEM = IGS.GetItemByUID(self:GetUID())\n\tlocal t1 = ITEM:Name()\n\tlocal t2 = \"–î–µ–π—Å—Ç–≤—É–µ—Ç \" .. IGS.TermToStr(ITEM:Term())\n\n\tdrawSide(pos,ang,t1,t2)\n\tang:RotateAroundAxis(ang:Right(), 180)\n\tdrawSide(pos,ang,t1,t2)\nend\n", "igs\/extensions\/levels.lua":"--[[-------------------------------------------------------------------------\n\t–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤–æ—Ç —ç—Ç–æ–≥–æ –≥–æ–≤–Ω–æ–∫–æ–¥–∞:\n\thttps:\/\/github.com\/vrondakis\/Leveling-System\n---------------------------------------------------------------------------]]\nlocal STORE_ITEM = MT_IGSItem\n\nfunction STORE_ITEM:SetLevels(iAmount)\n\treturn self:SetInstaller(function(pl)\n\t\tpl:addLevels(iAmount)\n\tend)\nend\n\nfunction STORE_ITEM:SetEXP(iAmount)\n\treturn self:SetInstaller(function(pl)\n\t\tpl:addXP(iAmount)\n\tend)\nend\n", "igs\/extensions\/infammo.lua":"-- –∏—Å—Ç–æ—á–Ω–∏–∫ –∏ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è:\n-- https:\/\/forum.gm-donate.net\/t\/usluga-beskonechnye-patrony\/633\/10?u=gmd\n\n-- IGS(\"–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ –ø–∞—Ç—Ä–æ–Ω—ã\", \"infammo\", 100)\n-- \t:SetInfAmmo()\n-- \t:SetTerm(10)\n\nlocal ITEM = MT_IGSItem\n\nlocal function setInfAmmo(pl)\n\tlocal weapon = pl:GetActiveWeapon()\n\tif not IsValid(weapon) then return end\n\n\tlocal maxClip      = weapon:GetMaxClip1()\n\tlocal maxClip2     = weapon:GetMaxClip2()\n\tlocal primAmmoType = weapon:GetPrimaryAmmoType()\n\tlocal secAmmoType  = weapon:GetSecondaryAmmoType()\n\n\tif maxClip == -1 and maxClip2 == -1 then\n\t\tmaxClip = 100\n\t\tmaxClip2 = 100\n\tend\n\n\tif maxClip <= 0 and primAmmoType ~= -1 then\n\t\tmaxClip = 1\n\tend\n\n\tif maxClip2 == -1 and secAmmoType ~= -1 then\n\t\tmaxClip2 = 1\n\tend\n\n\tif maxClip > 0 then\n\t\tweapon:SetClip1(maxClip)\n\tend\n\n\tif maxClip2 > 0 then\n\t\tweapon:SetClip2(maxClip2)\n\tend\n\n\tif primAmmoType ~= -1 then\n\t\tpl:SetAmmo( maxClip, primAmmoType, true)\n\tend\n\n\tif secAmmoType ~= -1 and secAmmoType ~= primAmmoType then\n\t\tpl:SetAmmo( maxClip2, secAmmoType, true)\n\tend\nend\n\n\nlocal infammo_players = {}\n\ntimer.Create(\"igs_infammo\", 3.3, 0, function()\n\tif not infammo_players[1] then return end\n\n\tfor i = #infammo_players, 0, -1 do -- reversed ipairs\n\t\tlocal pl = infammo_players[i]\n\t\tif IsValid(pl) then\n\t\t\tsetInfAmmo(pl)\n\t\telse\n\t\t\ttable.remove(infammo_players, i)\n\t\tend\n\tend\nend)\n\nfunction ITEM:SetInfAmmo()\n\treturn self:SetInstaller(function(pl)\n\t\tif not table.HasValue(infammo_players, pl) then\n\t\t\ttable.insert(infammo_players, pl)\n\t\tend\n\tend):SetValidator(function(pl)\n\t\treturn false\n\tend)\nend\n", "igs\/apinator.lua":"local function map(t, f)\n\tlocal _t = {}\n\tfor index, value in pairs(t) do\n\t\tlocal k, kv, v = index, f(value, index)\n\t\t_t[v and kv or k] = v or kv\n\tend\n\treturn _t\nend\n\nlocal error_no_igsmod =\n\t\"ABTogoHaT He HacTpoeH: Hy}{Ho ycTaHoBuTb igsmodificator. \" ..\n\t\"(CKa4auTe ero c cauTa gm-donate.net\/panel)\"\n\nlocal error_invalid_credentials =\n\t\"–ù–µ —É–∫–∞–∑–∞–Ω—ã –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω–æ —É–∫–∞–∑–∞–Ω—ã –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç–∞ –≤ —Ñ–∞–π–ª–µ config_sv.lua\"\n\nlocal DELIMITER = \"{up}\"\nfunction IGS.GetSign(tParams, secret)\n\tlocal s = \"\"\n\tfor _, v in SortedPairs(tParams) do\n\t\ts = s .. tostring(v):Trim() .. DELIMITER\n\tend\n\n\treturn util.SHA256(s .. (secret or IGS.C.ProjectKey))\nend\n\nfunction IGS.DoRequest(project_id, secret, sMethod, tParams, fSucc, fErr)\n\ttParams = map(tParams, tostring)\n\n\tlocal api_url = IGS_API_ENDPOINT or \"https:\/\/gm-donate.net\/api\"\n\thttp.Post(api_url .. sMethod, tParams, fSucc, fErr, {\n\t\tsign    = IGS.GetSign(tParams, secret),\n\t\tproject = tostring(project_id)\n\t})\nend\n\nfunction IGS.RawQuery(sMethod, tParams, fOnSuccess, fOnError)\n\tif not IGS.C.ProjectKey then\n\t\tIGS.prints(Color(255, 0, 0), \"\", error_no_igsmod)\n\t\treturn\n\tend\n\n\tif #IGS.C.ProjectKey ~= 32 or not IGS.C.ProjectKey:match(\"^[a-f0-9]+$\") or IGS.C.ProjectID == 0 then\n\t\tIGS.prints(Color(255, 0, 0), \"\", error_invalid_credentials)\n\t\treturn\n\tend\n\n\tIGS.DoRequest(IGS.C.ProjectID, IGS.C.ProjectKey, sMethod, tParams, fOnSuccess, fOnError)\nend\n\nlocal function wrapResponse(sMethod, tParams, fOnSuccess, fOnError)\n\tIGS.RawQuery(sMethod, tParams, function(sBody)\n\t\tlocal d = util.JSONToTable(sBody)\n\n\t\tif (not d) then\n\t\t\tIGS.prints(Color(255, 0, 0), \"\", sBody)\n\t\t\tfOnError(\"invalid_response_format\")\n\t\telseif (not d.ok) then\n\t\t\tfOnError(d.error)\n\t\telse\n\t\t\tfOnSuccess(d)\n\t\tend\n\tend, function(err)\n\t\tIGS.prints(Color(255, 0, 0), \"\", \"HTTP Error: \" .. err)\n\t\tfOnError(\"http_error\")\n\tend)\nend\n\nfunction IGS.WrapQuery(sMethod, tParams, fOnSuccess, fOnError)\n\twrapResponse(sMethod, tParams, function(tResponse)\n\t\thook.Run(\"IGS.OnApiSuccess\", sMethod, tResponse, tParams)\n\t\tif fOnSuccess then fOnSuccess(tResponse.data) end\n\tend, function(error_uid)\n\t\thook.Run(\"IGS.OnApiError\", sMethod, error_uid, tParams, fOnSuccess)\n\t\tif fOnError then fOnError(error_uid) end\n\tend)\nend\n\nfunction IGS.Query(sMethod, tParams, fOnSuccess)\n\tIGS.REPEATER:SafeQuery(sMethod, tParams, fOnSuccess)\nend\n\n\n-- –î–µ–±–∞–≥\n-- local sid = \"76561198071463189\"\n\n\n\n--[[\n>----------------------------<\n\t–î–ï–ô–°–¢–í–ò–Ø –° –ò–ì–†–û–ö–û–ú\n>----------------------------<\n]]\n-- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ –Ω–∏–∫–µ, —á—Ç–æ–±—ã –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –≤ —á–∞—Ä—Ç–∞—Ö –∏ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø–æ–∫—É–ø–∫–∞—Ö, –¥–∞ –∏ –≤–æ–æ–±—â–µ, —á—Ç–æ–±—ã –∑–Ω–∞—Ç—å —á—Ç–æ –∑–∞ —á–µ–ª\n-- –ö–∞–ª–ª–±—ç–∫ –±–µ—Å–ø–æ–ª–µ–∑–µ–Ω. –ë–µ–∑ –≤–∞–∂–Ω–æ–π –∏–Ω—Ñ—ã\nfunction IGS.UpdatePlayerName(s64, sName, fCallback)\n\tIGS.Query(\"\/donators\/setName\", {\n\t\tsid  = s64,\n\t\tname = sName\n\t}, fCallback)\nend\n-- IGS.UpdatePlayerName(sid, \"TEST !@#$%^&*()'\", PRINT)\n\n-- nil or {`Name`, `Balance`, `Score`}\nfunction IGS.GetPlayer(s64, fCallback)\n\tIGS.Query(\"\/donators\/get\", {\n\t\tsid = s64,\n\t}, fCallback)\nend\n-- IGS.GetPlayer(sid, PRINT)\n\n-- –í –∫–∞–ª–ª–±—ç–∫–µ nil –∏–ª–∏ –±–∞–ª–∞–Ω—Å –¥–æ–Ω–∞—Ç –≤–∞–ª—é—Ç—ã –∏–≥—Ä–æ–∫–∞\nfunction IGS.GetBalance(s64, fCallback)\n\tIGS.GetPlayer(s64, function(player)\n\t\tfCallback(player and player[\"Balance\"])\n\tend)\nend\n-- IGS.GetBalance(sid, PRINT)\n\n-- nil or nick\nfunction IGS.GetName(s64, fCallback)\n\tIGS.GetPlayer(s64, function(player)\n\t\tfCallback(player and player[\"Name\"])\n\tend)\nend\n-- IGS.GetName(sid, PRINT)\n\n\n\n--[[\n>----------------------------<\n\t–¢–†–ê–ù–ó–ê–ö–¶–ò–ò\n>----------------------------<\n]]\n-- –ú–∞–∫—Å –¥–ª–∏–Ω–∞ –ø—Ä–∏–º–µ—á–∞–Ω–∏—è - 80 —Å–∏–º–≤–æ–ª–æ–≤\n-- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç ID –≤—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏\nfunction IGS.Transaction(s64, iSum, sNote_, fCallback)\n\tIGS.Query(\"\/transactions\/create\", {\n\t\tsid  = s64,\n\t\ts    = IGS.SERVERS:ID(),\n\t\tsum  = iSum,\n\t\tnote = sNote_ or nil,\n\t}, fCallback and function(res)\n\t\tif res and res ~= 0 then\n\t\t\tfCallback(res)\n\t\tend\n\tend)\nend\n-- IGS.Transaction(sid, -2, \"test . , !#$%^&*(\", function(id)\n-- \tPRINT(\"–í—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –∏–¥: \" .. id)\n-- end)\n\n-- `ID`, `Sum`, `Time`, `Note`, `Server`, `SteamID`\nfunction IGS.GetTransactions(fCallback, s64_, bGlobal_, iLimit_, iOffset_) -- –Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É\n\tIGS.Query(\"\/transactions\/get\", {\n\t\tsid    = s64_ or nil,\n\t\ts      = (not bGlobal_) and IGS.SERVERS:ID() or nil,\n\t\tlimit  = iLimit_ or nil, -- max 255\n\t\toffset = iOffset_ or nil,\n\t}, fCallback)\nend\n-- IGS.GetTransactions(PRINT, sid, false, 10)\n\n-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ 255 —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏–≥—Ä–æ–∫–∞ (8 –±–∞–π—Ç unsigned int) (net(\"IGS.MyTransactions\")\nfunction IGS.GetPlayerTransactions(fCallback, s64) -- –Ω–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É\n\tIGS.GetTransactions(fCallback, s64, true, 255)\nend\n-- IGS.GetPlayerTransactions(PRINT, sid)\n\n-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞. –ë–µ–∑ –ª–∏–º–∏—Ç–∞ –≤–µ—Ä–Ω–µ—Ç 255\nfunction IGS.GetLatestTransactions(fCallback, iLimit_)\n\tIGS.GetTransactions(fCallback, nil, true, iLimit_)\nend\n-- IGS.GetLatestTransactions(PRINT, 10)\n\n\n\n\n--[[\n>----------------------------<\n\t–ü–û–ö–£–ü–ö–ò\n>----------------------------<\n]]\n-- –í –∫–∞–ª–ª–±—ç–∫–µ –ò–î –ø–æ–∫—É–ø–∫–∏ —Å –ë–î. –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞—Ç—å iDaysTerm, —Ç–æ –Ω–∞–≤—Å–µ–≥–¥–∞\nfunction IGS.StorePurchase(s64, sItemUID, iDaysTerm_, iServerID, fCallback)\n\tIGS.Query(\"\/purchases\/create\", {\n\t\tsid  = s64,\n\t\ts    = iServerID,\n\t\titem = sItemUID,\n\t\tterm = iDaysTerm_ or nil, -- nil, —á—Ç–æ–±—ã –Ω–∞–≤—Å–µ–≥–¥–∞\n\t}, fCallback and function(last_ID)\n\t\tlast_ID = tonumber(last_ID)\n\t\tif last_ID and last_ID ~= 0 then\n\t\t\tfCallback(last_ID)\n\t\tend\n\tend)\nend\n\nfunction IGS.StoreLocalPurchase(s64, sItemUID, iDaysTerm_, fCallback)\n\tIGS.StorePurchase(s64, sItemUID, iDaysTerm_, IGS.SERVERS:ID(), fCallback)\nend\n-- IGS.StoreLocalPurchase(sid, \"item\", 2, function(id)\n-- \tPRINT(\"–í—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –∏–¥: \" .. id)\n-- end)\n\n-- –ü–µ—Ä–µ–Ω–æ—Å –ø–æ–∫—É–ø–∫–∏. –ï—Å–ª–∏ —É–∫–∞–∑–∞—Ç—å iNewServer nil, —Ç–æ –ø–æ–∫—É–ø–∫–∞ —Å—Ç–∞–Ω–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ–π –Ω–∞ –≤—Å–µ—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö\n-- –ö–∞–∂–µ—Ç—Å—è, –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç true (upd: https:\/\/t.me\/c\/1353676159\/35765)\nfunction IGS.MovePurchase(db_id, iNewServer_, fCallback)\n\tIGS.Query(\"\/purchases\/move\", {\n\t\tid      = db_id,\n\t\tserv_to = iNewServer_ or nil -- nil –¥–ª—è global #todo global –∏—Å—Ç—Ä–µ–±–ª–µ–Ω, –∫–∞–∫ –≤–∏–¥\n\t}, fCallback)\nend\n-- IGS.MovePurchase(10519, nil, PRINT)\n\n-- –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–∫—É–ø–∫–∏. ID –ø–æ–ª—É—á–∞—Ç—å —á–µ—Ä–µ–∑ IGS.GetPurchases\nfunction IGS.DisablePurchase(db_id, fCallback)\n\tIGS.MovePurchase(db_id, 0, fCallback)\nend\n-- IGS.DisablePurchase(123, PRINT)\n\n-- available params: sid, limit (max 127), offset, s, only_active\n-- return list of {`ID`,`Server`,`Item`,`Purchase`,`Expire`(—Ç–∞–π–º—à—Ç–∞–º–ø),`SteamID`, `Nick`}\n-- https:\/\/img.qweqwe.ovh\/1507920534081.png\nfunction IGS.GetPurchases(fCallback, tParams)\n\tIGS.Query(\"\/purchases\/get\", tParams, fCallback) -- —Ç–∞–±–ª–∏—Ü–∞\nend\n\nfunction IGS.GetPlayerPurchases(s64, fCallback)\n\tIGS.GetPurchases(fCallback, {sid = s64, only_active = 1, s = IGS.SERVERS:ID()})\nend\n-- IGS.GetPlayerPurchases(sid, PRINT)\n\n-- –í –∫–æ–ª–ª–±—ç–∫–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø–æ–∫—É–ø–æ–∫\n-- (`Nick`,`Server`,`Item`,`DateExpire`)\nfunction IGS.GetLatestPurchases(fCallback, iLimit_) -- max 127\n\tIGS.GetPurchases(fCallback, {limit = iLimit_ or 10})\nend\n\n-- IGS.GetLatestPurchases(function(t)\n-- \tlocal res = fn.Foldl(function(a, v)\n-- \t\ta[v.SteamID] = v.Nick\n-- \t\treturn a\n-- \tend, {}, t)\n\n-- \tPRINT(res)\n-- end, 127)\n\n\n\n--[[\n>----------------------------<\n\t–°–°–´–õ–ö–ò\n>----------------------------<\n]]\nfunction IGS.GetPaymentURL(fCallback, s64, iSum, sExtra)\n\tIGS.Query(\"\/url\/getPayment\", {\n\t\tsid   = s64,\n\t\tsum   = iSum,\n\t\textra = sExtra or nil, -- –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ. –ï—Å–ª–∏ —É–∫–∞–∑–∞—Ç—å, —Ç–æ –≤ —Ö—É–∫–µ IGS.PaymentStatusUpdated (–ø–æ—Å–ª–µ –æ–ø–ª–∞—Ç—ã) –±—É–¥–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä .extraData —Å –≤–∞—à–∏–º –∑–Ω–∞—á–µ–Ω–∏–µ–º\n\t}, fCallback) -- —Å—Å—ã–ª–∫–∞\nend\n-- IGS.GetPaymentURL(PRINT, sid, 10, \"test\")\n\n\n--[[\n>----------------------------<\n\t–ü–†–û–ï–ö–¢ (–ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–æ–µ–∫—Ç)\n>----------------------------<\n]]\n-- {settings = {[\"MinCharge\"] = val,[\"CurrencyPrice\"] = val},\n-- name = \"name\",\n-- coowners = {[sSid] = iAccess}}\nfunction IGS.GetProjectData(fCallback)\n\tIGS.Query(\"\/project\/get\", {}, function(p)\n\t\tif p then\n\t\t\t-- –ö–æ—Å—Ç—ã–ª—å 80–≥–æ –ª–≤–ª, —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å –ø—Ä–∏–Ω—Ü–∏–ø–æ–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ JSON –≤ –≥–º–æ–¥–µ\n\t\t\tfor s64, access in pairs(p.coowners) do\n\t\t\t\tp.coowners[s64] = nil\n\t\t\t\tp.coowners[s64:sub(2)] = access\n\t\t\tend\n\t\tend\n\n\t\tfCallback(p)\n\tend) -- —Ç–∞–±–ª–∏—Ü–∞\nend\n-- IGS.GetProjectData(PRINT)\n\n-- `MinCharge`,`CurrencyPrice`\nfunction IGS.GetSettings(fCallback)\n\tIGS.GetProjectData(function(proj)\n\t\tfCallback(proj[\"settings\"])\n\tend)\nend\n-- IGS.GetSettings(PRINT)\n\n-- project\/getPlayers\n\n\n\n--[[\n>----------------------------<\n\t–°–ï–†–í–ï–†–´\n>----------------------------<\n]]\n-- –î–æ–±–∞–≤–ª—è–µ—Ç —Å–µ—Ä–≤–µ—Ä –∫ –ø—Ä–æ–µ–∫—Ç—É. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç ID\nfunction IGS.AddServer(ip, port, fCallback)\n\tIGS.Query(\"\/servers\/create\", {\n\t\tip   = ip,\n\t\tport = port,\n\t}, fCallback) -- id –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞\nend\n-- IGS.AddServer(\"255.255.255.255\", 65535, PRINT)\n\n-- –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞\n-- `ID`,`Name`,`IP`,`Port`,`Disabled`\n-- –ï—Å–ª–∏ —É–∫–∞–∑–∞—Ç—å bIncludeDisabled, —Ç–æ –ø–æ–ª—É—á–∏—Ç –∏ –æ—Ç–∫–ª—é—á–µ–Ω–Ω—ã–µ\nfunction IGS.GetServers(fCallback, bIncludeDisabled_, iID_)\n\tIGS.Query(\"\/servers\/get\", {\n\t\ts   = iID_ or nil,\n\t\tall = bIncludeDisabled_ and 1 or nil\n\t}, fCallback) -- —Ç–∞–±–ª–∏—Ü–∞\nend\n-- IGS.GetServers(PRINT, true, 10)\n\n-- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤–Ω–µ—à–Ω–∏–π IP —Å–µ—Ä–≤–µ—Ä–∞\nfunction IGS.GetExternalIP(fCallback)\n\tIGS.Query(\"\/servers\/getExternalIP\", {}, fCallback)\nend\n-- IGS.GetExternalIP(PRINT)\n\n-- –ù—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –º–∏–Ω–∏–º—É–º –æ–¥–∏–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä (name, version, state, ip, hostport)\nfunction IGS.UpdateServer(iServerID, tParams, fCallback)\n\ttParams.s = iServerID\n\tIGS.Query(\"\/servers\/update\", tParams, fCallback)\nend\n\nfunction IGS.UpdateCurrentServer(tParams, fCallback)\n\tIGS.UpdateServer(IGS.SERVERS:ID(), tParams, fCallback)\nend\n\n-- –ò–∑–º–µ–Ω–µ–Ω–∏–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–≥–æ –∏–º–µ–Ω–∏ —Å–µ—Ä–≤–µ—Ä–∞ –≤ –ø–∞–Ω–µ–ª–∏\nfunction IGS.SetServerName(sName, fCallback)\n\tIGS.UpdateCurrentServer({name = sName}, fCallback) -- –¥–æ 32 —Å–∏–º–≤–æ–ª–æ–≤\nend\n-- IGS.SetServerName(\"12345678901234567890123456789012\", PRINT)\n\n-- –ß–∏—Å—Ç–æ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–∞ –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏\nfunction IGS.SetServerVersion(iVersion, fCallback)\n\tIGS.UpdateCurrentServer({version = iVersion}, fCallback) -- –¥–æ 16777215\nend\n-- IGS.SetServerVersion(IGS.Version, PRINT)\n\nfunction IGS.UpdateServerAddress(iServerID, ip, port, fCallback)\n\tIGS.UpdateServer(iServerID, {ip = ip, hostport = port}, fCallback)\nend\n\n-- –ò–∑–º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞. 0 - –Ω–æ—Ä–º. 1 - –æ—Ç–∫–ª—é—á–µ–Ω. 2 - —Å–∫—Ä—ã—Ç\n-- function IGS.SetServerState(iState, fCallback)\n-- \tIGS.UpdateCurrentServer({state = iState}, fCallback)\n-- end\n-- IGS.SetServerState(0, PRINT)\n\n\n\n\n\n\n\n--[[\n>----------------------------<\n\t–ò–ù–í–ï–ù–¢–ê–†–¨\n\tlocal pl = player.GetBySteamID64(sid)\n\tIGS.LoadInventory(pl) -- –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç –¥–∞–Ω–Ω—ã–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è\n>----------------------------<\n]]\n-- ID –≤—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π –∑–∞–ø–∏—Å–∏\nfunction IGS.StoreInventoryItem(fCallback, s64, sUid)\n\tIGS.Query(\"\/inventory\/addItem\", {\n\t\tsid    = s64,\n\t\titem   = sUid,\n\t}, fCallback)\nend\n-- IGS.StoreInventoryItem(PRINT, sid, \"money_1mi\")\n\n-- array `ID`,`Item`\nfunction IGS.FetchInventory(fCallback, s64)\n\tIGS.Query(\"\/inventory\/get\", {\n\t\tsid = s64\n\t}, fCallback) -- —Ç–∞–±–ª–∏—Ü–∞\nend\n-- IGS.FetchInventory(PRINT, sid)\n\n-- bool deleted\nfunction IGS.DeleteInventoryItem(fCallback, iID)\n\tIGS.Query(\"\/inventory\/deleteItem\", {\n\t\tid = iID\n\t}, fCallback)\nend\n-- IGS.DeleteInventoryItem(PRINT, 22091)\n\n\n\n\n--[[\n>----------------------------<\n\t–ö–£–ü–û–ù–´\n>----------------------------<\n]]\n-- –í –∫–æ–ª–±—ç–∫–µ –∫–æ–¥ –∫—É–ø–æ–Ω–∞.\n-- iGiveMoney —É–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ –¥–æ–Ω–∞—Ç –í–ê–õ–Æ–¢–ï. –¢.–µ. –¥–ª—è —Å–æ–∑–¥–∞–Ω—è–∏ –∫—É–ø–æ–Ω–∞ –Ω–∞ 5 Alc, –Ω—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å IGS.CreateCoupon(5 ...\n-- iDaysTerm —ç—Ç–æ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –∫—É–ø–æ–Ω–∞ –≤ –¥–Ω—è—Ö. –°–ø—É—Å—Ç—è —Å—Ç–æ–ª—å–∫–æ –¥–Ω–µ–π –µ–≥–æ –Ω–µ–ª—å–∑—è –±—É–¥–µ—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å. –£–∫–∞–∂–∏—Ç–µ nil, —á—Ç–æ–±—ã –∫—É–ø–æ–Ω –±—ã–ª –≤–µ—á–Ω—ã–º\n-- –ò–º–µ–π—Ç–µ –≤ –≤–∏–¥—É, —á—Ç–æ –≤—Å–µ –∫—É–ø–æ–Ω—ã –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ. –ï—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ —Ä–∞–∑–¥–∞—Ç—å –º–Ω–æ–≥–∏–º –ª—é–¥—è–º –ø–æ X Alc - —Å–æ–∑–¥–∞–π—Ç–µ –º–Ω–æ–≥–æ –∫—É–ø–æ–Ω–æ–≤\nfunction IGS.CreateCoupon(iGiveMoney, iDaysTerm_, sNote_, fCallback)\n\tIGS.Query(\"\/coupons\/create\", {\n\t\tvalue = iGiveMoney, -- –¥–æ–Ω–∞—Ç –≤–∞–ª—é—Ç–∞\n\t\tterm  = iDaysTerm_, -- —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è\n\t\tnote  = sNote_      -- –¥–æ 50 —Å–∏–º–≤–æ–ª–æ–≤\n\t}, fCallback)\nend\n-- IGS.CreateCoupon(1, nil, nil, PRINT)\n\n-- –í –∫–∞–ª–ª–±—ç–∫–µ table –∫—É–ø–æ–Ω–∞ (Value, UsedBy, DateExpire(—Ç–∞–π–º—à—Ç–∞–º–ø))\n-- + bool –∏—Å—Ç–µ–∫—à–∏–π –ª–∏ + bool –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –ª–∏\nfunction IGS.GetCoupon(sCouponCode, fCallback)\n\tIGS.Query(\"\/coupons\/get\", {\n\t\tcoupon = sCouponCode,\n\t}, function(c)\n\t\tif (not c) then fCallback() return end\n\t\tc.DateExpire = c.DateExpire and tonumber(c.DateExpire)\n\n\t\t--    –∫—É–ø–æ–Ω             –∏—Å—Ç–µ–∫—à–∏–π –ª–∏                      –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –ª–∏\n\t\tfCallback(c, c.DateExpire and c.DateExpire < os.time() or false, c.UsedBy ~= nil)\n\tend)\nend\n-- IGS.GetCoupon(\"fe436044ee31a52205662275a7861220\", function(c, expired, used)\n-- \tPRINT({coup = c, expired = expired, used = used})\n-- end)\n\n-- –í –∫–∞–ª–ª–±—ç–∫–µ true, –µ—Å–ª–∏ –∫—É–ø–æ–Ω —É—Å–ø–µ—à–Ω–æ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω\n-- false, –µ—Å–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –¥–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω —Ä–∞–Ω–µ–µ\nfunction IGS.DeactivateCoupon(sActivatorSteamID, sCouponCode, fCallback)\n\tIGS.Query(\"\/coupons\/deactivate\", {\n\t\tcoupon        = sCouponCode,\n\t\tsid_activator = sActivatorSteamID,\n\t}, fCallback)\nend\n-- IGS.DeactivateCoupon(sid, \"c22b70d2c41578ad6d287e3a71d12eda\", PRINT) -- true\/false\n", "igs\/processor_sv.lua":"-- #FUSC# --\n\nlocal function giveLvlBonuses(pl, from_lvl, to_lvl)\n\tfor i = from_lvl,to_lvl do\n\t\tlocal lvl = IGS.LVL.Get(i)\n\n\t\tif lvl.bonus then\n\t\t\tlvl.bonus(pl)\n\t\tend\n\n\t\tIGS.NotifyAll(pl:Name() .. \" –ø–æ–ª—É—á–∏–ª –Ω–æ–≤—ã–π (\" .. i .. \") –±–∏–∑–Ω–µ—Å —É—Ä–æ–≤–µ–Ω—å - \" .. lvl:Name())\n\tend\nend\n\nlocal function recalcTransactionsAndBonuses(pl, bGiveBonuses)\n\t-- –°—É–º–º–∞ –æ–ø–µ—Ä–∞—Ü–∏–π\n\tIGS.GetPlayerTransactionsBypassingLimit(function(dat)\n\t\tlocal tt = 0\n\t\tfor _,v in ipairs(dat) do\n\t\t\ttt = v.Sum > 0 and tt + v.Sum or tt\n\t\tend\n\n\t\tlocal prev_lvl = IGS.PlayerLVL(pl) or 0 -- –Ω–µ –¥–≤–∏–≥–∞—Ç—å –ø–æ–¥ igs_lvl!\n\t\tpl:SetIGSVar(\"igs_lvl\",IGS.LVL.GetByCost( tt ):LVL())\n\t\tpl:SetIGSVar(\"igs_total_transactions\",tt)\n\n\t\tif bGiveBonuses and IGS.PlayerLVL(pl) > prev_lvl then\n\t\t\tgiveLvlBonuses(pl, prev_lvl + 1, IGS.PlayerLVL(pl))\n\t\tend\n\tend, pl:SteamID64())\nend\n\n\n-- –£–∫–∞–∑–∞—Ç—å bGiveBonuses, –µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å –±–æ–Ω—É—Å—ã\nlocal function updateBalance(pl, fOnFinish, bGiveBonuses)\n\tIGS.GetPlayer(pl:SteamID64(),function(pld_)\n\t\tif not IsValid(pl) then return end\n\t\tlocal now_igs_ = pld_ and pld_.Balance\n\t\tlocal now_score_ = pld_ and pld_.Score\n\n\t\tlocal was_igs = pl:IGSFunds()\n\t\tlocal diff = (now_igs_ or 0) - was_igs\n\n\t\tif diff ~= 0 then -- –±–∞–ª–∞–Ω—Å ~= nil –∏ –Ω–µ 0 (? https:\/\/t.me\/c\/1353676159\/45001)\n\t\t\tpl:SetIGSVar(\"igs_balance\", now_igs_) -- –ù–ï –î–û–õ–ñ–ù–û –í–´–ü–û–õ–ù–Ø–¢–¨–°–Ø –ù–ê –ù–ï_–ö–õ–ò–ï–ù–¢–û–í\n\t\t\tpl.igs_score = now_score_ -- #todo make netvar\n\t\tend\n\n\t\tif now_igs_ then -- –∑–Ω–∞—á–∏—Ç –µ—Å—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏\n\t\t\trecalcTransactionsAndBonuses(pl, bGiveBonuses)\n\t\tend\n\n\t\tif fOnFinish then\n\t\t\tfOnFinish(now_igs_, diff)\n\t\tend\n\tend)\nend\n\n\nhook.Add(\"PlayerInitialSpawn\", \"IGS.LoadPlayer\", function(pl)\n\tif pl:IsBot() then return end\n\n\t-- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –±–∞–ª–∞–Ω—Å –¥–æ–Ω–∞—Ç —Å—á–µ—Ç–∞ –∏ –¥–æ–Ω–∞—Ç —É—Ä–æ–≤–µ–Ω—å –∏–≥—Ä–æ–∫–∞\n\tupdateBalance(pl, function(now_igs_)\n\t\tif (not IsValid(pl)) then return end\n\n\t\tIGS.LoadPlayerPurchases(pl)\n\t\tIGS.LoadInventory(pl)\n\n\t\tif now_igs_ and now_igs_ > 0 then\n\t\t\tIGS.UpdatePlayerName(pl:SteamID64(), pl:Name())\n\t\tend\n\tend)\nend)\n\nlocal function repairBrokenPurchases(pl,purchases)\n\tfor uid in pairs(purchases) do -- , count\n\t\tlocal ITEM = IGS.GetItemByUID(uid)\n\n\t\tif ITEM:IsValid(pl) == false then\n\t\t\tITEM:Setup(pl) -- –Ω–µ –ø–µ—Ä–≤—ã–π —Ä–∞–∑, —Å–∫–∏–ø–∞–µ–º onactivate\n\t\tend\n\tend\nend\n\n-- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ª–µ—Ç–µ–≤—à–∏—Ö –ø—Ä–∞–≤\nhook.Add(\"IGS.PlayerPurchasesLoaded\", \"RestorePex\", function(pl,purchases)\n\tif purchases then\n\t\trepairBrokenPurchases(pl, purchases)\n\tend\nend)\n\n\n-- –û—Ç–ª–∞–¥–∫–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –±–æ–Ω—É—Å–æ–≤ –∑–∞ –ª–≤–ª:\n-- https:\/\/gist.github.com\/1b41e1f869752d4750440619339e4085\nhook.Add(\"IGS.PaymentStatusUpdated\",\"NoRejoiningCharge\",function(pl,dat)\n\tif dat.method ~= \"pay\" then return end\n\n\t--timer.Simple(1,function() -- –¥–∞–µ–º —É—Å–ø–µ—Ç—å –≤ –ë–î –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ\n\n\t\tupdateBalance(pl,function(new_bal, diff)\n\t\t\thook.Run(\"IGS.PlayerDonate\", pl, diff, new_bal)\n\t\tend, true) -- updateBalance with bGiveBonuses\n\n\t--end) -- timer 1\nend)\n", "igs\/interface\/windows\/deposit_funds.lua":"local function niceSum(i, iFallback)\n\treturn math.Truncate(tonumber(i) or iFallback, 2)\nend\n\nlocal m\nfunction IGS.WIN.Deposit(iRealSum)\n\tif IsValid(m) then return end -- –Ω–µ –¥–∞–µ–º –æ—Ç–∫—Ä—ã—Ç—å 2 —Ñ—Ä–µ–π–º–∞\n\tiRealSum = tonumber(iRealSum)\n\n\tsurface.PlaySound(\"ambient\/weather\/rain_drip1.wav\")\n\thook.Run(\"IGS.OnDepositWinOpen\",iRealSum)\n\n\tlocal realSum = math.max(IGS.GetMinCharge(), niceSum(iRealSum, 0))\n\n\tm = uigs.Create(\"igs_frame\", function(self)\n\t\tself:SetSize(450,400)\n\t\tself:RememberLocation(\"igs_deposit\")\n\n\t\t-- –í—ã, –∫–æ–Ω–µ—á–Ω–æ, –º–æ–∂–µ—Ç–µ —É–¥–∞–ª–∏—Ç—å –Ω–∞—à –∫–æ–ø–∏—Ä–∞–π—Ç. –ß—Ç–æ–±—ã –≤—ã –Ω–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä—è–≥–ª–∏—Å—å, —è –¥–∞–∂–µ –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª —á—É—Ç—å –Ω–∏–∂–µ —Å—Ç—Ä–æ—á–∫—É –¥–ª—è —ç—Ç–æ–≥–æ\n\t\t-- –ù–æ –ø—Ä–µ–∂–¥–µ, —á–µ–º —Ç—ã —ç—Ç–æ —Å–¥–µ–ª–∞–µ—à—å, –æ—Ç–≤–µ—Ç—å —Å–µ–±–µ –Ω–∞ –≤–æ–ø—Ä–æ—Å. –ó–∞—á–µ–º? –¢–∞–∫ –º–µ—à–∞–µ—Ç?\n\t\tself:SetTitle(\"–ê–≤—Ç–æ–¥–æ–Ω–∞—Ç –æ—Ç gm-donate.net\")\n\t\t-- self:SetTitle(\"–í–ª–∞–¥–µ–ª–µ—Ü —ç—Ç–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–µ —Ü–µ–Ω–∏—Ç —á—É–∂–æ–π —Ç—Ä—É–¥\")\n\n\t\tself:MakePopup()\n\t\t-- self:Focus()\n\t\t-- self:SetBackgroundBlur(false)\n\n\t\t--[[-------------------------------------\n\t\t\t–õ–µ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞. –†–µ–∞–ª—å–Ω–∞—è –≤–∞–ª—é—Ç–∞\n\t\t---------------------------------------]]\n\t\tuigs.Create(\"DLabel\", function(real)\n\t\t\treal:SetSize(450, 25)\n\t\t\treal:SetPos(0, self:GetTitleHeight())\n\t\t\treal:SetText(\"–í–≤–µ–¥–∏—Ç–µ –Ω–∏–∂–µ —Å—É–º–º—É –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è —Å—á–µ—Ç–∞\")\n\t\t\treal:SetFont(\"igs.22\")\n\t\t\treal:SetTextColor(IGS.col.HIGHLIGHTING)\n\t\t\treal:SetContentAlignment(2)\n\t\tend, self)\n\n\t\tself.real_m = uigs.Create(\"DTextEntry\", self)\n\t\tself.real_m:SetPos(10,50)\n\t\tself.real_m:SetSize(450 - 10 - 10, 30)\n\t\tself.real_m:SetNumeric(true)\n\t\tself.real_m.Think = function(s)\n\t\t\tlocal sum = tonumber(s:GetValue())\n\t\t\tself.purchase:SetText(\"–ü–æ–ø–æ–ª–Ω–∏—Ç—å —Å—á–µ—Ç –Ω–∞ \" .. niceSum(sum, 0) .. \" —Ä—É–±\")\n\t\t\tself.purchase:SetActive(sum and sum > 0)\n\t\tend\n\t\tself.real_m:SetValue( realSum )\n\t\tself.real_m:OnChange()\n\n\t\tself.purchase = uigs.Create(\"igs_button\", function(p)\n\t\t\tlocal _,ry = self.real_m:GetPos()\n\n\t\t\tp:SetSize(400,40)\n\t\t\tp:SetActive(true) -- –≤—ã–¥–µ–ª—è–µ—Ç —Å–∏–Ω–∏–º\n\t\t\tp:SetPos((self:GetWide() - p:GetWide()) \/ 2,ry + self.real_m:GetTall() + 10)\n\n\t\t\tp.DoClick = function()\n\t\t\t\tlocal want_money = niceSum(self.real_m:GetValue())\n\t\t\t\tif not want_money then\n\t\t\t\t\tself.log:AddRecord(\"–£–∫–∞–∑–∞–Ω–∞ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Å—É–º–º–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è\", false)\n\t\t\t\t\treturn\n\n\t\t\t\telseif want_money < realSum then\n\t\t\t\t\tself.log:AddRecord(\"–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è \" .. PL_MONEY(realSum), false)\n\t\t\t\t\treturn\n\t\t\t\tend\n\n\t\t\t\tself.log:AddRecord(\"–ó–∞–ø—Ä–æ—Å —Ü–∏—Ñ—Ä–æ–≤–æ–π –ø–æ–¥–ø–∏—Å–∏ –∑–∞–ø—Ä–æ—Å–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞...\")\n\n\t\t\t\tIGS.GetPaymentURL(want_money,function(url)\n\t\t\t\t\tIGS.OpenURL(url,\"–ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è —Å—á–µ—Ç–∞\")\n\t\t\t\t\tif not IsValid(self) then return end\n\t\t\t\t\tself.log:AddRecord(\"–ü–æ–¥–ø–∏—Å—å –ø–æ–ª—É—á–µ–Ω–∞. –Ω–∞—á–∏–Ω–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å –æ–ø–ª–∞—Ç—ã\")\n\n\t\t\t\t\ttimer.Simple(.7,function()\n\t\t\t\t\t\tself.log:AddRecord(\"–°—á–µ—Ç –ø–æ–ø–æ–ª–Ω–∏—Ç—Å—è –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–æ –∏–ª–∏ –ø–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞—Ö–æ–¥–∞\")\n\t\t\t\t\tend)\n\t\t\t\tend)\n\t\t\tend\n\t\tend, self)\n\n\n\n\t\t--[[-------------------------------------------------------------------------\n\t\t\t–í—Å–µ –ø–æ–¥—Ä—è–¥\n\t\t---------------------------------------------------------------------------]]\n\t\tself.log = uigs.Create(\"igs_scroll\", function(log)\n\t\t\tlog:SetSize(250,200)\n\t\t\tlog:SetPos(10,self:GetTall() - log:GetTall() - 10)\n\t\t\t-- https:\/\/img.qweqwe.ovh\/1487171563683.png\n\t\t\tfunction log:AddRecord(text,pay)\n\t\t\t\tlocal col =\n\t\t\t\t\t(pay == true  and IGS.col.LOG_SUCCESS) or\n\t\t\t\t\t(pay == false and IGS.col.LOG_ERROR)   or IGS.col.LOG_NORMAL\n\n\t\t\t\t-- –ü–ª–∞—Ç–µ–∂ –∏–ª–∏ –û—à–∏–±–∫–∞\n\t\t\t\tif pay or pay == false then\n\t\t\t\t\tself:GetParent():RequestFocus()\n\t\t\t\t\tself:GetParent():MakePopup()\n\t\t\t\tend\n\n\t\t\t\treturn log:AddItem( uigs.Create(\"Panel\", function(bg)\n\t\t\t\t\ttext = \"> \" .. os.date(\"%H:%M:%S\",os.time()) .. \"\\n\" .. text\n\n\t\t\t\t\tlocal y = 2\n\t\t\t\t\tfor i,line in ipairs(string.Wrap(\"igs.18\",text,log:GetWide() - 0 - 0)) do\n\t\t\t\t\t\tuigs.Create(\"DLabel\", function(l)\n\t\t\t\t\t\t\tl:SetPos(0,y)\n\t\t\t\t\t\t\tl:SetText(line)\n\t\t\t\t\t\t\tl:SetFont(\"igs.18\")\n\t\t\t\t\t\t\tl:SizeToContents()\n\t\t\t\t\t\t\tl:SetTextColor(i == 1 and IGS.col.HIGHLIGHTING or col)\n\t\t\t\t\t\t\t--               \/\\ –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–æ–π –∏–¥–µ—Ç –¥–∞—Ç–∞ (\\n)\n\n\t\t\t\t\t\t\ty = y + l:GetTall()\n\t\t\t\t\t\tend, bg)\n\t\t\t\t\tend\n\n\t\t\t\t\tbg:SetTall(y + 2)\n\t\t\t\t\tlog:ScrollTo(log:GetCanvas():GetTall())\n\t\t\t\tend, log) )\n\t\t\tend\n\t\tend, self)\n\n\t\tlocal log_t = uigs.Create(\"DLabel\", function(log_title)\n\t\t\tlocal log_x,log_y = self.log:GetPos()\n\n\t\t\tlog_title:SetSize(self.log:GetWide(),22)\n\t\t\tlog_title:SetPos(log_x,log_y - log_title:GetTall())\n\t\t\tlog_title:SetText(\"–õ–æ–≥ –æ–ø–µ—Ä–∞—Ü–∏–π\")\n\t\t\tlog_title:SetTextColor(IGS.col.HIGHLIGHTING)\n\t\t\tlog_title:SetFont(\"igs.22\")\n\t\t\tlog_title:SetContentAlignment(1)\n\t\tend, self)\n\n\t\t-- –õ–∏–Ω–∏—è –Ω–∞–¥ –ª–æ–≥–æ–º –∏ –∫–Ω–æ–ø–∫–æ–π\n\t\tlocal _,log_t_y = log_t:GetPos()\n\t\tuigs.Create(\"DPanel\", function(line)\n\t\t\tline:SetPos(10, log_t_y - 2 - 10)\n\t\t\tline:SetSize(self:GetWide() - line:GetPos() * 2, 2)\n\t\t\tline.Paint = function(s, w, h)\n\t\t\t\tdraw.RoundedBox(0,0,0,w,h,IGS.col.SOFT_LINE)\n\t\t\tend\n\t\tend, self)\n\n\n\t\tuigs.Create(\"igs_button\", function(btn)\n\t\t\tlocal _,log_y = self.log:GetPos()\n\n\t\t\tbtn:SetSize(170, 30)\n\t\t\tbtn:SetPos(self:GetWide() - 10 - btn:GetWide(),log_y - 20)\n\t\t\tbtn:SetText(\"–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫—É–ø–æ–Ω\")\n\t\t\tbtn.DoClick = function()\n\t\t\t\tIGS.WIN.ActivateCoupon()\n\t\t\tend\n\t\tend, self)\n\n\n\t\t-- uigs.Create(\"DLabel\", function(btns_title)\n\t\t-- \tlocal coup_x,coup_y = coupon:GetPos()\n\n\t\t-- \tbtns_title:SetSize(coupon:GetWide(),30)\n\t\t-- \tbtns_title:SetPos(coup_x,coup_y + coupon:GetTall() + 0)\n\t\t-- \tbtns_title:SetText(\"–í—Å–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–æ\")\n\t\t-- \tbtns_title:SetTextColor(IGS.col.TEXT_HARD)\n\t\t-- \tbtns_title:SetFont(\"igs.18\")\n\t\t-- \t-- btns_title:SetContentAlignment(3)\n\t\t-- end, self)\n\n\t\tlocal function log(delay,text,status)\n\t\t\ttimer.Simple(delay,function()\n\t\t\t\tif not IsValid(self.log) then return end\n\t\t\t\tself.log:AddRecord(text, status)\n\t\t\tend)\n\t\tend\n\n\t\tlog(0,\"–û—Ç–∫—Ä—ã—Ç –¥–∏–∞–ª–æ–≥ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è —Å—á–µ—Ç–∞\",nil)\n\t\tlog(math.random(3),\"–°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ!\",true) -- –ø—É—Å—Ç—ã—à–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –¥–æ–±–∞–≤–ª—è–µ—Ç —á—É–≤—Å—Ç–≤–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—Ç–∏ —Å–¥–µ–ª–∫–µ\n\t\tlog(math.random(20,40),\"–î–µ–Ω—å–≥–∏ –±—É–¥—É—Ç –∑–∞—á–∏—Å–ª–µ–Ω—ã –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏\",nil)\n\tend)\n\n\treturn m\nend\n\n\nhook.Add(\"IGS.PaymentStatusUpdated\",\"UpdatePaymentStatus\",function(dat)\n\tlocal text =\n\t\tdat.method == \"check\" and (\"–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–ª–∞—Ç–µ–∂–∞ —á–µ—Ä–µ–∑ \" .. dat.paymentType) or\n\t\tdat.method == \"pay\"   and (\"–ù–∞—á–∏—Å–ª–µ–Ω–æ \" .. PL_MONEY(dat.orderSum)) or\n\t\tdat.method == \"error\" and (\"–û—à–∏–±–∫–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è —Å—á–µ—Ç–∞: \" .. dat.errorMessage) or\n\t\t\"–° —Å–µ—Ä–≤–µ—Ä–∞ –ø—Ä–∏—à–µ–ª –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –º–µ—Ç–æ–¥ \" .. tostring(dat.method) .. \" –∏ –≤–æ–∑–Ω–∏–∫–ª–∞ –æ—à–∏–±–∫–∞\"\n\n\tif not IsValid(m) then\n\t\tIGS.ShowNotify(text,\"–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞\")\n\t\treturn\n\tend\n\n\tlocal pay = nil\n\tif dat.method == \"pay\" then\n\t\tpay = true\n\telseif dat.method == \"error\" then\n\t\tpay = false\n\tend\n\n\tm.log:AddRecord(text,pay)\nend)\n\n\n\n-- if IsValid(IGS_CHARGE) then\n-- \tIGS_CHARGE:Remove()\n-- end\n\n-- IGS_CHARGE = IGS.WIN.Deposit()\n-- local p = IGS_CHARGE\n-- -- timer.Simple(1,function()\n-- -- \tp.log:AddRecord(\"Kek lol heh mda\", false)\n-- -- end)\n\n-- timer.Simple(600,function()\n-- \tif IsValid(p) then\n-- \t\tp:Remove()\n-- \t\tp = nil\n-- \tend\n-- end)\n", "igs\/dependencies\/dash\/nw.lua":"-- Thanks to SuperiorServers.co\n\nIGS.nw = {}\n\nlocal vars     = {}\nlocal mappings = {}\nlocal data     = {\n\t[0] = {}\n}\nlocal globals   = data[0]\nlocal callbacks = {}\n\nlocal NETVAR   = {}\nNETVAR.__index = NETVAR\n\nMT_IGSNetVar = NETVAR\n\nlocal bitmap = {\n\t[3]\t  = 3,\n\t[7]   = 4,\n\t[15]  = 5,\n\t[31]  = 6,\n\t[63]  = 7,\n\t[127] = 8\n}\n\nlocal bitcount = 2\n\nlocal ENTITY = FindMetaTable 'Entity'\n\nlocal pairs  = pairs\nlocal Entity = Entity\n\nlocal net_WriteUInt = net.WriteUInt\nlocal net_ReadUInt  = net.ReadUInt\nlocal net_Start     = net.Start\nlocal net_Send      = SERVER and net.Send or net.SendToServer\nlocal net_Broadcast = net.Broadcast\nlocal sorted_pairs  = SortedPairsByMemberValue\n\nfunction IGS.nw.Register(var) -- You must always call this on both the client and server. It will serioulsy break shit if you don't.\n\tlocal t = {\n\t\tName = var,\n\t\tNetworkString = 'IGS.nw_' .. var,\n\t\tWriteFunc = net.WriteType,\n\t\tReadFunc = net.ReadType,\n\t\tSendFunc = function(self, ent, value, recipients)\n\t\t\tif (recipients ~= nil) then\n\t\t\t\tnet_Send(recipients)\n\t\t\telse\n\t\t\t\tnet_Broadcast()\n\t\t\tend\n\t\tend,\n\t}\n\tsetmetatable(t, NETVAR)\n\tvars[var] = t\n\n\tif (SERVER) then\n\t\tutil.AddNetworkString(t.NetworkString)\n\telse\n\t\tnet.Receive(t.NetworkString, function()\n\t\t\tlocal index, value = t:_Read()\n\n\t\t\tif (not data[index]) then\n\t\t\t\tdata[index] = {}\n\t\t\tend\n\n\t\t\tdata[index][var] = value\n\n\t\t\tt:_CallHook(index, value)\n\t\tend)\n\tend\n\n\treturn t:_Construct()\nend\n\nfunction NETVAR:Write(func, opt)\n\tself.WriteFunc = function(value)\n\t\tfunc(value, opt)\n\tend\n\treturn self:_Construct()\nend\n\nfunction NETVAR:Read(func, opt)\n\tself.ReadFunc = function()\n\t\treturn func(opt)\n\tend\n\treturn self:_Construct()\nend\n\nfunction NETVAR:Filter(func)\n\tself.SendFunc = function(_, ent, value, recipients)\n\t\tnet_Send(recipients or func(ent, value))\n\tend\n\treturn self:_Construct()\nend\n\nfunction NETVAR:SetPlayer()\n\tself.PlayerVar = true\n\treturn self:_Construct()\nend\n\nfunction NETVAR:SetLocalPlayer()\n\tself.LocalPlayerVar = true\n\treturn self:_Construct()\nend\n\nfunction NETVAR:SetGlobal()\n\tself.GlobalVar = true\n\treturn self:_Construct()\nend\n\nfunction NETVAR:SetNoSync()\n\tself.NoSync = true\n\treturn self:_Construct()\nend\n\nfunction NETVAR:SetHook(name)\n\tself.Hook = name\n\treturn self\nend\n\nfunction NETVAR:_Send(ent, value, recipients)\n\tnet_Start(self.NetworkString)\n\t\tself:_Write(ent, value)\n\tself:SendFunc(ent, value, recipients)\nend\n\nfunction NETVAR:_CallHook(index, value)\n\tif self.Hook then\n\t\tif (index ~= 0) then -- not global\n\t\t\thook.Call(self.Hook, GAMEMODE, Entity(index), value)\n\t\telse\n\t\t\thook.Call(self.Hook, GAMEMODE, value)\n\t\tend\n\tend\nend\n\nfunction NETVAR:_Construct()\n\tlocal WriteFunc = self.WriteFunc\n\tlocal ReadFunc \t= self.ReadFunc\n\n\tif self.PlayerVar then\n\t\tself._Write = function(_, ent, value)\n\t\t\tnet_WriteUInt(ent:EntIndex(), 7)\n\t\t\tWriteFunc(value)\n\t\tend\n\t\tself._Read = function(_)\n\t\t\treturn net_ReadUInt(7), ReadFunc()\n\t\tend\n\telseif self.LocalPlayerVar then\n\t\tself._Write = function(_, ent, value)\n\t\t\tWriteFunc(value)\n\t\tend\n\t\tself._Read = function(_)\n\t\t\treturn LocalPlayer():EntIndex(), ReadFunc()\n\t\tend\n\t\tself.SendFunc = function(_, ent, value, recipients)\n\t\t\tnet_Send(ent)\n\t\tend\n\telseif self.GlobalVar then\n\t\tself._Write = function(_, ent, value)\n\t\t\tWriteFunc(value)\n\t\tend\n\t\tself._Read = function(_)\n\t\t\treturn 0, ReadFunc()\n\t\tend\n\telse\n\t\tself._Write = function(_, ent, value)\n\t\t\tnet_WriteUInt(ent:EntIndex(), 12)\n\t\t\tWriteFunc(value)\n\t\tend\n\t\tself._Read = function(_)\n\t\t\treturn net_ReadUInt(12), ReadFunc()\n\t\tend\n\tend\n\n\tmappings = {}\n\tfor k, v in sorted_pairs(vars, 'Name', false) do\n\t\tlocal c = #mappings + 1\n\t\tvars[k].ID = c\n\t\tmappings[c] = v\n\t\tif bitmap[c] then\n\t\t\tbitcount = bitmap[c]\n\t\tend\n\tend\n\n\treturn self\nend\n\nfunction IGS.nw.GetGlobal(var)\n\treturn globals[var]\nend\n\nfunction ENTITY:GetIGSVar(var)\n\tlocal index = self:EntIndex()\n\treturn data[index] and data[index][var]\nend\n\nif (SERVER) then\n\tutil.AddNetworkString 'IGS.nw.PlayerSync'\n\tutil.AddNetworkString 'IGS.nw.NilEntityVar'\n\tutil.AddNetworkString 'IGS.nw.NilPlayerVar'\n\tutil.AddNetworkString 'IGS.nw.EntityRemoved'\n\tutil.AddNetworkString 'IGS.nw.PlayerRemoved'\n\n\tnet.Receive('IGS.nw.PlayerSync', function(len, pl)\n\t\tif (pl.IGSEntityCreated ~= true) then\n\t\t\thook.Call('PlayerEntityCreated', GAMEMODE, pl)\n\n\t\t\tpl.IGSEntityCreated = true\n\n\t\t\tfor index, _vars in pairs(data) do\n\t\t\t\tfor var, value in pairs(_vars) do\n\t\t\t\t\tlocal ent = Entity(index)\n\t\t\t\t\tif (not vars[var].LocalPlayerVar and not vars[var].NoSync) or (ent == pl) then\n\t\t\t\t\t\tvars[var]:_Send(ent, value, pl)\n\t\t\t\t\tend\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tif (callbacks[pl] ~= nil) then\n\t\t\t\tfor i = 1, #callbacks[pl] do\n\t\t\t\t\tcallbacks[pl][i](pl)\n\t\t\t\tend\n\t\t\tend\n\t\t\tcallbacks[pl] = nil\n\t\tend\n\tend)\n\n\thook.Add('EntityRemoved', 'IGS.nw.EntityRemoved', function(ent)\n\t\tlocal index = ent:EntIndex()\n\t\tif (index ~= 0) and (data[index] ~= nil) then -- For some reason this kept getting called on Entity(0), not sure why...\n\t\t\tif ent:IsPlayer() then\n\t\t\t\tnet_Start('IGS.nw.PlayerRemoved')\n\t\t\t\t\tnet_WriteUInt(index, 7)\n\t\t\t\tnet_Broadcast()\n\t\t\telse\n\t\t\t\tnet_Start('IGS.nw.EntityRemoved')\n\t\t\t\t\tnet_WriteUInt(index, 12)\n\t\t\t\tnet_Broadcast()\n\t\t\tend\n\n\t\t\tdata[index] = nil\n\t\tend\n\tend)\n\n\tfunction IGS.nw.WaitForPlayer(pl, cback)\n\t\tif (pl.IGSEntityCreated == true) then\n\t\t\tcback(pl)\n\t\telse\n\t\t\tif (callbacks[pl] == nil) then\n\t\t\t\tcallbacks[pl] = {}\n\t\t\tend\n\t\t\tcallbacks[pl][#callbacks[pl] + 1] = cback\n\t\tend\n\tend\n\n\tfunction IGS.nw.SetGlobal(var, value)\n\t\tglobals[var] = value\n\t\tif (value ~= nil) then\n\t\t\tvars[var]:_Send(0, value)\n\t\telse\n\t\t\tnet_Start('IGS.nw.NilEntityVar')\n\t\t\t\tnet_WriteUInt(0, 12)\n\t\t\t\tnet_WriteUInt(vars[var].ID, bitcount)\n\t\t\tvars[var]:SendFunc(0, value)\n\t\tend\n\tend\n\n\tfunction ENTITY:SetIGSVar(var, value)\n\t\tlocal index = self:EntIndex()\n\n\t\tif (not data[index]) then\n\t\t\tdata[index] = {}\n\t\tend\n\n\t\tdata[index][var] = value\n\n\t\tif (value ~= nil) then\n\t\t\tvars[var]:_Send(self, value)\n\t\telse\n\t\t\tif self:IsPlayer() then\n\t\t\t\tnet_Start('IGS.nw.NilPlayerVar')\n\t\t\t\tnet_WriteUInt(index, 7)\n\t\t\telse\n\t\t\t\tnet_Start('IGS.nw.NilEntityVar')\n\t\t\t\tnet_WriteUInt(index, 12)\n\t\t\tend\n\t\t\t\tnet_WriteUInt(vars[var].ID, bitcount)\n\t\t\tvars[var]:SendFunc(self, value)\n\t\tend\n\tend\nelse\n\thook.Add('InitPostEntity', 'IGS.nw.InitPostEntity', function()\n\t\tnet_Start('IGS.nw.PlayerSync')\n\t\tnet_Send()\n\tend)\n\n\tnet.Receive('IGS.nw.NilEntityVar', function()\n\t\tlocal index, id = net_ReadUInt(12), net_ReadUInt(bitcount)\n\t\tif data[index] and mappings[id] then\n\t\t\tdata[index][mappings[id].Name] = nil\n\t\tend\n\tend)\n\n\tnet.Receive('IGS.nw.NilPlayerVar', function()\n\t\tlocal index, id = net_ReadUInt(7), net_ReadUInt(bitcount)\n\t\tif data[index] and mappings[id] then\n\t\t\tdata[index][mappings[id].Name] = nil\n\t\tend\n\tend)\n\n\tnet.Receive('IGS.nw.EntityRemoved', function()\n\t\tdata[net_ReadUInt(12)] = nil\n\tend)\n\n\tnet.Receive('IGS.nw.PlayerRemoved', function()\n\t\tdata[net_ReadUInt(7)] = nil\n\tend)\nend\n", "igs\/interface\/vgui\/igs_multipanel.lua":"--[[-------------------------------------------------------------------------\n–ü–∞–Ω–µ–ª—å, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–π –º–æ–∂–Ω–æ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥—Ä—É–≥–∏—Ö –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –Ω–∏–º–∏\n–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ igs_tabbar –∏ –º–æ–∂–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏\n\n–û–±—Ä–∞—â–∞–µ–º –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ pnl:OnOpen()\n---------------------------------------------------------------------------]]\n\nlocal PANEL = {}\n\nfunction PANEL:Init()\n\tself.Panels = {}\nend\n\nfunction PANEL:AddPanel(panel,bActive)\n\tpanel:SetSize(self:GetWide(),self:GetTall())\n\tpanel:SetVisible(false)\n\tpanel:SetParent(self)\n\t-- panel.Paint = function(s,w,h) end -- –ê–•–¢–£–ù–ì. –£–∂–µ –¥–≤–∞–∂–¥—ã –Ω–∞ –≥—Ä–∞–±–ª–∏ –≤—Å—Ç–∞–ª\n\t-- –ù–µ –ø–æ–Ω–∏–º–∞–ª, –ø–æ—á–µ–º—É –Ω–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –ø–∞–Ω–µ–ª—å. –ü–æ—Ç–æ–º –¥–æ—à–ª–æ, —á—Ç–æ —ç—Ç–æ—Ç —Ö—É–∫ –µ–µ –ø—Ä–æ—Å—Ç–æ –ø—Ä—è—á–µ—Ç\n\n\tpanel.ID = table.insert(self.Panels,panel)\n\n\tif (bActive) then\n\t\tself:SetActivePanel(panel.ID)\n\tend\n\n\treturn panel.ID\nend\n\nfunction PANEL:SetActivePanel(iID)\n\tfor i,pnl in ipairs(self.Panels) do\n\t\tpnl.Active = iID == i\n\n\t\tif (pnl:IsVisible()) then\n\t\t\tpnl:Dock(NODOCK)\n\t\t\tpnl:SetVisible(false)\n\t\tend\n\n\t\tif (iID == i) then\n\t\t\tpnl:SetVisible(true)\n\t\t\tpnl:DockMargin(0, 0, 0, 0)\n\t\t\tpnl:Dock(FILL)\n\n\t\t\tif pnl.OnOpen then\n\t\t\t\tpnl:OnOpen()\n\t\t\tend\n\t\tend\n\tend\nend\n\nfunction PANEL:GetActivePanel()\n\tfor i,pnl in ipairs(self.Panels) do\n\t\tif pnl.Active then\n\t\t\treturn pnl\n\t\tend\n\tend\nend\n\nvgui.Register(\"igs_multipanel\", PANEL, \"Panel\")\n-- IGS.UI()\n", "igs\/launcher.lua":"IGS.C = IGS.C or {} -- config\n\nlocal function sh(path) return IGS.sh(\"igs\/\" .. path) end\nlocal function sv(path) return IGS.sv(\"igs\/\" .. path) end\nlocal function cl(path) return IGS.cl(\"igs\/\" .. path) end\n\nlocal function dir(path, fIncluder) return IGS.include_files(\"igs\/\" .. path, fIncluder) end\nlocal function mods(path) return IGS.load_modules(\"igs\/\" .. path) end\n\n\nsh(\"dependencies\/plurals.lua\")\nsh(\"dependencies\/chatprint.lua\")\nsv(\"dependencies\/stack.lua\")\nsh(\"dependencies\/scc.lua\")\nsv(\"dependencies\/resources.lua\") -- –∏–∫–æ–Ω–∫–∏, –º–æ–¥–µ–ª—å–∫–∞ –¥—Ä–æ–ø–Ω—É—Ç–æ–≥–æ –∏—Ç–µ–º–∞\nsh(\"dependencies\/bib.lua\")\nsh(\"dependencies\/permasents.lua\")\ncl(\"dependencies\/matex.lua\")\n\n-- #todo —Å–¥–µ–ª–∞—Ç—å —á–µ—Ä–µ–∑ require\n-- lua\/includes\/modules –æ—Ç—Å—é–¥–∞\n-- —É–±–µ—Ä–µ—Ç –∫–æ—Å—Ç—ã–ª—å –≤–Ω—É—Ç—Ä–∏ kupol\n-- +–ø—Ä–∏ —Ñ–µ—Ç—á–µ –æ–≤–µ—Ä—Ä–∞–π–¥ require\nsh(\"dependencies\/lolib.lua\") -- –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–µ—Ä–µ–¥ kupol\n-- sh(\"dependencies\/kupol.lua\") -- —Ä–µ—à–∏–ª –ø–æ—Å—Ç–∞–≤–ª—è—Ç—å —Å –º–æ–¥—É–ª–µ–º\n\n-- –ê–Ω—Ç–∏–∫–æ–Ω—Ñ–ª–∏–∫—Ç —Å https:\/\/trello.com\/c\/3ti6xIjW\/\nsh(\"dependencies\/dash\/nw.lua\")\n\n-- if not dash then\nsh(\"dependencies\/dash\/misc.lua\")\n\nsh(\"settings\/config_sh.lua\")\nsv(\"settings\/config_sv.lua\") -- –¥–ª—è —Ñ–µ—Ç—á–∞ project key (–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∏)\n\n-- –ú–µ—Ç–∞–æ–±—ä–µ–∫—Ç—ã\nsh(\"objects\/level.lua\")\nsh(\"objects\/shop_group.lua\")\nsh(\"objects\/shop_item.lua\")\n\nsh(\"network\/nw_sh.lua\") -- –¥–ª—è igs_servers –≤ serv_sv.lua\n\nsv(\"core_sv.lua\") -- –¥–ª—è —Ñ–µ—Ç—á–∞ –ø–æ–¥–ø–∏—Å–∏\n\nsv(\"repeater.lua\")\nsv(\"apinator.lua\")\n\n-- –ü–æ—Å–ª–µ –¥–∞—Ç–∞–ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞, —Ö–æ—Ç—è —Å—Ä–∞–±–æ—Ç–∞—é—Ç –≤—Å–µ —Ä–∞–≤–Ω–æ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ –≤—Ö–æ–¥–∞ –∏–≥—Ä–æ–∫–∞\nsh(\"servers\/serv_sh.lua\")\nsv(\"servers\/serv_sv.lua\")\n\n\n\n--[[-------------------------------------------------------------------------\n\t–í—Ç–æ—Ä–æ–π \"—ç—Ç–∞–ø\" (–¥–ª—è —Ä–∞–±–æ—Ç—ã —Ç—Ä–µ–±–æ–≤–∞–ª –∑–∞–≥—Ä—É–∑–∫—É —Å–µ—Ä–≤–µ—Ä–æ–≤)\n---------------------------------------------------------------------------]]\nsh(\"utils\/ut_sh.lua\")\nsv(\"utils\/ut_sv.lua\")\ncl(\"utils\/ut_cl.lua\")\n\n\n-- –ù–µ–ª—å–∑—è –Ω–∏–∂–µ sh_additems\ndir(\"extensions\", IGS.sh)\n\nsh(\"settings\/sh_additems.lua\")\nsh(\"settings\/sh_addlevels.lua\")\n\nsv(\"network\/net_sv.lua\")\ncl(\"network\/net_cl.lua\")\n\n\ncl(\"interface\/skin.lua\")\n-- cl(\"core_cl.lua\")\n\n-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ VGUI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤\ndir(\"interface\/vgui\", IGS.cl)\n\ncl(\"interface\/core.lua\")\n\ndir(\"interface\/activities\", IGS.cl)\ndir(\"interface\/windows\", IGS.cl)\n\nmods(\"modules\")\n\nsv(\"processor_sv.lua\") -- –Ω–∞—á–∏–Ω–∞–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –≤—Å–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –≤ –∫–æ–Ω—Ü–µ\n\n\nhook.Add(\"IGS.ServersLoaded\", \"IGS.Loaded\", function()\n\thook.Run(\"IGS.Loaded\")\nend)\n\nhook.Run(\"IGS.Initialized\") -- –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏—Ç–µ–º—ã\n", "igs\/modules\/extra\/init_sv.lua":"--[[-------------------------------------------------------------------------\n\t–ß–∞—Ç –∫–æ–º–∞–Ω–¥—ã\n---------------------------------------------------------------------------]]\nscc.add(\"igs\", IGS.UI)\nfor command in pairs(IGS.C.COMMANDS or {}) do\n\tscc.add(command, IGS.UI)\nend\n\n--[[-------------------------------------------------------------------------\n\t–ö–æ–Ω—Å–æ–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ igs_info\n---------------------------------------------------------------------------]]\nlocal print_info = function()\n\tlocal info = {\n\t\tserver_id = bib.get(\"igs:serverid\"),\n\t\tserver_ip = game.GetIPAddress(),\n\t\tigs_version = cookie.GetString(\"igs_version\") or \"unset\",\n\t\tis_unpacked = file.Exists(\"igs\/apinator.lua\", \"LUA\"),\n\t\t-- log_tail = (file.Read(\"igs_errors.txt\") or \"\"):sub(-1000)\n\t}\n\tlocal luainf do\n\t\tlocal inf = debug.getinfo(IGS.GetSign)\n\t\tluainf = {\n\t\t\tline_def = inf.linedefined,\n\t\t\tsource = inf.source,\n\t\t\tshort_src = inf.short_src,\n\t\t}\n\tend\n\tinfo.funcinfo = luainf\n\tprint(\"\\n\\n\" .. util.TableToJSON(info, true) .. \"\\n\\n\")\n\n\tprint(\"Log Tail:\")\n\tlocal log_lines = (file.Read(\"igs_errors.txt\") or \"\"):Split(\"\\n\")\n\tfor i = #log_lines - 100, #log_lines do\n\t\tprint(i, log_lines[i])\n\tend\nend\n-- print_info()\nconcommand.Add(\"igs_info\", function(pl)\n\tif IsValid(pl) and not pl:IsSuperAdmin() then return end\n\tprint_info()\nend)\n\n--[[-------------------------------------------------------------------------\n\t–ö–æ–Ω—Å–æ–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è –¥–µ–Ω–µ–≥\n---------------------------------------------------------------------------]]\nconcommand.Add(\"addfunds\", function(pl, _, _, argss)\n\tif IsValid(pl) then\n\t\tIGS.prints(Color(240, 173, 78), \"\", pl:Nick(),  \" –ø—ã—Ç–∞–ª—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å \", (\"addfunds \" .. argss),  \" —á–µ—Ä–µ–∑ –∏–≥—Ä–æ–≤—É—é –∫–æ–Ω—Å–æ–ª—å\")\n\t\t-- IGS.Notify(pl, \"–ö–æ–º–∞–Ω–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –∫–æ–Ω—Å–æ–ª–∏\")\n\t\treturn\n\tend\n\n\tlocal sid, amount, note = argss:match(\"(STEAM_%d:%d:%d+) (%d+) ?(.*)\")\n\tamount = tonumber(amount)\n\tif note == \"\" then note = nil end\n\n\tif not amount then\n\t\tIGS.prints(\"–§–æ—Ä–º–∞—Ç –∫–æ–º–∞–Ω–¥—ã –Ω–∞—Ä—É—à–µ–Ω. –ü—Ä–∏–º–µ—Ä:\\n\", \"addfunds STEAM_0:1:2345678 10 –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø—Ä–∏–º–µ—á–∞–Ω–∏–µ\")\n\t\treturn\n\tend\n\n\tlocal targ = player.GetBySteamID(sid)\n\tif targ then\n\t\ttarg:AddIGSFunds(amount, note, function()\n\t\t\tIGS.prints(\"–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∞. \", \"–ë–∞–ª–∞–Ω—Å –∏–≥—Ä–æ–∫–∞: \" .. PL_MONEY( targ:IGSFunds() ))\n\t\tend)\n\n\t-- –ò–≥—Ä–æ–∫ –æ—Ñ—Ñ–ª–∞–π–Ω\n\telse\n\t\tIGS.Transaction(util.SteamIDTo64(sid), amount, note, function()\n\t\t\tIGS.prints(\"–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ–≤–µ–¥–µ–Ω–∞, –Ω–æ –∏–≥—Ä–æ–∫ –Ω–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ\")\n\t\tend)\n\n\tend\nend)\n\n\nconcommand.Add(\"igs_reload\", function(pl, _, args)\n\tif pl == NULL then -- console only\n\t\tIGS.prints(args[1] and \"Super Reload\" or \"Casual Reload\")\n\t\tIGS.sh(args[1] and \"autorun\/l_ingameshop.lua\" or \"igs\/launcher.lua\")\n\tend\nend)\n\n\n--[[-------------------------------------------------------------------------\n\t–û—Ç–∫—Ä—ã—Ç–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∫–Ω–æ–ø–∫–æ–π –Ω–∞ –∫–ª–∞–≤–µ\n---------------------------------------------------------------------------]]\n-- https:\/\/wiki.facepunch.com\/gmod\/Enums\/KEY\nhook.Add(\"PlayerButtonDown\", \"IGS.UI\", function(pl, iButton)\n\tif iButton == IGS.C.MENUBUTTON then\n\t\tscc.run(pl, \"igs\")\n\tend\nend)\n\n\n--[[-------------------------------------------------------------------------\n\t–ì–ª–æ–±–∞–ª—å–Ω–æ–µ –æ–ø–æ–≤–µ—â–µ–Ω–∏–µ –æ –ø–æ–∫—É–ø–∫–µ –∏—Ç–µ–º–æ–≤\n\thttps:\/\/trello.com\/c\/SvZ8UE0F\/472-—Å–æ–æ–±—â–µ–Ω–∏–µ-–æ-–ø–æ–∫—É–ø–∫–µ\n---------------------------------------------------------------------------]]\nhook.Add(\"IGS.PlayerPurchasedItem\", \"IGS.BroadcastPurchase\", function(pl, ITEM)\n\tif IGS.C.BroadcastPurchase == false then return end -- TODO —Å–¥–µ–ª–∞—Ç—å –º–æ–¥—É–ª–µ–º\n\n\tIGS.NotifyAll(pl:Nick() .. \" –∫—É–ø–∏–ª \" .. ITEM:Name())\nend)\n\n\n--[[-------------------------------------------------------------------------\n\t–û–ø–æ–≤–µ—â–µ–Ω–∏–µ –æ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–∏ —Å—á–µ—Ç–∞\n\thttps:\/\/trello.com\/c\/6rMMH3cn\/483-—Å–æ–æ–±—â–µ–Ω–∏–µ-–æ-–ø–æ–ø–æ–ª–Ω–µ–Ω–∏–∏-—Å—á–µ—Ç–∞\n---------------------------------------------------------------------------]]\n\nhook.Add(\"IGS.PlayerDonate\", \"ThanksForDonate\", function(pl, rub)\n\tlocal score = pl.igs_score -- TODO: make netvar\n\n\tIGS.Notify(pl, Format(\"–°–ø–∞—Å–∏–±–æ –≤–∞–º –∑–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—á–µ—Ç–∞. \" ..\n\t\t\"–í–∞—à –Ω–æ–≤—ã–π Score –Ω–∞ –≤—Å–µ—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö - %d. \" ..\n\t\t\"–ß—Ç–æ —Ç–∞–∫–æ–µ Score: vk.cc\/caHTZi\", score))\n\n\tlocal rub_str  = PL_MONEY(rub)\n\tlocal full_str = Format(\"%s –ø–æ–ø–æ–ª–Ω–∏–ª —Å—á–µ—Ç –Ω–∞ %s. –ï–≥–æ –Ω–æ–≤—ã–π Score: %s\", pl:Nick(), rub_str, score)\n\n\tIGS.NotifyAll(full_str)\nend)\n\nhook.Add(\"IGS.PlayerPurchasesLoaded\", \"BalanceRemember\", function(pl)\n\tlocal balance = pl:IGSFunds()\n\tif balance >= 10 then\n\t\ttimer.Simple(10, function()\n\t\t\tif not IsValid(pl) then return end\n\t\t\tIGS.Notify(pl, \"–í—ã –º–æ–∂–µ—Ç–µ –ø–æ—Ç—Ä–∞—Ç–∏—Ç—å \" .. IGS.SignPrice(balance) .. \" —á–µ—Ä–µ–∑ \/donate\")\n\t\t\tIGS.Notify(pl, \"–í–∞—à Score \" .. (pl.igs_score or 0) .. \". –ü–æ–¥—Ä–æ–±–Ω–µ–µ: vk.cc\/caHTZi\") -- or 0 –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π\n\t\tend)\n\tend\nend)\n\n--[[-------------------------------------------------------------------------\n\t–ü–æ–∏—Å–∫ –Ω–æ–≤—ã—Ö –≤–µ—Ä—Å–∏–π\n---------------------------------------------------------------------------]]\nlocal COLOR_HIGHLIGHT = Color(50, 50, 255)\ntimer.Simple(1, function() -- http.Fetch\n\tIGS.prints(\"–ü–æ–∏—Å–∫ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π\")\n\tif not IGS_REPO then return end\n\thttp.Fetch(\"https:\/\/api.github.com\/repos\/\" .. IGS_REPO .. \"\/releases\", function(json)\n\t\tlocal releases = util.JSONToTable(json)\n\t\tassert(releases[1], \"–†–µ–ª–∏–∑–æ–≤ –Ω–µ—Ç. –ù—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å CI\") -- —Ñ–æ—Ä–∫\n\n\t\ttable.sort(releases, function(a, b)\n\t\t\treturn tonumber(a.tag_name) > tonumber(b.tag_name)\n\t\tend)\n\n\t\tlocal current_ver    = cookie.GetNumber(\"igs_version\") or 0 -- or 0 –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω—ã—Ö –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–π –ø—Ä–æ –æ–±–Ω–æ–≤—É, –µ—Å–ª–∏ –ª–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞\n\t\tlocal freshest_major = math.floor(releases[1].tag_name)\n\t\tlocal current_major  = math.floor(current_ver)\n\n\t\tif freshest_major > current_major then\n\t\t\tlocal info_url = \"https:\/\/github.com\/\" .. IGS_REPO .. \"\/releases\/tag\/\" .. freshest_major\n\t\t\tIGS.prints(\"üÜï –î–æ—Å—Ç—É–ø–Ω–∞ –Ω–æ–≤–∞—è Major –≤–µ—Ä—Å–∏—è: \", freshest_major, \". –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞: \", (current_major == 0 and \"—Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω–∞—è üö®\" or current_major), \"\\n–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø—Ä–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–¥–µ—Å—å: \", info_url)\n\t\t\tif current_major == 0 then\n\t\t\t\tIGS.prints(\"–î–ª—è –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ addons –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–æ–ª—å–∫–æ \", \"igs-modification\")\n\t\t\tend\n\t\telse\n\t\t\tIGS.prints(\"Major –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –Ω–µ—Ç\")\n\t\tend\n\n\t\tlocal freshest_suitable -- \"123.2\"\n\t\tfor _, release in ipairs(releases) do -- –æ—Ç —Å–≤–µ–∂–∞–π—à–∏—Ö\n\t\t\tif current_ver == tonumber(release.tag_name) then break end -- 123.1 current and 123.1 suitable\n\t\t\tif math.floor(release.tag_name) == current_major then -- (123).1 == (123).2\n\t\t\t\tfreshest_suitable = release.tag_name\n\t\t\t\tbreak\n\t\t\tend\n\t\tend\n\n\t\tif freshest_suitable then\n\t\t\tIGS.prints(\"üÜï –ù–∞–π–¥–µ–Ω–æ –Ω–æ–≤–æ–µ soft –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ. –¢–µ–∫—É—â–∞—è –≤–µ—Ä—Å–∏—è: \", current_ver, \", –Ω–æ–≤–∞—è: \", freshest_suitable)\n\t\t\tlocal url = \"https:\/\/github.com\/\" .. IGS_REPO .. \"\/releases\/download\/\" .. freshest_suitable .. \"\/superfile.json\"\n\t\t\thttp.Fetch(url, function(superfile)\n\t\t\t\tIGS.prints(Color(100, 250, 100), \"\", \"–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ! \", \"–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è\")\n\t\t\t\tfile.Write(\"igs\/superfile.txt\", superfile)\n\t\t\t\tcookie.Set(\"igs_version\", freshest_suitable)\n\t\t\tend, error)\n\t\telse\n\t\t\tIGS.prints(\"Soft –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π –Ω–µ—Ç\")\n\t\tend\n\tend, error)\nend)\n", "igs\/extensions\/ulx.lua":"IGS.ITEMS.ULX = IGS.ITEMS.ULX or {\n\tGROUPS = {},\n\tPEX    = {}\n}\n\n\nlocal STORE_ITEM = MT_IGSItem\n\nfunction STORE_ITEM:SetULXGroup(sUserGroup, iGroupWeight)\n\tself:SetCanActivate(function(pl) -- invDbID\n\t\tif pl:IsUserGroup(sUserGroup) then\n\t\t\treturn \"–£ –≤–∞—Å —É–∂–µ –¥–µ–π—Å—Ç–≤—É–µ—Ç —ç—Ç–∞ —É—Å–ª—É–≥–∞\"\n\t\tend\n\tend)\n\tself:SetInstaller(function(pl)\n\t\tRunConsoleCommand(\"ulx\", \"adduserid\", pl:SteamID(), sUserGroup)\n\t\tpl.IGSULXWeight = iGroupWeight\n\tend)\n\tself:SetValidator(function(pl)\n\t\tlocal valid = false\n\t\tif pl.IGSULXWeight then\n\t\t\tvalid = iGroupWeight <= pl.IGSULXWeight\n\t\telse\n\t\t\tvalid = pl:IsUserGroup(sUserGroup)\n\t\tend\n\n\t\tif not valid then\n\t\t\tIGS.NotifyAll(\"–ê–≤—Ç–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ \" .. self:Name() .. \" –¥–ª—è \" .. pl:Name())\n\t\t\treturn false\n\t\tend\n\tend)\n\n\n\tself.ulx_group = self:Insert(IGS.ITEMS.ULX.GROUPS, sUserGroup)\n\tself.ulx_group_weight = iGroupWeight\n\treturn self\nend\n\n-- –ï—Å—Ç—å –º–Ω–æ–≥–æ –Ω—å—é–∞–Ω—Å–æ–≤. –ö–æ–º–º–∏—Ç 1 –æ–∫—Ç—è–±—Ä—è 2019\nfunction STORE_ITEM:SetULXCommandAccess(cmd,tag) -- \"ulx model\",\"^\", –Ω–∞–ø—Ä–∏–º–µ—Ä\n\tself:SetInstaller(function(pl)\n\t\tif not tag then\n\t\t\ttable.insert(ULib.ucl.authed[ pl:UniqueID() ].allow, cmd)\n\t\telse\n\t\t\tULib.ucl.authed[ pl:UniqueID() ].allow[cmd] = tag\n\t\tend\n\tend)\n\tself:SetValidator(function()\n\t\treturn false\n\tend)\n\n\n\tself.ulx_command = self:Insert(IGS.ITEMS.ULX.PEX, cmd)\n\treturn self\nend\n\n\nif CLIENT then return end\n\nlocal function checkGroups(pl)\n\tlocal hasAccess = IGS.PlayerHasOneOf(pl, IGS.ITEMS.ULX.GROUPS[ pl:GetUserGroup() ])\n\tif hasAccess == nil then return end\n\n\tif hasAccess then\n\t\tpl.IGSULXWeight = hasAccess.ulx_group_weight\n\t\treturn -- –µ—Å–ª–∏ –∏–º–µ–µ—Ç—Å—è —Ö–æ—Ç—å –æ–¥–Ω–∞ –ø–æ–∫—É–ø–∫–∞, —Ç–æ –Ω–µ —Å–Ω–∏–º–∞–µ–º –ø—Ä–∞–≤–∞\n\tend\n\n\tRunConsoleCommand(\"ulx\",\"removeuserid\",pl:SteamID())\nend\n\nlocal function hasPexAccess(pl, cmd)\n\tlocal hasAccess = IGS.PlayerHasOneOf(pl, IGS.ITEMS.ULX.PEX[cmd])\n\treturn hasAccess ~= false -- nil, –µ—Å–ª–∏ –Ω–µ –ø—Ä–æ–¥–∞–µ—Ç—Å—è\nend\n\nlocal function checkPermissions(pl)\n\tlocal user = ULib.ucl.authed[ pl:UniqueID() ]\n\tif not user then return end\n\n\tlocal changed\n\t-- –í–∏–¥ ucl —Ç–∞–±–ª–∏—Ü—ã https:\/\/img.qweqwe.ovh\/1523035793058.png\n\tfor k,v in pairs(user.allow or {}) do -- –Ω–µ —É–≤–µ—Ä–µ–Ω, —á—Ç–æ allow –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –µ—Å—Ç—å\n\t\tlocal cmd = isnumber(k) and v or k\n\n\t\tif not hasPexAccess(pl, cmd) then\n\t\t\tuser.allow[k] = nil\n\t\t\tchanged = true\n\t\tend\n\tend\n\n\tif changed then\n\t\tULib.ucl.saveUsers()\n\tend\nend\n\ntimer.Simple(.1, function() -- —á—Ç–æ–±—ã —ç—Ç–æ—Ç —Ö—É–∫ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –±—ã–ª –ø–æ—Å–ª–µ RestorePex. –ò—Å—Ç–æ—Ä–∏—è –í–ö 20 –º–∞—è —Å –ê–Ω—Ç–æ–Ω –ü–∞–Ω—á–µ–Ω–∫–æ\nhook.Add(\"IGS.PlayerPurchasesLoaded\", \"ULXGroupsAndPEX\", function(pl)\n\tif next(IGS.ITEMS.ULX.GROUPS) then\n\t\tcheckGroups(pl)\n\tend\n\n\tif next(IGS.ITEMS.ULX.PEX) then\n\t\tcheckPermissions(pl)\n\tend\nend, HOOK_HIGH)\nend)\n", "igs\/modules\/extra\/don_grace_sv.lua":"--[[-------------------------------------------------------------------------\n\t–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∫–æ—Ä–¥–Ω–æ–≥–æ –¥–æ–Ω–∞—Ç–∞\n---------------------------------------------------------------------------]]\n-- –ï—Å–ª–∏ –≤–∫–ª—é—á–∏—Ç—å, —Ç–æ –≤ —á–∞—Ç–µ –Ω–∞—á–Ω—É—Ç –ø–æ—è–≤–ª—è—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–ø–∏—Å–∞–Ω—ã –Ω–∏–∂–µ\nIGS.C.TopDon_Echo = true\n\n-- –ß–∞—Å—Ç–æ—Ç–∞ —Å–±—Ä–æ—Å–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Ä–µ–∫–æ—Ä–¥–∞ –¥–æ–Ω–∞—Ç–∞\n-- %H - —Ä–∞–∑ –≤ —á–∞—Å, %d - —Ä–∞–∑ –≤ –¥–µ–Ω—å, %u - —Ä–∞–∑ –≤ –Ω–µ–¥–µ–ª—é. %m - —Ä–∞–∑ –≤ –º–µ—Å—è—Ü\nIGS.C.TopDon_Periodicity = \"%u\" -- %m\n\nIGS.C.TopDon_TextRecord   = \"$nick –ø–æ–±–∏–ª —Ä–µ–∫–æ—Ä–¥ –¥–æ–Ω–∞—Ç–∞ –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ, –ø–æ–ø–æ–ª–Ω–∏–≤ —Å—á–µ—Ç –Ω–∞ $sum —Ä—É–±.\\n–ü—Ä–µ–¥—ã–¥—É—â–∏–π —Ä–µ–∫–æ—Ä–¥ —É—Å—Ç–∞–Ω–æ–≤–∏–ª $nick_prev, –ø–æ–ø–æ–ª–Ω–∏–≤ —Å—á–µ—Ç –Ω–∞ $sum_prev —Ä—É–±\"\nIGS.C.TopDon_TextFirstDon = \"$nick —Å—Ç–∞–ª –ø–µ—Ä–≤—ã–º, –∫—Ç–æ –∑–∞–¥–æ–Ω–∞—Ç–∏–ª –≤ —ç—Ç–æ–º –º–µ—Å—è—Ü–µ. $nick —É–º–Ω–∏—á–∫–∞. –ë—É–¥—å –∫–∞–∫ $nick - \/donate\" -- –¥–æ—Å—Ç—É–ø–µ–Ω —à–∞–±–ª–æ–Ω $sum\n\n\n\n\n--[[-------------------------------------------------------------------------\n---------------------------------------------------------------------------]]\nlocal SUM,TIME,SID,NAME =\n\t\"igs:hugecharge_sum\",\n\t\"igs:hugecharge_time\",\n\t\"igs:hugecharge_sid\",\n\t\"igs:hugecharge_name\"\n\n\nlocal function resetHugeCharge()\n\tbib.delete(SUM)\n\tbib.delete(TIME)\n\tbib.delete(SID)\n\tbib.delete(NAME)\n\n\t-- cprint(\"–°–±—Ä–æ—Å–∏–ª–∏\")\nend\n\nlocal function setHugeCharge(sum, sid, nick)\n\tbib.set(SUM,  sum)\n\tbib.set(TIME, os.time()) --+ 60*60*24*2) -- +2 –¥–Ω—è\n\tbib.set(SID,  sid)\n\tbib.set(NAME, nick)\nend\n\nlocal function getHugeCharge(bSumOnly)\n\tif bSumOnly then -- –º–∏–∫—Ä–æ–æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è\n\t\treturn tonumber(bib.get(SUM))\n\tend\n\n\treturn {\n\t\tsum  = tonumber(bib.get(SUM)),\n\t\ttime = tonumber(bib.get(TIME)),\n\t\tsid  = bib.get(SID),\n\t\tnick = bib.get(NAME)\n\t}\nend\n\n-- print(getHugeCharge())\n-- setHugeCharge(1,AMD():SteamID64(),\"_AMD_\")\n\n\n\n\n-- –ï—Å–ª–∏ –µ—Å—Ç—å –∑–∞–ø–∏—Å—å –æ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —Ä–µ–∫–æ—Ä–¥–µ –∏ —Å–µ–π—á–∞—Å —á–∞—Å\/–¥–µ–Ω—å\/–Ω–µ–¥–µ–ª—è\/–º–µ—Å—è—Ü –º–µ–Ω—å—à–µ, —á–µ–º –±—ã–ª–æ –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–π –∑–∞–ø–∏—Å–∏\n-- –∑–Ω–∞—á–∏—Ç –¥–µ–Ω—å\/–Ω–µ–¥–µ–ª—è\/–º–µ—Å—è—Ü\/–≥–æ–¥ –Ω–∞—á–∞–ª–∏—Å—å —Å–Ω–∞—á–∞–ª–∞ –∏ –ø–æ—Ä–∞ —É–¥–∞–ª—è—Ç—å —ç—Ç—É –∑–∞–ø–∏—Å—å, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —É—á–µ—Ç —Å–Ω–∞—á–∞–ª–∞\nlocal prev_rec = getHugeCharge()\n-- cprint(os.date(IGS.C.TopDon_Periodicity))\n-- cprint(os.date(IGS.C.TopDon_Periodicity,prev_rec.time))\n\nif prev_rec and os.date(IGS.C.TopDon_Periodicity) < os.date(IGS.C.TopDon_Periodicity,prev_rec.time) then\n\tresetHugeCharge()\nend\n\n\n\nlocal function charge(pl, sum)\n\tsum = tonumber(sum)\n\n\tif sum > (getHugeCharge(true) or 0) then\n\t\tlocal pr = getHugeCharge() -- Previous Record\n\n\t\tlocal s = pr.nick and IGS.C.TopDon_TextRecord or IGS.C.TopDon_TextFirstDon\n\n\t\t-- –ù–µ –ø–µ—Ä–≤—ã–π –¥–æ–Ω–∞—Ç\n\t\tif pr.nick then\n\t\t\tlocal s32 = util.SteamIDFrom64(pr.sid)\n\n\t\t\ts = s\n\t\t\t:gsub(\"$nick_prev\", (\"%s(%s)\"):format(pr.nick,s32) )\n\t\t\t:gsub(\"$sum_prev\",pr.sum)\n\t\tend\n\n\t\ts = s\n\t\t:gsub(\"$nick\",pl:Nick())\n\t\t:gsub(\"$sum\",sum)\n\n\t\tIGS.NotifyAll(s)\n\n\t\tsetHugeCharge(sum,pl:SteamID64(),pl:Nick())\n\tend\nend\n\n-- charge(AMD(),6)\n\n\nhook.Add(\"IGS.PlayerDonate\",\"TopDonateEcho\",function(pl, sum)\n\tif IGS.C.TopDon_Echo then\n\t\tcharge(pl, sum)\n\tend\nend)\n", "autorun\/l_ingameshop.lua":"--[[-------------------------------------------------------------------------\n\t–í–µ–± –∑–∞–≥—Ä—É–∑—á–∏–∫ IGS 13.03.2021\n\thttps:\/\/blog.amd-nick.me\/github-workshop-garrysmod\/\n\t–ò–∑–Ω–∞—á–∞–ª—å–Ω–æ —ç—Ç–∞ –∑–∞–¥–∞—á–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–ª–∞—Å—å –≤ 3 —Å—Ç—Ä–æ–∫–∏\n---------------------------------------------------------------------------]]\nIGS = IGS or {}\n\nlocal function log(patt, ...)\n\tif cookie.GetNumber(\"igs_verbose\", 0) == 1 then\n\t\tprint(string.format(\"[IGS] \" .. patt, ...)) -- –Ω–µ –º–µ–Ω—è—Ç—å –Ω–∞ printS. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –ª–æ–≥–∏ —Å–ª–∏—à–∫–æ–º —Ä–∞–Ω–Ω–∏–µ\n\tend\nend\n\nconcommand.Add(\"igs_verbose\", function(pl)\n\tif SERVER and IsValid(pl) then return end\n\n\tlocal enable = cookie.GetNumber(\"igs_verbose\", 0) == 0\n\tcookie.Set(\"igs_verbose\", enable and 1 or 0)\n\tIGS.prints(\"IGS Logging \" .. (enable and \"enabled\" or \"disabled\"))\nend)\n\nlocal i = {} -- lua files only\ni.sv = SERVER and include or function() end\ni.cl = SERVER and AddCSLuaFile or include\ni.sh = function(f) return i.cl(f) or i.sv(f) end\n\n\nlocal function include_mount(sRealm, sAbsolutePath)\n\tif (sRealm == \"sh\")\n\tor (sRealm == \"sv\" and SERVER)\n\tor (sRealm == \"cl\" and CLIENT) then\n\t\t-- –ß–∏—Å—Ç—ã–π RunString –Ω–µ –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞–µ—Ç return –≤–Ω—É—Ç—Ä–∏ —Ñ–∞–π–ª–æ–≤\n\t\t-- –ù–æ CompileString 9 –∞–ø—Ä–µ–ª—è 2021 —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ –±—ã–ª –ø—Ä–∏—á–∏–Ω–æ–π –æ—à–∏–±–æ–∫\n\t\t-- –ü–æ–∫–∞ –ø—É—Å—Ç—å –±—É–¥–µ—Ç RunString –±–µ–∑ —Ä–µ—Ç—É—Ä–Ω–∞\n\t\t-- –ó–∞–º–µ—Ç–∫–∏: https:\/\/t.me\/c\/1353676159\/55852\n\n\t\t-- local executer = CompileString(content, sAbsolutePath)\n\t\t-- return executer()\n\n\t\tlocal content  = IGS_MOUNT[sAbsolutePath]\n\t\tRunString(content, sAbsolutePath)\n\tend\nend\n\n-- \"–ö–æ—Å—Ç—ã–ª—å\" –¥–ª—è —Ä–∞–±–æ—Ç—ã IGS.sh\/sv\/cl –∏–∑–Ω—É—Ç—Ä–∏ –º–æ–¥—É–ª—å–Ω—ã—Ö _main.lua —Ñ–∞–π–ª–æ–≤ –∏ —ç–Ω—Ç–∏—Ç–∏\n-- —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ–≥–æ –ø—É—Ç–∏\n-- –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å ..\/file (–Ω–∞–≤–µ—Ä–Ω. –ù–µ —á–µ–∫–∞–ª)\nlocal iam_inside\n\nlocal function incl(sRealm, sPath)\n\t-- –ù–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç, –µ—Å–ª–∏ –Ω–∞–ø—Ä–∏–º–µ—Ä –≤ –ª–∞—É–Ω—á–µ—Ä–µ –≤ sh() –¥–ª—è —Ñ–∞–π–ª–æ–≤ —É–±—Ä–∞—Ç—å –ø—Ä–∏—Å—Ç–∞–≤–∫—É \"igs\/\"\n\tlocal isRelativePath = iam_inside and not sPath:StartWith(iam_inside)\n\tlocal sAbsolutePath  = isRelativePath and iam_inside .. \"\/\" .. sPath or sPath\n\t-- \/\\ –ú–± –≤–Ω—É—Ç—Ä–∏ –º–æ–¥—É–ª—è —É–∂–µ —É–∫–∞–∑–∞–Ω full –ø—É—Ç—å, –∞ –Ω–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π\n\t-- (–æ–±—ã—á–Ω–æ –ø—É—Ç—å –∫ _main.lua)\n\n\t-- print(sAbsolutePath)\n\n\tif IGS_MOUNT and IGS_MOUNT[sAbsolutePath] then -- 1st check for lua load (not web)\n\t\tlog(\"%s –ò–∫–ª—é–¥ —Å MOUNT. –ü—É—Ç—å: %s\", sRealm, sAbsolutePath)\n\t\treturn include_mount(sRealm, sAbsolutePath)\n\telse\n\t\tlog(\"%s –ò–∫–ª—é–¥ —Å LUA. –ü—É—Ç—å: %s\", sRealm, sAbsolutePath)\n\t\tlocal fIncluder = i[sRealm]\n\t\treturn fIncluder(sAbsolutePath)\n\tend\nend\n\nfunction IGS.sh(sPath) return incl(\"sh\", sPath) end\nfunction IGS.sv(sPath) return incl(\"sv\", sPath) end\nfunction IGS.cl(sPath) return incl(\"cl\", sPath) end\n\nlocal function findKeys(arr, patt)\n\tlocal found = {}\n\tfor key, val in pairs(arr) do\n\t\tlocal match = key:match(patt)\n\t\tif match then\n\t\t\ttable.insert(found, match)\n\t\tend\n\tend\n\treturn found\nend\n\n-- –¢—è–∂–µ–ª–∞—è, –Ω–æ –ø–æ–∫–∞ –≤ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –Ω–µ –Ω—É–∂–¥–∞–µ—Ç—Å—è\n-- –ü—Ä–∏ –≤—ã–±–æ—Ä–∫–µ –º–æ–¥—É–ª–µ–π –∏ —ç–Ω—Ç–∏—Ç–∏ —ç–ª–µ–º–µ–Ω—Ç—ã –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è\nlocal function unique(arr)\n\tlocal ret = {}\n\tfor _, v in ipairs(arr) do\n\t\tif not table.HasValue(ret, v) then\n\t\t\ttable.insert(ret, v)\n\t\tend\n\tend\n\treturn ret\nend\n\nlocal function findInMount(patt)\n\treturn IGS_MOUNT and findKeys(IGS_MOUNT, patt) or {}\nend\n\nfunction IGS.include_files(sPath, fIncluder) -- igs\/extensions\n\tlocal data_files = findInMount(\"^\" .. sPath:PatternSafe() .. \"\/(.*%.lua)$\")\n\tlocal lua_files  = file.Find(sPath .. \"\/*.lua\", \"LUA\")\n\ttable.Add(data_files, lua_files)\n\n\tfor _, fileName in ipairs(data_files) do\n\t\tfIncluder(sPath .. \"\/\" .. fileName)\n\tend\nend\n\nfunction IGS.load_modules(sBasePath) -- igs\/modules\n\tlocal data_modules  = findInMount(\"^\" .. sBasePath .. \"\/([^\/]*)\/_main%.lua$\")\n\tdata_modules = unique(data_modules)\n\tlocal _, lua_modules = file.Find(sBasePath .. \"\/*\", \"LUA\")\n\ttable.Add(data_modules, lua_modules)\n\n\tfor _, mod in ipairs(data_modules) do\n\t\tlocal sModPath = sBasePath .. \"\/\" .. mod\n\t\tiam_inside = sModPath\n\t\tIGS.sh(sModPath .. \"\/_main.lua\") -- igs\/modules\/inv_log\/_main.lua\n\tend\n\tiam_inside = nil\nend\n\nfunction IGS.load_entities()\n\tlog(\"–ó–∞–≥—Ä—É–∑–∫–∞ —ç–Ω—Ç–∏—Ç–∏\")\n\tlocal entities = findInMount(\"^entities\/([^\/]*)\/(.*%.lua)$\")\n\tentities = unique(entities) -- {ent_igs, npc_igs}\n\n\tfor _, ent_class in ipairs(entities) do\n\t\tiam_inside = \"entities\/\" .. ent_class\n\t\tENT = {}\n\t\tENT.Folder = iam_inside\n\n\t\tif SERVER then IGS.sv(\"init.lua\")\n\t\telse IGS.cl(\"cl_init.lua\") end\n\t\tscripted_ents.Register(ENT, ent_class)\n\n\t\tiam_inside = nil\n\t\tENT = nil\n\tend\nend\n\n\nconcommand.Add(\"igs_flushversion\", function(pl)\n\tif IsValid(pl) then IGS.prints(\"console only\") return end\n\tcookie.Set(\"igs_version\", nil)\n\tIGS.prints(\"OK. –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å–µ—Ä–≤–µ—Ä —Å–∫–∞—á–∞–µ—Ç –Ω–æ–≤—É—é –≤–µ—Ä—Å–∏—é\")\nend)\n\n-- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –≤–µ—Ä—Å–∏–∏ –∫–ª–∏–µ–Ω—Ç—É. –ù–∞ —Å–µ—Ä–≤–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å cookie.GetString(\"igs_version\")\nlocal igs_version = CreateConVar(\"igs_version\", \"\", {FCVAR_NOTIFY, FCVAR_REPLICATED, FCVAR_SERVER_CAN_EXECUTE})\n\nif SERVER and igs_version:GetString() == \"\" then\n\tlocal version = cookie.GetString(\"igs_version\")\n\tigs_version:SetString(version or \"777\") -- \"or\" for case when igsmod isn't ran (core hosted locally)\nend\n\nIGS.sh(\"igs\/launcher.lua\")\nIGS.load_entities()\n", "igs\/interface\/vgui\/igs_wmat.lua":"--[[\n–ï—Å–ª–∏ —Å—Å—ã–ª–∫—É –æ–±–Ω–æ–≤–∏—Ç—å, —Ç–æ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –æ–±–Ω–æ–≤–∏—Ç—Å—è\n–ï—Å–ª–∏ —Ä–∞–∑–º–µ—Ä –ø–∞–Ω–µ–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—Å—è, —Ç–æ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –∞–¥–∞–ø—Ç–∏—Ä—É–µ—Ç—Å—è\n]]\n\nlocal PANEL = {}\n\nlocal default_matex\nfunction PANEL:Init()\n\tif not default_matex then\n\t\t-- print(\"Loading default matex\")\n\t\tdefault_matex = matex.url(IGS.C.DefaultIcon)\n\tend\nend\n\nfunction PANEL:Think() -- –æ–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ matex –º–∞—Ç–µ—Ä–∏–∞–ª–∞. –î–ª—è SetURL\n\tif self.matex and self.matex.material then\n\t\tself.material = self.matex.material\n\t\tself.matex = nil\n\tend\nend\n\nfunction PANEL:Paint(w, h)\n\tlocal mater = self.material or (default_matex and default_matex.material)\n\tif mater then\n\t\tsurface.SetDrawColor( IGS.col.ICON )\n\t\tsurface.SetMaterial( mater )\n\t\tsurface.DrawTexturedRect(0, 0, w, h)\n\tend\nend\n\nfunction PANEL:SetMaterial(sMaterial) -- \"models\/debug\/debugwhite\"\n\tself.material = sMaterial and Material(sMaterial, \"noclamp smooth\") or nil\nend\n\nfunction PANEL:SetURL(sUrl)\n\tif not sUrl then\n\t\tself.matex = nil -- fallback to default\n\t\treturn\n\tend\n\n\t-- print(\"igs_wmat:SetURL('\" .. sUrl .. \"') size: \", self:GetWide())\n\n\tlocal url_resized = string.format(IGS.C.ImgProxyPattern or \"https:\/\/imgkit.gmod.app\/?image=%s&size=%d\", sUrl:URLEncode(), self:GetWide())\n\tself.matex = matex.url( url_resized )\n\tself.url = sUrl\n\tself.size = self:GetWide()\nend\n\nfunction PANEL:PerformLayout(new_w) -- size changed\n\t-- print(\"igs_wmat:PerformLayout()\")\n\n\t-- –ï—Å–ª–∏ –µ—Å—Ç—å —á—Ç–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –∏ –µ—Å—Ç—å —Å–º—ã—Å–ª –æ–±–Ω–æ–≤–ª—è—Ç—å (–∏–∫–æ–Ω–∫–∞ —Ä–∞—Å—à–∏—Ä–∏–ª–∞—Å—å)\n\tif self.url and new_w > (self.size or 0) then\n\t\tself:SetURL(self.url)\n\tend\nend\n\nvgui.Register(\"igs_wmat\", PANEL, \"Panel\")\n-- IGS.UI()\n", "igs\/utils\/ut_sh.lua":"-- #todo –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–µ–ª—ã–≤–∞—Ç—å, –Ω–æ —Ç–æ–ª—å–∫–æ —Ç–∞–∫:\n-- https:\/\/trello.com\/c\/WfVYTIOF\/544 (–∫–æ–º–º–µ–Ω—Ç—ã)\nCreateConVar(\"igs_debug\", 0, FCVAR_NOTIFY)\ncvars.AddChangeCallback(\"igs_debug\", function(_, old, new)\n\tIGS.DEBUG = tonumber(new) -- level. 0: disabled, 1: debug, 2: info, 3: warning, 4: error\n\tif IGS.DEBUG == 0 then IGS.DEBUG = nil end\n\tIGS.prints(\"PEZuM OTJIA9Ku \", (IGS.DEBUG and \"AKTuBuPOBAH\" or \"BbIKJII04EH\"), \". Level: \", (IGS.DEBUG or 0))\nend, \"main\")\n\n\nlocal PLAYER = FindMetaTable(\"Player\")\n\nfunction PLAYER:IGSFunds()\n\treturn self:GetIGSVar(\"igs_balance\") or 0\nend\n\nfunction PLAYER:HasPurchase(sUID)\n\treturn IGS.PlayerPurchases(self)[sUID]\nend\n\n-- ITEM, –µ—Å–ª–∏ —á–µ–ª–æ–≤–µ–∫ –∏–º–µ–µ—Ç —Ö–æ—Ç—å –æ–¥–∏–Ω –∏—Ç–µ–º –∏–∑ —Å–ø–∏—Å–∫–∞\n-- nil, –µ—Å–ª–∏ –∏—Ç–µ–º –Ω–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è\n-- false, –µ—Å–ª–∏ –Ω–µ—Ç –ø—Ä–∞–≤–∞\nfunction IGS.PlayerHasOneOf(pl, tItems)\n\tif not tItems then return end\n\n\tfor _,ITEM in ipairs(tItems) do\n\t\tif pl:HasPurchase( ITEM:UID() ) then\n\t\t\treturn ITEM\n\t\tend\n\tend\n\n\treturn false\nend\n\nfunction IGS.isUser(pl) -- –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç false, –µ—Å–ª–∏ —á–µ–ª –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ —é–∑–∞–ª –∞–≤—Ç–æ–¥–æ–Ω–∞—Ç\n\treturn pl:GetIGSVar(\"igs_balance\") ~= nil\nend\n\n\n-- –ú–æ–∂–µ—Ç –ª–∏ —á–µ–ª —Å–µ–±–µ –ø–æ–∑–≤–æ–ª–∏—Ç—å –ø–æ–∫—É–ø–∫—É –∏—Ç–µ–º–∞, —Ü–µ–Ω–æ–π –≤ sum IGS?\nfunction IGS.CanAfford(pl,sum,assert)\n\tif sum >= 0 and pl:IGSFunds() - sum >= 0 then\n\t\treturn true\n\tend\n\n\tif not assert then\n\t\treturn false\n\tend\n\n\tif isfunction(assert) then\n\t\tassert()\n\telse\n\t\tif SERVER then\n\t\t\tIGS.WIN.Deposit(pl, sum)\n\t\telse\n\t\t\tIGS.WIN.Deposit(sum)\n\t\tend\n\tend\n\n\treturn false\nend\n\n-- –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–∫—É–ø–æ–∫ –∏–≥—Ä–æ–∫–∞\n-- uid > amount\nfunction IGS.PlayerPurchases(pl)\n\treturn CLIENT and (pl:GetIGSVar(\"igs_purchases\") or {}) or pl:GetVar(\"igs_purchases\",{})\nend\n\n-- –°—É–º–º–∞ –≤—Å–µ—Ö –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ —Å—á–µ—Ç—É –∏–≥—Ä–æ–∫–∞\n-- (–≤–∫–ª—é—á–∞—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è, –∞–∫—Ç–∏–≤–∞—Ü–∏—é –∫—É–ø–æ–Ω–æ–≤ –∫—É–ø–æ–Ω—ã –∏ –≤—ã–¥–∞—á—É –¥–µ–Ω–µ–≥ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º)\nfunction IGS.TotalTransaction(pl)\n\treturn pl:GetIGSVar(\"igs_total_transactions\") or 0\nend\n\n-- –≤–æ–∑–≤—Ä–∞—Ç –æ–±—ä–µ–∫—Ç–∞ –õ–í–õ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ, –Ω–æ–º–µ—Ä–∞ —É—Ä–æ–≤–Ω—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ\nfunction IGS.PlayerLVL(pl)\n\treturn pl:GetIGSVar(\"igs_lvl\")\nend\n\n\n-- –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—É–º–º–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –≤ —Ä—É–±–ª—è—Ö\nfunction IGS.GetMinCharge()\n\treturn 10 -- TODO global var?\nend\n\n-- –ù–µ —Å–º–æ–≥ –∑–∞–≥—Ä—É–∑–∏—Ç—å—Å—è –∏–ª–∏ –≤—ã–∫–ª—é—á–µ–Ω –≤ –ø–∞–Ω–µ–ª–∏, –º–µ–Ω—é –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –Ω–µ–ª—å–∑—è\nfunction IGS.IsLoaded()\n\treturn IGS.SERVERS:ID() and not GetGlobalBool(\"IGS_DISABLED\")\nend\n\n\n\n\nlocal terms = {\n\t[1] = \"–±–µ—Å–∫–æ–Ω–µ—á–Ω–æ\",\n\t[2] = \"–µ–¥–∏–Ω–æ—Ä–∞–∑–æ–≤–æ\",\n\t[3] = \"%s\"\n}\n\nfunction IGS.TermType(term)\n\treturn\n\t\tnot term  and 1 or -- –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ\n\t\tterm == 0 and 2 or -- –º–≥–Ω–æ–≤–µ–Ω–Ω–æ\n\t\tterm      and 3    -- –∫–æ–ª-–≤–æ –¥–Ω–µ–π\nend\n\nfunction IGS.TermToStr(term)\n\treturn terms[ IGS.TermType(term) ]:format(term and PL_DAYS(term))\nend\n\nfunction IGS.TimestampToDate(ts,bShowFull) -- –≤ \"–∫—É–ø–∏–ª –¥–æ\"\n\tif not ts then return end\n\treturn os.date(bShowFull and IGS.C.DATE_FORMAT or IGS.C.DATE_FORMAT_SHORT,ts)\nend\n\n-- TODO: –º–æ–∂–µ—Ç —É–¥–∞–ª–∏—Ç—å —Å sh (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ)\nfunction IGS.FormItemInfo(ITEM, pl)\n\treturn {\n\t\t[\"–ö–∞—Ç–µ–≥–æ—Ä–∏—è\"]  = ITEM:Category(),\n\t\t[\"–î–µ–π—Å—Ç–≤—É–µ—Ç\"]  = IGS.TermToStr(ITEM:Term()),\n\t\t[\"–¶–µ–Ω–∞\"]       = PL_MONEY(ITEM:GetPrice(pl)),\n\t\t[\"–ë–µ–∑ —Å–∫–∏–¥–∫–∏\"] = ITEM.discounted_from and PL_MONEY(ITEM.discounted_from) or nil,\n\t\t[\"–ü–æ–∫—É–ø–∫–∏ —Å—Ç–∞–∫–∞—é—Ç—Å—è\"]  = ITEM:IsStackable() and \"–¥–∞\" or \"–Ω–µ—Ç\",\n\t}\nend\n\n-- –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ –≤–µ—Ä—Å–∏—è IGS.print. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç 2 —Ü–≤–µ—Ç–∞: –æ—Å–Ω–æ–≤–Ω–æ–π –∏ –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏–π\n-- –ï—Å–ª–∏ –ø–µ—Ä–≤—ã–º —É–∫–∞–∑–∞—Ç—å —Ü–≤–µ—Ç, —Ç–æ –±—É–¥–µ—Ç –∏–∑–º–µ–Ω–µ–Ω —Ü–≤–µ—Ç –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞\n-- –ï—Å–ª–∏ –≤—Ç–æ—Ä—ã–º —É–∫–∞–∑–∞—Ç—å —Ü–≤–µ—Ç, —Ç–æ –±—É–¥–µ—Ç –∏–∑–º–µ–Ω–µ–Ω —Ü–≤–µ—Ç –æ–±—ã—á–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞\n-- –ú–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞, –∞ –ø–µ—Ä–≤—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å nil\nfunction IGS.prints(...)\n\tlocal base_color = color_white\n\tlocal highlight_color = Color(50, 50, 255)\n\n\tlocal input = {...}\n\tif not input[1] then input[1] = highlight_color end -- –µ—Å–ª–∏ –∫—Ç–æ-—Ç–æ —Ö–æ—á–µ—Ç –ø–æ–º–µ–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞\n\tif istable( input[2] ) then base_color      = input[2] table.remove(input, 2) end\n\tif istable( input[1] ) then highlight_color = input[1] table.remove(input, 1) end\n\n\tlocal output = {}\n\n\tfor i, psc in ipairs(input) do\n\t\toutput[#output + 1] = (i % 2 == 0) and highlight_color or base_color\n\t\toutput[#output + 1] = psc\n\tend\n\n\toutput[#output + 1] = \"\\n\"\n\tMsgC(Color(50, 200, 255), \"[IGS] \", unpack(output))\nend\n\n-- –†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è: https:\/\/file.def.pm\/Jw9E7j7a.jpg\n-- IGS.prints(\"–û–¥–∏–Ω–æ—á–Ω—ã–π —Ç–µ–∫—Å—Ç –±–∞–∑–æ–≤–æ–≥–æ (–±–µ–ª–æ–≥–æ) —Ü–≤–µ—Ç–∞\")\n-- IGS.prints(Color(200, 50, 50), \"–í—ã–¥–µ–ª–µ–Ω–Ω—ã–π —Ü–≤–µ—Ç–æ–º —Ç–µ–∫—Å—Ç\")\n-- IGS.prints(\"–æ–±—ã—á–Ω—ã–π, \", \"–≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π, \", \"–æ–±—ã—á–Ω—ã–π, \", \"–≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π\")\n-- IGS.prints(\"\", \"–≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π, \", \"–æ–±—ã—á–Ω—ã–π, \", \"–≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π, \", \"–æ–±—ã—á–Ω—ã–π\")\n-- IGS.prints(Color(150, 150, 150), \"–æ–±—ã—á–Ω—ã–π, \", \"–≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π —Ü–≤–µ—Ç–Ω–æ–π, \", \"–æ–±—ã—á–Ω—ã–π, \", \"–≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π\")\n-- IGS.prints(Color(150, 150, 150), Color(255, 50, 50), \"–æ–±—ã—á–Ω—ã–π, –Ω–æ –∫—Ä–∞—Å–Ω—ã–π, \", \"–≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π —Å–µ—Ä—ã–π, \", \"–∫—Ä–∞—Å–Ω—ã–π, \", \"—Å–µ—Ä—ã–π\")\n-- IGS.prints(nil, Color(255, 50, 50), \"–æ–±—ã—á–Ω—ã–π, –Ω–æ –∫—Ä–∞—Å–Ω—ã–π, \", \"–≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç, \", \"–æ–±—ã—á–Ω—ã–π, \", \"–≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π\")\n\n-- #deprecated 01.09.2024, not used\nfunction IGS.print(...)\n\tlocal args = {...}\n\tif not IsColor(args[1]) then\n\t\ttable.insert(args,1,color_white)\n\tend\n\n\targs[#args] = args[#args] .. \"\\n\"\n\tMsgC(Color(50,200,255), \"[IGS] \", unpack(args))\nend\n\nfunction IGS.dprint(...)\n\tif IGS.DEBUG then\n\t\tIGS.prints(...)\n\tend\nend\n\n\nfunction IGS.SignPrice(iPrice) -- 10 Alc\n\treturn math.Truncate(tonumber(iPrice),2) .. \" \" .. IGS.C.CURRENCY_SIGN\nend\n\nPL_MONEY = PLUR(IGS.C.CurrencyPlurals)\nPL_DAYS  = PLUR({\"–¥–µ–Ω—å\", \"–¥–Ω—è\", \"–¥–Ω–µ–π\"})\n\n-- #TODO: –û–ë–†–ê–¢–ù–ê–Ø –°–û–í–ú–ï–°–¢–ò–ú–û–°–¢–¨. –ù–ï –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤ core.\n-- https:\/\/forum.gm-donate.net\/t\/cryptos-igs\/1461\/6\nPL_IGS = PL_MONEY\n", "igs\/objects\/shop_item.lua":"setmetatable(IGS,{\n\t__call = function(self,...)\n\t\treturn self.AddItem(...)\n\tend\n})\n\n\n--[[-------------------------------------------------------------------------\n\t–ú–ê–ö–°–ò–ú–ê–õ–¨–ù–û–ï –ö–û–õ-–í–û –£–õ–£–ß–®–ï–ù–ò–ô 255\n---------------------------------------------------------------------------]]\n\nlocal STORE_ITEM = MT_IGSItem or {}\nSTORE_ITEM.__index = STORE_ITEM\nMT_IGSItem = STORE_ITEM\n\nlocal function set(self,var,val)\n\tself[var] = val\n\treturn self\nend\n\n\n--[[-------------------------------------------------------------------------\n\tGET values (–¥–ª—è —Ç–µ—Ö –∑–Ω–∞—á–µ–Ω–∏–π, —á—Ç–æ –Ω–µ–ª—å–∑—è Set)\n---------------------------------------------------------------------------]]\nfunction STORE_ITEM:Name()\n\treturn self.name\nend\n\nfunction STORE_ITEM:UID()\n\treturn self.uid\nend\n\nfunction STORE_ITEM:ID()\n\treturn self.id\nend\n\n-- VIP, Huntsman Knifes. –ü—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ GROUP:AddItem\nfunction STORE_ITEM:Group()\n\treturn self.group\nend\n\n--[[-------------------------------------------------------------------------\n\tSET\/GET values\n---------------------------------------------------------------------------]]\n-- Double —Ü–µ–Ω–∞ —Ç–æ–≤–∞—Ä–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–π –≤–∞–ª—é—Ç–µ (–Ω–µ –∞–≤—Ç–æ–¥–æ–Ω–∞—Ç–∞)\nfunction STORE_ITEM:SetPrice(iPrice)\n\treturn set(self,\"price\",iPrice)\nend\n\n-- TODO –£–°–¢–ê–†–ï–õ–û. –ë–£–î–ï–¢ –£–î–ê–õ–ï–ù–û –í –ë–õ–ò–ñ–ê–ô–®–ò–• –í–ï–†–°–ò–Ø–•\n-- –ü–æ–¥—Ä–æ–±–Ω–µ–µ: https:\/\/forum.gm-donate.net\/t\/kak-sdelat-skidku-na-moder-esli-u-igroka-vip\/1441\/18?u=gmd\nfunction STORE_ITEM:Price()\n\treturn self.price\nend\n\n\n-- function(pl, self) return pl:IsUserGroup(\"vip\") and 50 end\n-- –µ—Å–ª–∏ return –Ω–∏—á–µ–≥–æ –Ω–µ –≤–µ—Ä–Ω—É–ª, —Ç–æ –±—É–¥–µ—Ç —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ü–µ–Ω–∞\nfunction STORE_ITEM:SetGetPrice(fGetPrice)\n\treturn set(self,\"getprice\",fGetPrice)\nend\n\nfunction STORE_ITEM:GetPrice(pl)\n\tlocal price_override = hook.Run(\"IGS.ItemPriceOverride\", self, pl)\n\tif price_override then return price_override end\n\n\tlocal getprice = self.getprice and self.getprice(pl, self)\n\treturn getprice or self.price\nend\n\n-- –°–±—Ä–∞—Å—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–µ, –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞—Ç—å bAppand\nfunction STORE_ITEM:SetDescription(sDesc,bAppend)\n\treturn set(self,\"description\",bAppend and (self:Description() .. sDesc) or sDesc)\nend\n\nfunction STORE_ITEM:Description()\n\treturn self.description\nend\n\n-- –°—Å—ã–ª–∫–∞ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É –∏–∫–æ–Ω–∫–∏ —Ç–æ–≤–∞—Ä–∞ 1:1. –ñ–µ–ª–∞—Ç–µ–ª—å–Ω–æ –º–∏–Ω–∏–º—É–º 100 px\n-- –ò–ª–∏ –∂–µ –ø—É—Ç—å –∫ –º–æ–¥–µ–ª—å–∫–µ, –Ω–æ —Ç–æ–≥–¥–∞ –≤—Ç–æ—Ä—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º —É–∫–∞–∑–∞—Ç—å true\nfunction STORE_ITEM:SetIcon(sIcon, sMode)\n\treturn CLIENT and set(self,\"icon\",{\n\t\ticon = sIcon,\n\t\tmode = sMode,\n\t}) or self\nend\n\nfunction STORE_ITEM:ICON()\n\tif self.icon then\n\t\treturn self.icon[\"icon\"], self.icon[\"mode\"]\n\tend\nend\n\n-- –¶–≤–µ—Ç –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏—Ç–µ–º–∞ –≤ —Å–ø–∏—Å–∫–µ\nfunction STORE_ITEM:SetHighlightColor(color)\n\treturn CLIENT and set(self,\"highlight\",color) or self\nend\n\nfunction STORE_ITEM:GetHighlightColor()\n\treturn self.highlight\nend\n\n-- –ü–µ—Ä–º–∞–ø—É—à–∫–∏, –ø—Ä–∞–≤–∞, –≥—Ä—É–ø–ø—ã, —É—Ä–æ–≤–Ω–∏\nfunction STORE_ITEM:SetCategory(sCat)\n\treturn set(self,\"category\",sCat)\nend\n\nfunction STORE_ITEM:Category()\n\treturn self.category\nend\n\n-- –°—Ä–æ–∫ –≤ –¥–Ω—è—Ö, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –≤—ã–¥–∞–µ—Ç—Å—è —É—Å–ª—É–≥–∞. 0 –µ—Å–ª–∏ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–∞—è. nil, –µ—Å–ª–∏ –≤–µ—á–Ω–∞—è\nfunction STORE_ITEM:SetTerm(iDays)\n\treturn set(self,\"termin\",iDays)\nend\n\nfunction STORE_ITEM:SetPerma()\n\treturn self:SetTerm(nil)\nend\n\nfunction STORE_ITEM:Term()\n\treturn self.termin\nend\n\n-- –î–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –º—É–ª—å—Ç–∏–ø–æ–∫—É–ø–∫–∏. –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –ª–∏–º–∏—Ç–∞ –ø—Ä–æ–ø–æ–≤, –ø–∞—Ç—Ä–æ–Ω–æ–≤ –ø—Ä–∏ —Å–ø–∞–≤–Ω–µ –∏ —Ç.–¥.\nfunction STORE_ITEM:SetStackable(b)\n\treturn set(self,\"stackable\",b ~= false) -- nil = true; 1 = true; true = true; false = false\nend\n\nfunction STORE_ITEM:IsStackable()\n\treturn self.stackable\nend\n\n-- –ù—É–∂–Ω–∞ –ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–∫—É–ø–∫–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç—Å–∞–π–¥–µ? (–ë—É–¥–µ—Ç –≤ IGS.PlayerPurchases(ply))\nfunction STORE_ITEM:SetNetworked(b)\n\treturn set(self,\"networked\",b ~= false)\nend\n\n-- –ë–∞–Ω–Ω–µ—Ä —Ç–æ–≤–∞—Ä–∞. –ë—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω –ø–æ–¥ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ —Ç–æ–≤–∞—Ä–µ. –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ä–∞–∑–º–µ—Ä 1000—Ö400\nfunction STORE_ITEM:SetImage(sUrl)\n\treturn set(self,\"image_url\",sUrl)\nend\n\nfunction STORE_ITEM:IMG()\n\treturn self.image_url\nend\n\nfunction STORE_ITEM:SetCanSee(func_or_bool)\n\treturn set(self, \"cansee\", func_or_bool)\nend\n\nfunction STORE_ITEM:CanSee(pl)\n\tif self.cansee ~= nil then\n\t\tif type(self.cansee) == \"boolean\" then\n\t\t\treturn self.cansee\n\t\tend\n\t\treturn self.cansee(pl) ~= false\n\tend\n\treturn true\nend\n\n-- –ù–µ–ª—å–∑—è –∫—É–ø–∏—Ç—å, –Ω–æ –º–æ–∂–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —Å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è.\n-- –ü–æ–ª–µ–∑–Ω–æ, —á—Ç–æ–±—ã \"—É–¥–∞–ª—è—Ç—å\" –Ω–µ–Ω—É–∂–Ω—ã–µ, –Ω–æ –µ—â–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —É –ª—é–¥–µ–π –∏—Ç–µ–º—ã.\n-- #deprecated. Use SetCanSee instead\nfunction STORE_ITEM:SetHidden(b)\n\treturn self:SetCanSee(function() return b ~= false end)\nend\n\n-- #depecated\nfunction STORE_ITEM:IsHidden()\n\tIGS.prints(\"–§–£–ù–ö–¶–ò–Ø \", \"ITEM:IsHidden()\", \" –£–°–¢–ê–†–ï–õ–ê. –ò–°–ü–û–õ–¨–ó–£–ô–¢–ï \", \"ITEM:CanSee(pl)\")\n\treturn self:CanSee(CLIENT and LocalPlayer())\nend\n\n-- –î–ª—è —É–¥–æ–±–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –∏—Ç–µ–º—É –≤–º–µ—Å—Ç–æ ITEM.key = val (–ø–æ–ª–µ–∑–Ω–æ –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–π, —Ç–∏–ø–∞ GROUP:Add(ITEM))\nfunction STORE_ITEM:SetMeta(key, value)\n\tif (not self.meta) then self.meta = {} end\n\tself.meta[key] = value\n\treturn self\nend\n\nfunction STORE_ITEM:GetMeta(key)\n\treturn self.meta and self.meta[key]\nend\n\nfunction STORE_ITEM:SetDiscountedFrom(i) -- internal\n\treturn set(self,\"discounted_from\", i)\nend\n\n-- function STORE_ITEM:DiscountedFrom()\n-- \treturn self.discounted_from\n-- end\n\n\n\n--[[-------------------------------------------------------------------------\n\t–§—É–Ω–∫—Ü–∏–∏\n---------------------------------------------------------------------------]]\n-- —Ñ—É–Ω–∫—Ü–∏–∏ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∏–≥—Ä–æ–∫\n-- –î–æ–ª–∂–Ω–∞ –≤–µ—Ä–Ω—É—Ç—å –û–®–ò–ë–ö–£ (—Å—Ç—Ä–æ–∫—É) –∏–ª–∏ nil\/false, –µ—Å–ª–∏ –≤—Å–µ –æ–∫\nfunction STORE_ITEM:SetCanBuy(fCallback)\n\treturn SERVER and set(self,\"canbuy\",fCallback) or self\nend\n\n-- –ü–æ—Å–ª–µ —É–¥–∞—á–Ω–æ–π –ø–æ–∫—É–ø–∫–∏ –ø–µ—Ä–µ–¥–∞–µ—Ç –≤ –∫–∞–ª–ª–±—ç–∫ –∏–≥—Ä–æ–∫–∞\nfunction STORE_ITEM:SetOnBuy(fCallback)\n\treturn SERVER and set(self,\"onbuy\",fCallback) or self\nend\n\n-- \"–£—Å—Ç–∞–Ω–æ–≤—â–∏–∫\" —É—Å–ª—É–≥–∏. –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è —Ñ—É–Ω–∫—Ü–∏—è, —á—Ç–æ–±—ã –Ω–µ –æ–≤–µ—Ä—Ä–∞–π–¥–∏—Ç—å :SetOnActivate\n-- –û—Å—Ç–æ—Ä–æ–∂–Ω–µ–µ –≤ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Å :SetValidator\nfunction STORE_ITEM:SetInstaller(fCallback)\n\treturn SERVER and set(self,\"installer\",fCallback) or self\nend\n\n-- –ö–∞–∫ –∏ SetCanBuy, –Ω–æ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è\nfunction STORE_ITEM:SetCanActivate(fCallback)\n\treturn SERVER and set(self,\"canactivate\",fCallback) or self\nend\n\n-- –î–ª—è –≤—ã–¥–∞—á–∏ –±–æ–Ω—É—Å–æ–≤ etc. –ò–≥—Ä–æ–∫ –≤ –∫–∞–ª–ª–±—ç–∫–µ\n-- –í—ã–ø–æ–ª–Ω—è—Ç—å —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Ä–µ–∞–ª—å–Ω–æ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∏–≥—Ä–æ–∫–æ–º –∏–ª–∏ –≤—ã–¥–∞—á–µ —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å,\n-- –∞ –Ω–µ –∞–≤—Ç–æ–≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–∏ etc\nfunction STORE_ITEM:SetOnActivate(fCallback)\n\treturn SERVER and set(self,\"onactivate\",fCallback) or self\nend\n\n-- –ï—Å–ª–∏ fChecker –≤–µ—Ä–Ω–µ—Ç false, —Ç–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è installer\nfunction STORE_ITEM:SetValidator(fChecker)\n\treturn SERVER and set(self,\"validator\",fChecker) or self\nend\n\nif SERVER then\n\tfunction STORE_ITEM:Setup(pl) -- –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è\n\t\tif self.installer then\n\t\t\tself.installer(pl)\n\t\tend\n\tend\n\n\tfunction STORE_ITEM:OnActivate(pl) -- –ø—É–±–ª–∏—á–Ω–∞—è\n\t\tself:Setup(pl)\n\n\t\tif self.onactivate then\n\t\t\tself.onactivate(pl)\n\t\tend\n\tend\n\n\t-- –ê–∫—Ç–∏–≤–∞—Ü–∏—è\n\t-- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç boolErr –∏ errMsg\n\tfunction STORE_ITEM:CanActivate(pl, iInvId)\n\t\tif (not self:IsStackable() and pl:HasPurchase( self:UID() )) then\n\t\t\treturn false,\"–£—Å–ª—É–≥–∞ —É–∂–µ –∞–∫—Ç–∏–≤–Ω–∞\"\n\t\tend\n\n\t\tlocal canActivate,err = hook.Run(\"IGS.CanPlayerActivateItem\", pl, self, iInvId)\n\t\tif canActivate ~= nil then\n\t\t\treturn canActivate,err\n\t\tend\n\n\t\tif self.canactivate then\n\t\t\tlocal er = self.canactivate(pl, iInvId)\n\t\t\tif er then\n\t\t\t\treturn false,er\n\t\t\tend\n\t\tend\n\n\t\treturn true\n\tend\n\n\t-- –ü–æ–∫—É–ø–∫–∞\n\tfunction STORE_ITEM:CanBuy(pl)\n\t\tlocal canBuy,err = hook.Run(\"IGS.CanPlayerBuyItem\", pl, self)\n\t\tif canBuy ~= nil then\n\t\t\treturn canBuy,err\n\t\tend\n\n\t\tif self.canbuy then\n\t\t\tlocal er = self.canbuy(pl)\n\t\t\tif er then -- –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å SetCanBuy\n\t\t\t\treturn false,er\n\t\t\tend\n\t\tend\n\n\t\treturn true\n\tend\n\tfunction STORE_ITEM:Buy(pl)\n\t\tif self.onbuy then\n\t\t\tself.onbuy(pl)\n\t\tend\n\tend\n\n\t-- –†–∞–∑–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏\n\tfunction STORE_ITEM:IsValid(pl)\n\t\tif self.validator then\n\t\t\treturn self.validator(pl)\n\t\tend\n\tend\nend\n\n\n--[[-------------------------------------------------------------------------\n\tMISC\n---------------------------------------------------------------------------]]\n-- –í—Å—Ç–∞–≤–∫–∞ —ç—Ç–æ–≥–æ –∏—Ç–µ–º–∞ –≤ —Ç–∞–±–ª–∏—Ü—É –ø–æ–¥ —É–∫–∞–∑–∞–Ω–Ω—ã–º –∫–ª—é—á–æ–º\n-- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–æ–¥—É–ª–µ–π –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –∫–æ–¥–∞\n-- –î–æ:    https:\/\/img.qweqwe.ovh\/1494247121142.png\n-- –ü–æ—Å–ª–µ: https:\/\/img.qweqwe.ovh\/1494247134028.png\nfunction STORE_ITEM:Insert(to, key)\n\tto[key] = to[key] or {}\n\tif not table.HasValue(to[key],self) then\n\t\ttable.insert(to[key], self)\n\tend\n\treturn key\nend\n\n\n-- –î–æ–ª–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ —Ö—É–∫–∏,\n-- –≥–¥–µ –ø–µ—Ä–≤—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –≤ –∫–æ–ª–±–µ–∫–µ –∏–¥–µ—Ç –∏–≥—Ä–æ–∫\n-- ITEM:AddHook(\"PlayerLoadout\", funciton(pl) pl:GiveAmmos() end)\nfunction STORE_ITEM:AddHook(sHook, fCallback)\n\tlocal uid = self:UID()\n\thook.Add(sHook, \"item.\" .. uid, function(pl, ...)\n\t\tif pl:HasPurchase(uid) then\n\t\t\treturn fCallback(pl, ...)\n\t\tend\n\tend)\n\treturn self\nend\n\nfunction STORE_ITEM:AddServerHook(sHook, fCallback)\n\treturn SERVER and self:AddHook(sHook, fCallback) or self\nend\n\nfunction STORE_ITEM:AddClientHook(sHook, fCallback)\n\treturn CLIENT and self:AddHook(sHook, fCallback) or self\nend\n\n--[[-------------------------------------------------------------------------\n\tCORE\n---------------------------------------------------------------------------]]\nfunction IGS.Item(sName, sUID)\n\treturn setmetatable({\n\t\tname = sName,\n\t\tuid  = sUID,\n\t\t-- id   = ,\n\t\tdescription = \"\",\n\t\ttermin = 0 -- –µ—Å–ª–∏ –Ω–µ –∏–∑–º–µ–Ω–∏—Ç—å, —Ç–æ —É—Å–ª—É–≥–∞ –Ω–µ –¥–æ–±–∞–≤–∏—Ç—Å—è –≤ –ø–æ–∫—É–ø–∫–∏. –¢–æ–ª—å–∫–æ –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏\n\t}, STORE_ITEM)\nend\n\n\n\nIGS.ITEMS = IGS.ITEMS or {\n\tSTORED = {},\n\tMAP    = {},\n}\n\nfunction IGS.AddItem(sName, sUID, iPrice)\n\tsUID = sUID:lower()\n\n\t-- –ü–æ–ª–µ –ë–î 32. –ù–æ —Å \"P: \" UID –Ω–∞–¥–æ —Å–æ–∫—Ä–∞—â–∞—Ç—å\n\t-- P: entity_hpwand_spell_simple_wand\n\tif #sUID > 28 then\n\t\tIGS.prints(Color(250,20,20), \"\",\n\t\t\t\"UID \", sUID, \" –∏–º–µ–µ—Ç –¥–ª–∏–Ω—É —Å–≤—ã—à–µ 28 —Å–∏–º–≤–æ–ª–æ–≤, —á—Ç–æ –Ω–µ –¥–æ–ø—É—Å–∫–∞–µ—Ç—Å—è\\n\" ..\n\t\t\t\"–ü—Ä–∏—á–∏–Ω–æ–π —Ç–∞–∫–∂–µ –º–æ–≥—É—Ç —Å—Ç–∞—Ç—å –∫–∏—Ä–∏–ª–ª–∏—á–µ—Å–∫–∏–µ (—Ä—É—Å—Å–∫–∏–µ) –∏–ª–∏ –∏–Ω—ã–µ (emoji) —Å–∏–º–≤–æ–ª—ã.\\n\" ..\n\t\t\t\"UniqueID –ø—Ä–µ–¥–º–µ—Ç–∞ –¥–æ–ª–∂–µ–Ω —Å–æ—Å—Ç–æ—è—Ç—å –∏–∑ –º–∞–ª–µ–Ω—å–∫–∏—Ö –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö (–ª–∞—Ç–∏–Ω—Å–∫–∏—Ö) –±—É–∫–≤ –±–µ–∑ –ø—Ä–æ–±–µ–ª–æ–≤ –∏ –±—ã—Ç—å –∫–æ—Ä–æ—á–µ 28 —Å–∏–º–≤–æ–ª–æ–≤\"\n\t\t)\n\t\t-- return -- –∏–∑-–∑–∞ —ç—Ç–æ–≥–æ –≤ –∫–æ–Ω—Å–æ–ª—å –≤—ã–ª–µ–∑–µ—Ç –æ—à–∏–±–∫–∞, —Ç.–µ. –Ω–µ –≤–µ—Ä–Ω–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç\n\n\t\tlocal old = sUID\n\t\tsUID = old:sub(1, 28)\n\t\tIGS.prints(\"UID \", old, \" —Å–æ–∫—Ä–∞—â–µ–Ω –¥–æ \", sUID)\n\tend\n\n\t-- –ó–∞—â–∏—Ç–∞ –æ—Ç —Å–±–∏–≤–∞–Ω–∏—è –∞–π–¥–∏—à–Ω–∏–∫–æ–≤ –∏–∑-–∑–∞ —Ä–µ—Ñ—Ä–µ—à–∞ —Ñ–∞–π–ª–∞ —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –∏—Ç–µ–º–æ–≤\n\t-- –ß—Ç–æ–±—ã —Å—á–µ—Ç—á–∏–∫ –Ω–µ –Ω–∞–±–∏–≤–∞–ª—Å—è\n\tlocal ITEM = IGS.ITEMS.MAP[sUID]\n\tif ITEM then\n\t\tITEM:SetPrice(iPrice or ITEM.price) -- –æ–±–Ω–æ–≤–ª—è–µ–º —Ü–µ–Ω—É, –≤–¥—Ä—É–≥ –∏–∑–º–µ–Ω–∏–ª–∞—Å—å\n\t\tITEM.name = sName -- –∏ –∏–º—è\n\n\t\treturn ITEM\n\tend\n\n\tlocal t = IGS.Item(sName, sUID)\n\tt.id = #IGS.ITEMS.STORED + 1\n\n\tif iPrice then\n\t\tt:SetPrice(iPrice)\n\tend\n\n\tIGS.ITEMS.MAP[t.uid]   = t\n\tIGS.ITEMS.STORED[t.id] = t -- just insert\n\n\treturn t\nend\n\n\nlocal null = IGS.Item(\"null\", \"null\"):SetPrice(0)\n\t:SetDescription(\"–≠—Ç–æ—Ç –ø—Ä–µ–¥–º–µ—Ç, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –∫–æ–≥–¥–∞-—Ç–æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª –∏–ª–∏ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–∞ –¥—Ä—É–≥–æ–º —Å–µ—Ä–≤–µ—Ä–µ, –Ω–æ –Ω–µ –∑–¥–µ—Å—å\")\n\t:SetIcon(\"http:\/\/i.imgur.com\/NfpcFdy.png\")\n\t:SetImage(\"http:\/\/i.imgur.com\/32iTOFi.jpg\")\n\t:SetCanBuy(function() return \"–≠—Ç–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–µ—Ç. –ö–∞–∫ –≤—ã –Ω–∞—à–ª–∏ –µ–≥–æ?\" end)\n\t:SetCanActivate(function() return \"–≠—Ç–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–µ—Ç. –ú–æ–∂–µ—Ç–µ —É–Ω–∏—á—Ç–æ–∂–∏—Ç—å –µ–≥–æ\" end) -- –Ω–∞–ø—Ä–∏–º–µ—Ä –∫—É–ø–∏–ª –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å, –∞ –ø–æ—Ç–æ–º uid —Å–º–µ–Ω–∏–ª—Å—è\n\t:SetCanSee(false) -- —á—Ç–æ–±—ã –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞–ª—Å—è –≤ –º–∞–≥–∞–∑–∏–Ω–µ\n\nnull.isnull = true -- –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤–æ –≤—Ä–µ–º—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏\nnull.id = 0 -- –Ω–∞ –≤—Å—è–∫–∏–π\n\n-- IGS.NULL = null -- –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± —Å—Ä–∞–≤–Ω–µ–Ω–∏—è\n\nfunction IGS.GetItem(id_or_uid) -- AKA ItemExists\n\treturn IGS.ITEMS.STORED[id_or_uid] or IGS.ITEMS.MAP[id_or_uid]\nend\n\nfunction IGS.GetItemByUID(sUID)\n\treturn IGS.ITEMS.MAP[sUID:lower()] or null\nend\n\nfunction IGS.GetItems()\n\treturn IGS.ITEMS.STORED\nend\n", "igs\/dependencies\/permasents.lua":"--[[-------------------------------------------------------------------------\n\t–î–ª—è –≤–µ–± –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç PermaProps –∞–¥–¥–æ–Ω —Å –≤–æ—Ä–∫—à–æ–ø–∞,\n\t–ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ InitPostEntity, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–ª—å–∑—è –≤—ã–∑–≤–∞—Ç—å –ø–æ—Å–ª–µ –≤–µ–± –∑–∞–≥—Ä—É–∑–∫–∏\n\n\t–í–æ–æ–±—â–µ-—Ç–æ –º–æ–∂–Ω–æ, –Ω–æ —è —Ä–µ—à–∏–ª —Ç–∞–∫\n---------------------------------------------------------------------------]]\n\nlocal function getIndex()\n\treturn util.JSONToTable(cookie.GetString(\"perma_index\", \"\")) or {}\nend\n\nlocal function updateIndex(uid, class)\n\tlocal map = getIndex()\n\tmap[uid] = class\n\tcookie.Set(\"perma_index\", util.TableToJSON(map))\nend\n\nlocal function SpawnSent(class, pos, ang)\n\tlocal ent = ents.Create(class)\n\tent:SetPos(pos)\n\tent:SetAngles(ang)\n\tent:Spawn()\n\tent:Activate()\n\n\tlocal phys = ent:GetPhysicsObject()\n\tif phys:IsValid() then\n\t\tphys:EnableMotion(false)\n\tend\n\n\treturn ent\nend\n\n\nfunction IGS.PermaSaveFeature(class)\n\tproperties.Add(class .. \"_perma_add\", {\n\t\tMenuLabel = \"–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞ –∫–∞—Ä—Ç–µ\",\n\t\tOrder = 855,\n\t\tMenuIcon = \"icon16\/bullet_disk.png\",\n\n\t\tFilter = function(self, ent, pl)\n\t\t\treturn IsValid(ent) and pl:IsSuperAdmin() and ent:GetClass() == class\n\t\tend,\n\t\tAction = function(self, ent)\n\t\t\tself:MsgStart()\n\t\t\t\tnet.WriteEntity( ent )\n\t\t\tself:MsgEnd()\n\t\tend,\n\t\tReceive = function(self, length, pl)\n\t\t\tlocal ent = net.ReadEntity()\n\t\t\tif not self:Filter(ent, pl) then return end\n\n\t\t\tif ent.permaSentUID then\n\t\t\t\tpl:ChatPrint(\"–≠—Ç–∞ —ç–Ω—Ç–∏—Ç–∏ —É–∂–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞. –£–¥–∞–ª–∏—Ç–µ –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∑–∞–Ω–æ–≤–æ, –µ—Å–ª–∏ —Ö–æ—Ç–∏—Ç–µ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å\")\n\t\t\t\treturn\n\t\t\tend\n\n\t\t\tlocal uid = math.random(0xFFFF)\n\t\t\tcookie.Set(\"perma_\" .. class .. \"_\" .. uid, util.TableToJSON({ent:GetPos(), ent:GetAngles()}))\n\t\t\tpl:ChatPrint(\"–ü–æ–∑–∏—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –ø–æ–¥ UID \" .. uid)\n\t\t\tent.permaSentUID = uid\n\n\t\t\tupdateIndex(uid, class)\n\t\tend\n\t})\n\n\tproperties.Add(class .. \"_perma_delete\", {\n\t\tMenuLabel = \"–£–¥–∞–ª–∏—Ç—å —Å –∫–∞—Ä—Ç—ã\",\n\t\tOrder = 856,\n\t\tMenuIcon = \"icon16\/bin_closed.png\",\n\n\t\tFilter = function(self, ent, pl)\n\t\t\treturn IsValid(ent) and pl:IsSuperAdmin() and ent:GetClass() == class\n\t\tend,\n\t\tAction = function(self, ent)\n\t\t\tself:MsgStart()\n\t\t\t\tnet.WriteEntity( ent )\n\t\t\tself:MsgEnd()\n\t\tend,\n\t\tReceive = function(self, length, pl)\n\t\t\tlocal ent = net.ReadEntity()\n\t\t\tif not self:Filter(ent, pl) then return end\n\n\t\t\tif not ent.permaSentUID then\n\t\t\t\tpl:ChatPrint(\"–≠—Ç–∞ —ç–Ω—Ç–∏—Ç–∏ –Ω–µ –ø–µ—Ä–º–∞–Ω–µ–Ω—Ç–Ω–∞—è\")\n\t\t\t\treturn\n\t\t\tend\n\n\t\t\tlocal uid  = ent.permaSentUID\n\t\t\tcookie.Set(\"perma_\" .. class .. \"_\" .. uid, nil)\n\t\t\tpl:ChatPrint(\"–û–±—ä–µ–∫—Ç —É–¥–∞–ª–µ–Ω. UID –±—ã–ª \" .. uid)\n\t\t\tent:Remove()\n\n\t\t\tupdateIndex(uid, nil)\n\t\tend\n\t})\nend\n\nif SERVER then\n\thook.Add(\"IGS.Loaded\", \"IGS.PermaSents\", function()\n\ttimer.Simple(30, function()\n\t\tfor _, ent in ipairs(ents.GetAll()) do\n\t\t\tif ent.permaSentUID then\n\t\t\t\tent:Remove()\n\t\t\tend\n\t\tend\n\n\t\tlocal map = getIndex()\n\t\tfor uid, class in pairs(map) do\n\t\t\tif scripted_ents.GetStored(class) then\n\t\t\t\tlocal dat = util.JSONToTable(cookie.GetString(\"perma_\" .. class .. \"_\" .. uid))\n\t\t\t\tlocal ent = SpawnSent(class, util.StringToType(dat[1], \"Vector\"), util.StringToType(dat[2], \"Angle\"))\n\t\t\t\tent.permaSentUID = uid\n\n\t\t\t\tIGS.dprint(\"PermaSents: –ó–∞—Å–ø–∞–≤–Ω–∏–ª–∏ \", class)\n\t\t\telse\n\t\t\t\tIGS.dprint(\"PermaSents: \", class, \" –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ\")\n\t\t\tend\n\t\tend\n\tend)\n\tend)\nend\n", "igs\/dependencies\/stack.lua":"local link = {}\nlocal mt = {\n\t__index = link,\n}\n\nfunction link:length()\n\treturn self.tail - self.head + 1\nend\n\nfunction link:isempty()\n\treturn self:length() == 0\nend\n\n\nfunction link:peek()\n\treturn self.data[self.head]\nend\n\nfunction link:lpush(v)\n\tself.tail = self.tail + 1\n\tself.data[self.tail] = v\nend\n\nfunction link:rpush(v)\n\tself.head = self.head - 1\n\tself.data[self.head] = v\nend\n\nfunction link:lpop()\n\tif self.head > self.tail then return nil end\n\tlocal v = self.data[self.tail]\n\tself.data[self.tail] = nil\n\tself.tail = self.tail - 1\n\treturn v\nend\n\nfunction link:rpop()\n\tif self.head > self.tail then return nil end\n\tlocal v = self.data[self.head]\n\tself.data[self.head] = nil\n\tself.head = self.head + 1\n\treturn v\nend\n\nfunction IGStack(...)\n\treturn setmetatable({\n\t\thead = 1,\n\t\ttail = select(\"#\",...),\n\t\tdata = {...},\n\t}, mt)\nend\n\n\n-- local S = IGStack()\n-- S:lpush(1) S:lpush(2) S:lpush(3) -- 3 < 2 < 1\n-- PRINT({len = S:length(), head = S:rpop(), tail = S:lpop()}) -- 1 3\n-- S:rpush(1) S:lpush(3) S:lpush(4) -- –≤–µ—Ä–Ω—É–ª–∏, —á—Ç–æ –∑–∞–±—Ä–∞–ª–∏ –∏ –¥–æ–±–∞–≤–∏–ª–∏ —Å–ª–µ–≤–∞ 4\n-- PRINT({len = S:length(), head = S:rpop(), all = S:table()})\n", "igs\/interface\/activities\/profile.lua":"-- –ü—Ä–æ—Ñ–∏–ª—å, –≥–¥–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å –¥–æ —Å–ª–µ–¥. –±–æ–Ω—É—Å–∞, –∞ —Ç–∞–∫–∂–µ –º–µ—Å—Ç–æ –≤ —Ç–æ–ø–µ –¥–æ–Ω–∞—Ç–µ—Ä–æ–≤ –∑–∞ –º–µ—Å—è—Ü, –±–∏–∑–Ω–µ—Å –ª–µ–≤–µ–ª\n-- –ü—Ä–æ—Ç–æ—Ç–∏–ø https:\/\/pp.vk.me\/c638927\/v638927381\/1ec19\/nQnaytZDxls.jpg (–í—ã—à–ª–æ —Å–æ–≤—Å–µ–º –Ω–µ –∫–∞–∫ –∑–∞–¥—É–º–∞–Ω–æ)\n-- –°—Ç–æ–∏–º–æ—Å—Ç—å —É—Å–ª—É–≥–∏ –ø–æ —Ç–µ–∫—É—â–µ–º—É –∫—É—Ä—Å—É\n\nlocal LP\nhook.Add(\"IGS.CatchActivities\",\"profile\",function(activity,sidebar)\n\tLP = LP or LocalPlayer()\n\n\tlocal bg = sidebar:AddPage(\"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª—è\")\n\tlocal ava_bg = uigs.Create(\"Panel\", function(self)\n\t\tlocal y = 5\n\n\t\t-- –ê–≤–∞—Ç–∞—Ä\n\t\tlocal sw     = bg.side:GetWide() -- 220\n\t\tlocal margin = (sw - 184) \/ 2\n\t\tuigs.Create(\"AvatarImage\", function(ava)\n\t\t\tava:SetSize(184,184)\n\t\t\tava:SetPos(margin,y)\n\t\t\tava:SetPlayer(LP,184)\n\n\t\t\ty = y + 184\n\t\tend, self)\n\n\t\t-- –ù–∏–∫\n\t\tuigs.Create(\"DLabel\", function(nick)\n\t\t\tnick:SetSize(sw,24)\n\t\t\tnick:SetPos(0,y)\n\t\t\tnick:SetFont(\"igs.24\")\n\t\t\tnick:SetTextColor(IGS.col.HIGHLIGHTING)\n\t\t\tnick:SetText(LP:Nick())\n\t\t\tnick:SetContentAlignment(5)\n\n\t\t\ty = y + nick:GetTall()\n\t\tend, self)\n\n\t\t-- –°—Ç–∏–º–∞–π–¥–∏\n\t\tuigs.Create(\"DLabel\", function(sid)\n\t\t\tsid:SetSize(sw,18)\n\t\t\tsid:SetPos(0,y)\n\t\t\tsid:SetFont(\"igs.18\")\n\t\t\tsid:SetTextColor(IGS.col.TEXT_SOFT)\n\t\t\tsid:SetText(\"(\" .. LP:SteamID() .. \")\")\n\t\t\tsid:SetContentAlignment(5)\n\n\t\t\ty = y + sid:GetTall() + 10\n\t\tend, self)\n\n\t\tfunction self:AddRow(sName,sVal)\n\t\t\tlocal row_bg = uigs.Create(\"Panel\", self)\n\t\t\trow_bg:SetSize(sw,20) -- 20, –∫–∞–∫ –∏ —Ä–∞–∑–º–µ—Ä —à—Ä–∏—Ñ—Ç–∞\n\t\t\trow_bg:SetPos(0,y)\n\n\t\t\t-- Key\n\t\t\tlocal n = uigs.Create(\"DLabel\", function(name)\n\t\t\t\tname:SetSize(80,row_bg:GetTall())\n\t\t\t\tname:SetPos(0,0)\n\t\t\t\tname:SetFont(\"igs.17\")\n\t\t\t\tname:SetTextColor(IGS.col.TEXT_SOFT)\n\t\t\t\tname:SetText(sName)\n\t\t\t\tname:SetContentAlignment(6)\n\t\t\tend, row_bg)\n\n\t\t\t-- Value\n\t\t\tfor i,line in ipairs(string.Wrap(\"igs.18\",sVal,sw - n:GetWide() - 5)) do\n\t\t\t\tuigs.Create(\"DLabel\", function(val)\n\t\t\t\t\tval:SetSize(sw - n:GetWide() - 5,n:GetTall())\n\t\t\t\t\tval:SetPos(n:GetWide() + 5,(i - 1) * val:GetTall())\n\t\t\t\t\tval:SetFont(\"igs.18\")\n\t\t\t\t\tval:SetTextColor(IGS.col.TEXT_HARD)\n\t\t\t\t\tval:SetText(line)\n\n\t\t\t\t\ty = y + val:GetTall()\n\t\t\t\t\trow_bg:SetTall(row_bg:GetTall() + val:GetTall())\n\t\t\t\tend, row_bg)\n\t\t\tend\n\n\t\t\tself:SetTall(y + 5)\n\t\tend\n\n\t\tself:SetTall(y + 5)\n\tend)\n\n\tlocal lvl = IGS.PlayerLVL(LP)\n\tlocal mybal  = LP:IGSFunds()\n\tlocal next_lvl = not lvl and IGS.LVL.MAP[1] or lvl:GetNext()\n\n\tava_bg:AddRow(\"–°—Ç–∞—Ç—É—Å\",lvl and lvl:Name() or \"–ù–∏–∫—Ç–æ :(\")\n\tif next_lvl then\n\t\tlocal next_desc = next_lvl:Description()\n\n\t\tava_bg:AddRow(\"–°–ª–µ–¥. —Å—Ç–∞—Ç—É—Å\", next_lvl:Name() .. (next_desc and (\"\\n\\n%s\"):format(next_desc) or \"\"))\n\t\tava_bg:AddRow(\"–ù—É–∂–Ω–æ\", IGS.SignPrice(next_lvl:Cost() - IGS.TotalTransaction(LP)) )\n\tend\n\n\tbg.side:AddItem(ava_bg)\n\n\t--[[-------------------------------------------------------------------------\n\t\t–û—Å–Ω–æ–≤–Ω–∞—è —á–∞—Å—Ç—å —Ñ—Ä–µ–π–º–∞\n\t---------------------------------------------------------------------------]]\n\tuigs.Create(\"igs_table\", function(pnl)\n\t\tpnl:Dock(FILL)\n\t\tpnl:DockMargin(5,5,5,5)\n\n\t\tpnl:SetTitle(\"–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏\")\n\n\t\tlocal multisv = IGS.SERVERS.TOTAL > 1\n\t\tif multisv then\n\t\t\tpnl:AddColumn(\"–°–µ—Ä–≤–µ—Ä\",100)\n\t\telse\n\t\t\tpnl:AddColumn(\"#\",40)\n\t\tend\n\n\t\tpnl:AddColumn(\"–°—É–º–º–∞\",60)\n\t\tpnl:AddColumn(\"–ë–∞–ª–∞–Ω—Å\",60)\n\t\tpnl:AddColumn(\"–î–µ–π—Å—Ç–≤–∏–µ\")\n\t\tpnl:AddColumn(\"–î–∞—Ç–∞\",130)\n\n\t\t-- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ —Å–∞–π–¥–±–∞—Ä–µ\n\t\tIGS.GetMyTransactions(function(dat)\n\t\t\tif not IsValid(pnl) then return end -- –î–æ–ª–≥–æ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–∞–ª–∏—Å—å\n\n\t\t\tlocal bit_num_limit = 2 ^ IGS.BIT_TX - 1\n\t\t\tif #dat == bit_num_limit then\n\t\t\t\tpnl:SetTitle(\"–ü–æ—Å–ª–µ–¥–Ω–∏–µ \" .. bit_num_limit .. \" —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π\")\n\t\t\tend\n\n\t\t\tfor i,v in ipairs(dat) do\n\t\t\t\tv.note = v.note or \"-\"\n\n\t\t\t\tlocal function name_or_uid(sUid)\n\t\t\t\t\tlocal ITEM = IGS.GetItemByUID(sUid)\n\t\t\t\t\treturn ITEM.isnull and sUid or ITEM:Name()\n\t\t\t\tend\n\n\t\t\t\t-- –ï—Å–ª–∏ –ø–æ–∫—É–ø–∫–∞, —Ç–æ –ø–∏—à–µ–º –µ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –∏–ª–∏ –ø–∏—à–µ–º —Å —á–µ–º —Å–≤—è–∑–∞–Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è\n\t\t\t\tlocal note =\n\t\t\t\t\tv.note:StartWith(\"P: \") and name_or_uid(v.note:sub(4)) or\n\t\t\t\t\tv.note:StartWith(\"A: \") and (\"–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—á–µ—Ç–∞ (\" .. v.note:sub(4) .. \")\") or\n\t\t\t\t\tv.note:StartWith(\"C: \") and (\"–ö—É–ø–æ–Ω \" .. v.note:sub(4,13) .. \"...\") or\n\t\t\t\t\tv.note\n\n\t\t\t\tpnl:AddLine(\n\t\t\t\t\t-- v.id,\n\t\t\t\t\tmultisv and IGS.ServerName(v.server) or #dat - i + 1,\n\t\t\t\t\tv.sum,\n\t\t\t\t\tmath.Truncate(mybal,2), -- –Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é –∫–∞–∫, –Ω–æ –≤—Ä–µ–º–µ–Ω–∞–º–∏ –ø–æ–ª—É—á–∞–ª–∏—Å—å –æ—á–µ–Ω—å –±–æ–ª—å—à–∏–µ –∫–æ–ø–µ–π–∫–∏\n\t\t\t\t\tnote,\n\t\t\t\t\tIGS.TimestampToDate(v.date,true)\n\t\t\t\t):SetTooltip((\"%s\\n\\nID —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –≤ —Å–∏—Å—Ç–µ–º–µ: %i%s\"):format(\n\t\t\t\t\tnote,\n\t\t\t\t\tv.id,\n\t\t\t\t\tnote ~= v.note and (\"\\n–û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è –æ—Ç–º–µ—Ç–∫–∞: \" .. v.note) or \"\"\n\t\t\t\t))\n\n\t\t\t\tmybal = mybal - v.sum\n\t\t\tend\n\n\t\t\tlocal spent = IGS.isUser(LP) and (IGS.TotalTransaction(LP) - mybal) or 0\n\n\t\t\tlocal first = dat[ #dat ]\n\t\t\tava_bg:AddRow(\"## –û–ø–µ—Ä–∞—Ü–∏–π\",#dat .. \" —à—Ç.\")\n\t\t\tava_bg:AddRow(\"‚àë –û–ø–µ—Ä–∞—Ü–∏–π\",IGS.SignPrice(spent))\n\t\t\tava_bg:AddRow(\"1 –û–ø–µ—Ä–∞—Ü–∏—è\",first and IGS.TimestampToDate(first.date) or \"–ù–µ –±—ã–ª–æ\")\n\n\t\t\tIGS.AddButton(bg.side,\"–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫—É–ø–æ–Ω\",IGS.WIN.ActivateCoupon) --.button:SetActive(true)\n\n\t\t\tbg.side:AddItem(uigs.Create(\"Panel\", function(s)\n\t\t\t\ts:SetTall(5)\n\t\t\tend))\n\n\t\tend)\n\tend, bg)\n\n\tactivity:AddTab(\"–ü—Ä–æ—Ñ–∏–ª—å\",bg,\"materials\/icons\/fa32\/user.png\")\nend)\n\n-- IGS.UI()\n", "entities\/npc_igs\/cl_init.lua":"IGS.sh(\"shared.lua\")\n\n-- https:\/\/forum.gm-donate.net\/t\/igs-izmenenie-modeli-nadpisi-npc\/2268\nENT.TextAboveNPC = \"–î–æ–Ω–∞—Ç —É—Å–ª—É–≥–∏\"\n\n-- #todo —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫–æ–µ –∂–µ –¥–ª—è –ø–æ–¥–∞—Ä–∫–∞?\n\nlocal COL_TEXT = Color(255,255,255)\nlocal COL_BG   = Color(0,0,0,150)\nlocal FONT     = \"igs.40\"\n\nlocal function textPlate(text,y)\n\tsurface.SetFont(FONT)\n\tlocal tw,th = surface.GetTextSize(text)\n\tlocal bx,by = -tw \/ 2 - 10, y - 5\n\tlocal bw,bh = tw + 10 + 10, th + 10 + 10\n\n\t-- Background\n\tsurface.SetDrawColor(COL_BG)\n\tsurface.DrawRect(bx,by, bw,bh)\n\tsurface.SetDrawColor(COL_TEXT)\n\tsurface.DrawRect(bx, by + bh - 4, bw, 4)\n\n\t-- text\n\tsurface.SetTextColor(COL_TEXT)\n\tsurface.SetTextPos(-tw \/ 2,y)\n\tsurface.DrawText(text)\nend\n\nlocal function drawInfo(ent, text, dist)\n\tdist = dist or EyePos():DistToSqr(ent:GetPos())\n\n\tif dist < 60000 then\n\t\tsurface.SetAlphaMultiplier( math.Clamp(3 - (dist \/ 20000), 0, 1) )\n\n\t\tlocal _,max = ent:GetRotatedAABB(ent:OBBMins(), ent:OBBMaxs() )\n\t\tlocal rot = (ent:GetPos() - EyePos()):Angle().yaw - 90\n\t\tlocal sin = math.sin(CurTime() + ent:EntIndex()) \/ 3 + .5 -- EntIndex –¥–∞–µ—Ç —Ä–∞–∑–Ω–∏—Ü—É –≤ –¥–≤–∏–∂–µ–Ω–∏–∏\n\t\tlocal center = ent:LocalToWorld(ent:OBBCenter())\n\n\t\tcam.Start3D2D(center + Vector(0, 0, math.abs(max.z \/ 2) + 12 + sin), Angle(0, rot, 90), 0.13)\n\t\t\ttextPlate(text,15)\n\t\tcam.End3D2D()\n\n\t\tsurface.SetAlphaMultiplier(1)\n\tend\nend\n\n-- https:\/\/vk.com\/gim143836547?msgid=46147&q=—Ä–µ–Ω–¥–µ—Ä&sel=88943099\nIGS_NPC_HIDE_ON_DISTANCE = nil -- 100000\nfunction ENT:Draw()\n\tlocal dist = EyePos():DistToSqr(self:GetPos())\n\tif IGS_NPC_HIDE_ON_DISTANCE and dist > IGS_NPC_HIDE_ON_DISTANCE then return end -- –Ω–µ –æ—Ç—Ä–∏—Å–æ–≤—ã–≤–∞—Ç—å\n\n\tself:DrawModel()\n\tdrawInfo(self, self.TextAboveNPC, dist)\nend\n", "igs\/extensions\/sandbox.lua":"IGS.ITEMS.SB = IGS.ITEMS.SB or {\n\tTOOLS = {},\n\tSENTS = {},\n\tSWEPS = {},\n\tVEHS  = {}\n}\n\n\nlocal STORE_ITEM = MT_IGSItem\n\n-- –¢—É–ª—ã\nfunction STORE_ITEM:SetTool(sToolName)\n\tself.tool = self:Insert(IGS.ITEMS.SB.TOOLS, sToolName)\n\treturn self\nend\n\n-- –≠–Ω—Ç–∏—Ç–∏\nfunction STORE_ITEM:SetEntity(sEntClass)\n\tself.entity = self:Insert(IGS.ITEMS.SB.SENTS, sEntClass)\n\treturn self\nend\n\n-- –ü—É—à–∫–∏\nfunction STORE_ITEM:SetWeapon(sWepClass, tAmmo)\n\tself:SetNetworked() -- –¥–ª—è HasPurchase –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≥–∞–ª–æ—á–∫–∏\n\n\tself.ammo = tAmmo\n\tself.swep = self:Insert(IGS.ITEMS.SB.SWEPS, sWepClass)\n\treturn self\nend\n\n\nfunction STORE_ITEM:SetPlayerModel(mdl)\n\treturn self:SetMeta(\"player_model\", mdl):AddServerHook(\"PlayerSetModel\", function(pl)\n\t\tlocal override = hook.Run(\"IGS.PlayerSetModel\", pl, self)\n\t\tif override ~= false then\n\t\t\tpl:SetModel(mdl)\n\t\t\tpl:SetupHands()\n\t\t\treturn true\n\t\tend\n\tend)\nend\n\n--[[\nIGS(\"Alyx\", \"custom_model\", 300)\n\t:SetDescription(\"–í—ã –±—É–¥–µ—Ç–µ —Å–ø–∞–≤–Ω–∏—Ç—å—Å—è –≤—Å–µ–≥–¥–∞ —Å –º–æ–¥–µ–ª—å–∫–æ–π –ê–ª–∏–∫—Å\")\n\t:SetTerm(30) -- 30 –¥–Ω–µ–π\n\t:SetPlayerModel(\"models\/player\/alyx.mdl\")\n\n\n-- –ï—Å–ª–∏ —É –∏–≥—Ä–æ–∫–∞ –∫—É–ø–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å–∫–∞ alyx.mdl, —Ç–æ –≤—ã–¥–∞–≤–∞—Ç—å –µ–µ —Ç–æ–ª—å–∫–æ –∑–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏—é –±–æ–º–∂–∞\nhook.Add(\"IGS.PlayerSetModel\", \"SetPlayerModel_filter\", function(pl, ITEM)\n\tlocal mdl = ITEM:GetMeta(\"player_model\")\n\tif mdl == \"models\/player\/alyx.mdl\" and pl:Team() ~= TEAM_HOBO then\n\t\treturn false\n\tend\nend)\n--]]\n\n\nlocal prop_limiters_exists = nil -- optimization\n\nfunction STORE_ITEM:IncreasePlayerPropLimit(iAmount)\n\tprop_limiters_exists = true\n\treturn self:SetInstaller(function(pl)\n\t\tlocal current_extra = pl:GetVar(\"igs_extra_props_limit\", 0)\n\t\tpl:SetVar(\"igs_extra_props_limit\", current_extra + iAmount)\n\tend):SetMeta(\"prop_limit\", iAmount)\nend\n\nif SERVER then\n\thook.Add(\"PlayerCheckLimit\", \"IGS\", function(pl, type, current_spawned, general_limit)\n\t\tif not prop_limiters_exists or type ~= \"props\" then return end\n\n\t\tlocal extra_props_purchased = pl:GetVar(\"igs_extra_props_limit\", 0)\n\t\tlocal general_limit_reached = current_spawned >= general_limit\n\t\tlocal extra_limit_reached   = current_spawned <= extra_props_purchased + general_limit\n\n\t\t-- –ø–µ—Ä–≤–æ–µ, —á—Ç–æ–±—ã –Ω–µ –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å true –ª–∏—à–Ω–∏–π —Ä–∞–∑\n\t\tif general_limit_reached and (not extra_limit_reached) then\n\t\t\treturn true\n\t\tend\n\tend)\n\n\thook.Add(\"IGS.PlayerPurchasesLoaded\", \"IGS.LoadExtraPropsLimit\", function(pl, purchases_)\n\t\tif not purchases_ or not prop_limiters_exists then return end\n\n\t\tlocal extra = 0\n\t\tfor uid in pairs(purchases_) do\n\t\t\tlocal ITEM = IGS.GetItemByUID(uid)\n\t\t\tif ITEM:GetMeta(\"prop_limit\") then\n\t\t\t\textra = extra + ITEM:GetMeta(\"prop_limit\")\n\t\t\tend\n\t\tend\n\n\t\tif extra ~= 0 then\n\t\t\tpl:SetVar(\"igs_extra_props_limit\", extra)\n\t\tend\n\tend)\n\n\t-- hook.Add(\"PlayerCheckLimit\", \"asd\", PRINT)\nend\n\nif CLIENT then -- :SetWeapon only\nhook.Add(\"IGS.OnItemInfoOpen\", \"CheckGiveWeaponOnSpawn\", function(ITEM, fr)\n\tif not (ITEM.swep and LocalPlayer():HasPurchase(ITEM:UID())) then return end\n\n\tuigs.Create(\"DCheckBoxLabel\", function(self)\n\t\tself:Dock(TOP)\n\t\tself:DockMargin(0, 5, 0, 0)\n\t\tself:SetTall(20)\n\n\t\tlocal should_give = LocalPlayer():GetNWBool(\"igs.gos.\" .. ITEM:ID()) -- #todo UID –∏ –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç :ID()\n\t\tself:SetValue(should_give)\n\n\t\tself:SetText(\"–í—ã–¥–∞–≤–∞—Ç—å –ø—Ä–∏ —Å–ø–∞–≤–Ω–µ\")\n\t\tself.Label:SetTextColor(IGS.col.TEXT_SOFT)\n\t\tself.Label:SetFont(\"igs.15\")\n\n\t\tfunction self:OnChange(give)\n\t\t\tnet.Start(\"IGS.GiveOnSpawnWep\")\n\t\t\t\tnet.WriteIGSItem(ITEM)\n\t\t\t\tnet.WriteBool(give)\n\t\t\tnet.SendToServer()\n\t\tend\n\tend, fr.act)\nend)\n\n-- IGS.CloseUI()\n-- IGS.UI()\n-- IGS.WIN.Item(\"wep_weapon_ar2\")\n\nelse -- SV\n\tutil.AddNetworkString(\"IGS.GiveOnSpawnWep\")\n\n\tlocal function bibuid(pl, ITEM)\n\t\treturn \"igs:gos:\" .. pl:UniqueID() .. \":\" .. ITEM:UID()\n\tend\n\n\tlocal function SetShouldPlayerReceiveWep(pl, ITEM, bGive)\n\t\tpl:SetNWBool(\"igs.gos.\" .. ITEM:ID(), bGive) -- gos GiveOnSpawn\n\t\tbib.setBool(bibuid(pl, ITEM), bGive)\n\tend\n\n\tlocal function PlayerSetWantReceiveOnSpawn(pl, ITEM, bWant)\n\t\tSetShouldPlayerReceiveWep(pl, ITEM, bWant)\n\t\tIGS.Notify(pl, ITEM:Name() .. (bWant and \" \" or \" –Ω–µ \") .. \"–±—É–¥–µ—Ç –≤—ã–¥–∞–≤–∞—Ç—å—Å—è –ø—Ä–∏ —Å–ø–∞–≤–Ω–µ\")\n\tend\n\n\tlocal function GetShouldPlayerReceiveWep(pl, ITEM)\n\t\treturn bib.getBool(bibuid(pl, ITEM))\n\tend\n\n\tlocal function setActiveWeapon(pl, class)\n\t\tpl:SetActiveWeapon(pl:GetWeapon(class))\n\tend\n\n\tlocal function giveAmmo(pl, ammo)\n\t\tif not ammo then return end\n\t\tfor ammo_type, count in pairs(ammo) do\n\t\t\tpl:SetAmmo(count, ammo_type)\n\t\tend\n\tend\n\n\t-- –í—ã–¥–∞–µ—Ç –∫—É–ø–ª–µ–Ω–Ω–æ–µ –æ—Ä—É–∂–∏–µ, –µ—Å–ª–∏ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –≥–∞–ª–æ—á–∫–∞\n\t-- https:\/\/trello.com\/c\/2KJQisfJ\/488-–æ—Ä—É–∂–∏–µ-–≤—ã–¥–∞–µ—Ç—Å—è-–∏-–≤-—Ç—é—Ä—å–º–µ\n\tfunction IGS:IGS_PlayerLoadout(pl)\n\t\tfor uid in pairs(IGS.PlayerPurchases(pl) or {}) do\n\t\t\tlocal ITEM = IGS.GetItemByUID(uid)\n\t\t\tif ITEM.swep and GetShouldPlayerReceiveWep(pl, ITEM) then\n\t\t\t\tpl:Give(ITEM.swep)\n\t\t\t\tgiveAmmo(pl, ITEM.ammo)\n\t\t\tend\n\t\tend\n\tend\n\n\tnet.Receive(\"IGS.GiveOnSpawnWep\", function(_, pl)\n\t\tlocal ITEM, bWant = net.ReadIGSItem(), net.ReadBool()\n\t\tif not pl:HasPurchase(ITEM:UID()) or not ITEM.swep then return end -- –±–∞–π–ø–∞—Å\n\n\t\tPlayerSetWantReceiveOnSpawn(pl, ITEM, bWant)\n\tend)\n\n\thook.Add(\"PlayerLoadout\", \"IGS.PlayerLoadout\", function(pl)\n\t\thook.Call(\"IGS_PlayerLoadout\", IGS, pl)\n\tend)\n\n\thook.Add(\"IGS.PlayerPurchasesLoaded\", \"IGS.PlayerLoadout\", function(pl)\n\t\thook.Call(\"IGS_PlayerLoadout\", IGS, pl)\n\tend)\n\n\thook.Add(\"IGS.PlayerActivatedItem\", \"IGS.PlayerLoadout\", function(pl, ITEM)\n\t\tif ITEM.swep then\n\t\t\tPlayerSetWantReceiveOnSpawn(pl, ITEM, true) -- default give on spawn\n\t\t\thook.Call(\"IGS_PlayerLoadout\", IGS, pl)\n\n\t\t\tlocal text = \"%s —Ç–µ–ø–µ—Ä—å –±—É–¥–µ—Ç –≤—ã–¥–∞–≤–∞—Ç—å—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º —Ä–µ—Å–ø–∞–≤–Ω–µ. \" ..\n\t\t\t\"–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –≤—ã–¥–∞—á—É, \" ..\n\t\t\t\"—Ç–æ —Å–Ω–∏–º–∏—Ç–µ –≥–∞–ª–æ—á–∫—É –≤ –∫–∞—Ä—Ç–æ—á–∫–µ –ø—Ä–µ–¥–º–µ—Ç–∞ –≤ \/donate –º–µ–Ω—é\"\n\n\t\t\tpl:ChatPrint(\"‚ñº\")\n\t\t\tIGS.Notify(pl, text:format(ITEM:Name()))\n\t\t\tpl:ChatPrint(\"‚ñ≤\")\n\n\t\t\tsetActiveWeapon(pl, ITEM.swep)\n\t\t\tgiveAmmo(pl, ITEM.ammo)\n\t\tend\n\tend)\n\n\thook.Add(\"PlayerGiveSWEP\", \"IGS\", function(pl, class)\n\t\tlocal ITEM = IGS.PlayerHasOneOf(pl, IGS.ITEMS.SB.SWEPS[class]) -- hasAccess if ITEM returned\n\t\tif ITEM then\n\t\t\ttimer.Simple(.1, function() giveAmmo(pl, ITEM.ammo) end)\n\t\t\treturn true\n\t\tend\n\tend)\n\n\t-- DARKRP ONLY\n\thook.Add(\"canDropWeapon\", \"IGS\", function(pl, wep)\n\t\t-- –ü—É—à–∫–∞ –ø—Ä–æ–¥–∞–µ—Ç—Å—è –∏ —á–µ–ª –∫—É–ø–∏–ª –µ–µ\n\t\tlocal ITEM = IsValid(wep) and IGS.PlayerHasOneOf(pl, IGS.ITEMS.SB.SWEPS[wep:GetClass()])\n\t\tif ITEM then\n\t\t\treturn false\n\t\tend\n\n\t\t-- –ü—É—à–∫–∞ –Ω–µ –ø—Ä–æ–¥–∞–µ—Ç—Å—è –∏–ª–∏ —á–µ–ª –µ–µ –Ω–µ –ø–æ–∫—É–ø–∞–ª\n\t\t-- –¢.–µ. –ø–æ —Å—É—Ç–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥—Ä–æ–ø–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–∏—Ä—É–µ—Ç—Å—è –¥—Ä—É–≥–∏–º–∏ —Ö—É–∫–∞–º–∏\n\tend)\nend\n\n\n-- –ú–∞—à–∏–Ω—ã\nfunction STORE_ITEM:SetVehicle(sVehClass)\n\tself.vehicle = self:Insert(IGS.ITEMS.SB.VEHS, sVehClass)\n\treturn self\nend\n\n-- \/\\ SHARED\nif CLIENT then return end\n-- \\\/ SERVER\n\n-- print( hook.Run(\"CanTool\", player.Find(\"hell\"), AMD():GetEyeTrace(), \"rope\") )\nhook.Add(\"CanTool\",\"IGS\",function(pl, _, tool)\n\tlocal ITEM = IGS.PlayerHasOneOf(pl, IGS.ITEMS.SB.TOOLS[tool])\n\tif ITEM ~= nil then -- donate\n\t\tlocal allow = hook.Run(\"IGS.CanTool\", pl, tool)\n\t\tif allow ~= nil then return allow end\n\t\treturn tobool(ITEM)\n\tend\nend)\n\n-- –ù–∏–∂–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –º–∞—à–∏–Ω, –∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å, —á—Ç–æ–±—ã –Ω–µ —Å–ø–∞–≤–Ω–∏–ª–∏ —Ç—É—á—É. –°–µ–π—á–∞—Å —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å –ª–µ–Ω—å\nhook.Add(\"PlayerSpawnSENT\",\"IGS\",function(pl, class)\n\tlocal ITEM = IGS.PlayerHasOneOf(pl, IGS.ITEMS.SB.SENTS[class])\n\tif ITEM ~= nil then -- donate\n\t\tlocal allow = hook.Run(\"IGS.PlayerSpawnSENT\", pl, class)\n\t\tif allow ~= nil then return allow end\n\t\treturn tobool(ITEM)\n\tend\nend)\n\n\n-- –¥–ª—è HOOK_HIGH\n-- –≤—ã—à–µ 2018.11.15 –≤—ã–Ω–µ—Å –∏ –Ω–µ–º–Ω–æ–≥–æ –ø–µ—Ä–µ–ø–∏—Å–∞–ª –¥–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏\n-- –ï—Å–ª–∏ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–æ—Ä–º, —Ç–æ –∏ —Å –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–Ω—è—Ç—å\n-- 2024.08.31 –≤—ã–Ω–µ—Å —Å —Ç–∞–π–º–µ—Ä–∞ –∏ —É–±—Ä–∞–ª HOOK_HIGH –µ—â–µ —Å PlayerGiveSWEP –∏ canDropWeapon\ntimer.Simple(0, function()\n\n--[[-------------------------------------------------------------------------\n\t–ú–∞—à–∏–Ω—ã\n---------------------------------------------------------------------------]]\nlocal function getcount(pl, class)\n\treturn pl:GetVar(\"vehicles_\" .. class,0)\nend\n\nlocal function counter(pl, class, incr)\n\tpl:SetVar(\"vehicles_\" .. class, getcount(pl, class) + incr)\nend\n\n-- —Ä–∞–∑—Ä–µ—à–∞–µ–º —Å–ø–∞–≤–Ω–∏—Ç—å –æ–¥–Ω—É, –Ω–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤ –±—É–¥—É—â–µ–º —Å–¥–µ–ª–∞—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å–ø–∞–≤–Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –º–∞—à–∏–Ω\nlocal function canSpawn(pl, class)\n\treturn getcount(pl, class) < 1\nend\n\nlocal function getVehClass(veh)\n\t-- https:\/\/trello.com\/c\/l1tw7YpR\/623\n\t-- ClassOverride for scars (https:\/\/t.me\/c\/1353676159\/48545)\n\treturn (veh.IsSimfphyscar and veh:GetSpawn_List()) or veh.ClassOverride or veh:GetVehicleClass()\nend\n\n-- –°—á–∏—Ç–∞–µ–º –∑–∞—Å–ø–∞–≤–Ω–µ–Ω–Ω—ã–µ –∏ —É–¥–∞–ª–µ–Ω–Ω—ã–µ –º–∞—à–∏–Ω—ã\nhook.Add(\"PlayerSpawnedVehicle\", \"IGS\", function(pl, veh)\n\tif IGS.PlayerHasOneOf(pl, IGS.ITEMS.SB.VEHS[getVehClass(veh)]) then -- —á–µ–ª –ø–æ–∫—É–ø–∞–ª —ç—Ç—É —Ç–∞—á–∫—É, –∞ —Ç–µ–ø–µ—Ä—å —Å–ø–∞–≤–Ω–∏—Ç\n\t\tcounter(pl, getVehClass(veh), 1)\n\n\t\tveh:CallOnRemove(\"ChangeCounter\", function(ent)\n\t\t\tif not IsValid(pl) then return end\n\t\t\tcounter(pl, getVehClass(ent), -1)\n\t\tend)\n\tend\nend)\n\nhook.Add(\"PlayerSpawnVehicle\", \"IGS\", function(pl, _, class) -- model, class, table\n\tif IGS.PlayerHasOneOf(pl, IGS.ITEMS.SB.VEHS[class]) then -- –ø–æ–∫—É–ø–∞–ª –º–∞—à–∏–Ω—É\n\t\tlocal can = canSpawn(pl, class)\n\t\tif not can then\n\t\t\tIGS.Notify(pl, \"–£ –≤–∞—Å –µ—Å—Ç—å –∑–∞—Å–ø–∞–≤–Ω–µ–Ω–∞ —ç—Ç–∞ –º–∞—à–∏–Ω–∞\")\n\t\tend\n\n\t\treturn can\n\tend\nend, HOOK_HIGH)\n--[[-------------------------------------------------------------------------\n\t\/–ú–∞—à–∏–Ω—ã\n---------------------------------------------------------------------------]]\n\nend) -- timer.Simple(0\n", "igs\/core_sv.lua":"-- –ú–æ–∂–Ω–æ –∏ –∑–∞–±–∏—Ä–∞—Ç—å, —É–∫–∞–∑–∞–≤ –º–∏–Ω—É—Å–æ–≤–æ–µ —á–∏—Å–ª–æ\nlocal PLAYER = FindMetaTable(\"Player\")\nfunction PLAYER:AddIGSFunds(amount, note, callback)\n\tIGS.Transaction(self:SteamID64(),amount,note,function()\n\t\tlocal newbal = self:IGSFunds() + amount\n\t\tself:SetIGSVar(\"igs_balance\", newbal)\n\n\t\tif amount > 0 then\n\t\t\tlocal tt = IGS.TotalTransaction(self) + amount\n\t\t\tself:SetIGSVar(\"igs_total_transactions\", tt)\n\n\t\t\tself:SetIGSVar(\"igs_lvl\", IGS.LVL.GetByCost( tt ):LVL())\n\t\tend\n\n\t\tif callback then\n\t\t\tcallback(newbal)\n\t\tend\n\tend)\nend\n\n\n--[[-------------------------------------------------------------------------\n\t–ü–æ–∫—É–ø–∫–∏\n---------------------------------------------------------------------------]]\nfunction IGS.LoadPlayerPurchases(pl,cb)\n\t-- –°–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫\n\tIGS.GetPlayerPurchases(pl:SteamID64(), function(dat)\n\t\tif #dat == 0 and IsValid(pl) then\n\t\t\thook.Run(\"IGS.PlayerPurchasesLoaded\",pl)\n\t\t\tpl:SetIGSVar(\"igs_purchases\", {}) -- –¥–ª—è —Ö—É–∫–∞. –ù–∏–∂–µ –æ–ø–∏—Å–∞–Ω–æ\n\t\t\treturn\n\t\tend\n\n\t\tlocal purchases = {} -- uid = amount\n\t\tlocal networked = {} -- uid = amount (–±—ã–ª–æ i>id –¥–æ 16.02.2022, –Ω–æ –≤–µ–± –∑–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Ç—Ä–µ–±–æ–≤–∞–ª–∞ –ø–µ—Ä–µ–º–µ–Ω)\n\n\t\tfor i = 1,#dat do\n\t\t\tlocal uid = dat[i][\"Item\"]\n\t\t\tpurchases[uid] = (purchases[uid] or 0) + 1\n\n\t\t\tif IGS.GetItemByUID(uid).networked then\n\t\t\t\tnetworked[uid] = (networked[uid] or 0) + 1\n\t\t\tend\n\t\tend\n\n\t\tif IsValid(pl) then\n\t\t\t-- UID = Amount Of Purchases\n\t\t\tpl:SetVar(\"igs_purchases\",purchases)\n\n\t\t\t-- print(\"IGS.GetPlayerPurchases processed\",pl)\n\t\t\tIGS.nw.WaitForPlayer(pl, function()\n\t\t\t\t-- print(\"IGS.nw.WaitForPlayer INSIDE\",pl)\n\t\t\t\tpl:SetIGSVar(\"igs_purchases\", networked)\n\t\t\tend)\n\n\t\t\thook.Run(\"IGS.PlayerPurchasesLoaded\",pl,purchases)\n\t\tend\n\n\t\tif cb then cb(purchases) end\n\tend)\nend\n\n-- –í—ã–¥–∞–µ—Ç –ø–æ–∫—É–ø–∫—É. –ë–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è\nfunction IGS.GivePurchase(pl, sItemUID)\n\tlocal ITEM = IGS.GetItemByUID(sItemUID)\n\n\tlocal purchases = pl:GetVar(\"igs_purchases\",{})\n\tpurchases[sItemUID] = (purchases[sItemUID] or 0) + 1\n\n\tpl:SetVar(\"igs_purchases\",purchases)\n\n\tif ITEM.networked then\n\t\tlocal tab = pl:GetIGSVar(\"igs_purchases\") or {}\n\t\ttab[sItemUID] = (tab[sItemUID] or 0) + 1\n\t\tpl:SetIGSVar(\"igs_purchases\", tab)\n\tend\n\n\tITEM:OnActivate(pl)\n\treturn ITEM\nend\n\n-- –ü—Ä–∏ –ø–µ—Ä–≤–æ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø—Ä–µ–¥–º–µ—Ç–∞\n-- –í—ã–¥–∞–µ—Ç –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø–æ–∫—É–ø–∫—É.\n-- –í –∫–∞–ª–ª–±—ç–∫–µ ID –ø—Ä–µ–¥–º–µ—Ç–∞ —Å –ë–î\nfunction IGS.PlayerActivateItem(pl, sItemUID, fCallback)\n\tlocal ITEM = IGS.GetItemByUID(sItemUID)\n\n\tIGS.StoreLocalPurchase(pl:SteamID64(), sItemUID, ITEM:Term(), function(iPurchID)\n\t\tIGS.GivePurchase(pl, sItemUID)\n\t\thook.Run(\"IGS.PlayerActivatedItem\", pl, ITEM, iPurchID)\n\t\tif fCallback then fCallback(iPurchID) end\n\tend)\nend\nIGS.PlayerActivatedItem = IGS.PlayerActivateItem -- #todo –æ–±—Ä–∞—Ç–∫–∞ 2020.07.16\n\n-- –ü–æ—Å–ª–µ :CanBuy() –ø—Ä–æ–≤–µ—Ä–æ–∫ –∏ —Å–ø–∏—Å–∞–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤\nfunction IGS.PlayerPurchasedItem(pl, ITEM, cb)\n\tlocal afterBuy = function(invDbID_or_iPurchID)\n\t\tlocal id = invDbID_or_iPurchID\n\t\tITEM:Buy(pl) -- –≤–Ω—É—Ç—Ä–∏ —Ö—É–∫\n\t\thook.Run(\"IGS.PlayerPurchasedItem\", pl, ITEM, id)\n\t\tif cb then cb(id) end\n\tend\n\n\tif IGS.C.Inv_Enabled then\n\t\tIGS.AddToInventory(pl, ITEM:UID(), afterBuy)\n\telse\n\t\tIGS.PlayerActivateItem(pl, ITEM:UID(), afterBuy)\n\tend\nend\n\n\n--[[-------------------------------------------------------------------------\n\t–ö–£–ü–û–ù–´\n---------------------------------------------------------------------------]]\nlocal trans = {\n\t[\"COUP_DOESNT_EXIST\"] = \"–ö—É–ø–æ–Ω –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç!\",\n\t[\"COUP_EXPIRED\"]      = \"–°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –∫—É–ø–æ–Ω–∞ –∏—Å—Ç–µ–∫!\",\n\t[\"COUP_ACTIVATED\"]    = \"–ö—É–ø–æ–Ω —É–∂–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!\",\n}\n\n-- https:\/\/trello.com\/c\/6Oc1DykD\/312\n-- –ù–∞ –±–æ–ª—å—à–∏—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö –ø—Ä–∏ —Ä–∞–∑–¥–∞—á–µ –∫—É–ø–æ–Ω–æ–≤ –±—É–¥–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ GMD,\n-- —á—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –±–ª–æ–∫—É API\nlocal coupons_errors = setmetatable({proxy = {}},{\n\t__newindex = function(self, sCoupon, sErrorCode)\n\t\tself.proxy[sCoupon] = sErrorCode\n\n\t\ttimer.Create(\"IGS.CouponsCacheCleanup\",60,1,function()\n\t\t\ttable.Empty(self.proxy)\n\t\tend)\n\tend,\n\t__index = function(self, sCoupon)\n\t\tlocal err_code = self.proxy[sCoupon]\n\t\tif err_code then\n\t\t\treturn trans[err_code]\n\t\tend\n\tend\n})\n\nfunction IGS.PlayerActivateCoupon(pl, sCoupon, cb)\n\tcb = cb or function() end\n\n\tif coupons_errors[sCoupon] then\n\t\tcb(false, coupons_errors[sCoupon])\n\t\treturn\n\tend\n\n\tIGS.GetCoupon(sCoupon,function(c,expired,used)\n\t\tlocal err_code =\n\t\t\tnot c   and \"COUP_DOESNT_EXIST\" or\n\t\t\texpired and \"COUP_EXPIRED\" or\n\t\t\tused    and \"COUP_ACTIVATED\"\n\n\t\tif err_code then\n\t\t\tcoupons_errors[sCoupon] = err_code\n\t\t\tcb(false, coupons_errors[sCoupon])\n\t\t\treturn\n\t\tend\n\n\t\tIGS.DeactivateCoupon(pl:SteamID64(),sCoupon,function(affected)\n\t\t\tcoupons_errors[sCoupon] = \"COUP_ACTIVATED\"\n\n\t\t\tif not affected then\n\t\t\t\tcb(false, \"–ö—É–ø–æ–Ω —É–∂–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω. –ö—Å—Ç–∞—Ç–∏, —ç—Ç–æ –æ—á–µ–Ω—å(!) —Ä–µ–¥–∫–∞—è –æ—à–∏–±–∫–∞. –°–æ–æ–±—â–∏—Ç–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏, —Ç—É—Ç –¥–æ–ª–∂–Ω–∞ –±—ã–ª–∞ –≤—ã–ª–µ–∑—Ç–∏ –¥—Ä—É–≥–∞—è\")\n\t\t\t\treturn -- \/\\ –æ–¥–Ω–∞–∂–¥—ã —ç—Ç–∞ –æ—à–∏–±–∫–∞ –≤—ã–ª–µ–∑–ª–∞, –∫–æ–≥–¥–∞ —è –≤ —Ü–∏–∫–ª–µ —Å –∫–ª–∏–µ–Ω—Ç–∞ –ø—ã—Ç–∞–ª—Å—è –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –∫—É–ø–æ–Ω (https:\/\/img.qweqwe.ovh\/1487848973964.png)\n\t\t\tend -- –≤ –±–¥ –Ω–µ –∏–∑–º–µ–Ω–µ–Ω –Ω–∏ –æ–¥–∏–Ω –∫—É–ø–æ–Ω\n\n\t\t\tIGS.UpdatePlayerName(pl:SteamID64(),pl:Nick())\n\t\t\tpl:AddIGSFunds(c.Value,\"C: \" .. sCoupon,function()\n\t\t\t\tcb(true)\n\t\t\tend)\n\t\tend)\n\tend)\nend\n\n\n--[[-------------------------------------------------------------------------\n\t–ò–ù–í–ï–ù–¢–ê–†–¨\n---------------------------------------------------------------------------]]\nlocal function CreateInvStructure(pl)\n\tpl.igs_inv = {\n\t\tMAP  = {}, -- db_id, data\n\t\tLIST = {}  -- iter,  data\n\t}\nend\n\nlocal function insertInvData(pl,iId,sItem)\n\tlocal d = {\n\t\tID     = iId,\n\t\tItem   = sItem,\n\t}\n\n\tpl.igs_inv.MAP[iId] = d\n\td.listid = table.insert(pl.igs_inv.LIST,d)\nend\n\nfunction IGS.Inventory(pl,bMap)\n\treturn pl.igs_inv and pl.igs_inv[bMap and \"MAP\" or \"LIST\"]\nend\n\nlocal f = function() end\n\nfunction IGS.AddToInventory(pl,sUid,fOnFinish_)\n\tIGS.StoreInventoryItem(function(inserted_id)\n\t\tif not IGS.Inventory(pl) then\n\t\t\tCreateInvStructure(pl)\n\t\tend\n\n\t\tinsertInvData(pl,inserted_id,sUid)\n\n\t\tif fOnFinish_ then\n\t\t\tfOnFinish_(inserted_id)\n\t\tend\n\tend, pl:SteamID64(),sUid)\nend\n-- IGS.AddToInventory(AMD(),\"money_5mi\",PRINT)\n\n-- https:\/\/img.qweqwe.ovh\/1527524052957.png\nfunction IGS.LoadInventory(pl,cb)\n\tIGS.FetchInventory(function(d)\n\t\tcb = cb or f\n\t\tif #d == 0 then cb() return end\n\n\t\tCreateInvStructure(pl)\n\n\t\tfor _,v in ipairs(d) do\n\t\t\tinsertInvData(pl,v.ID,v.Item)\n\t\tend\n\n\t\tcb(pl.igs_inv)\n\tend, pl:SteamID64())\nend\n-- IGS.LoadInventory(AMD(),prt)\n\nlocal function GetPlayerInventoryItemLocally(pl, invDbID)\n\tlocal inv_map  = IGS.Inventory(pl,\"map\")\n\tlocal inv_list = IGS.Inventory(pl)\n\n\tif (not inv_map) then return false end -- —É —á–µ–ª–∞ –Ω–µ—Ç –¥–æ–Ω–∞—Ç —É—Å–ª—É–≥. –ù–∞–≤–µ—Ä–Ω –±–∞–π–ø–∞—Å, –µ—Å–ª–∏ –∑–∞–ø—Ä–æ—Å —Å –∫–ª–∏–µ–Ω—Ç–∞\n\n\tlocal t = inv_map[invDbID]\n\tif (not t) then return false end -- –ø–æ–¥—Å—É–Ω—É—Ç –ª–µ–≤—ã–π –ò–î, –∫–æ—Ç–æ—Ä—ã–π —É–∂–µ —É–¥–∞–ª–µ–Ω –∏–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª\n\n\tfunction t:Delete()\n\t\tassert(inv_map[invDbID],\"–ò—Ç–µ–º #\" .. invDbID .. \" –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç (—É–∂–µ —É–¥–∞–ª–µ–Ω?)\")\n\n\t\tinv_map[invDbID] = nil\n\t\ttable.remove(inv_list, t.listid)\n\n\t\tfor i = t.listid,#inv_list do\n\t\t\tinv_list[i].listid = i\n\t\tend\n\tend\n\n\treturn t\nend\n\nfunction IGS.DeletePlayerInventoryItemLocally(pl, invDbID)\n\tlocal t = GetPlayerInventoryItemLocally(pl, invDbID)\n\tif (not t) then return false end\n\n\tt:Delete()\n\n\treturn t\nend\n\nfunction IGS.PlayerEjectItem(cb, pl, invDbID)\n\tcb = cb or f\n\n\tlocal tRemoved = IGS.DeletePlayerInventoryItemLocally(pl, invDbID)\n\tif (not tRemoved) then -- –±–∞–π–ø–∞—Å—ã\n\t\tcb(false)\n\t\treturn\n\tend\n\n\tIGS.DeleteInventoryItem(function(ok)\n\t\tif (not ok) then -- –º–± –≤ –ø–∞–Ω–µ–ª–∏ —É–¥–∞–ª–∏–ª–∏\n\t\t\treturn cb(false)\n\t\tend\n\n\t\tlocal pos = LocalToWorld( Vector(50,0,35),Angle(0,0,0), pl:GetPos(),pl:GetAngles() )\n\t\tlocal ent = IGS.CreateGift(tRemoved.Item, pl, pos)\n\n\t\tcb(ent)\n\tend, invDbID)\nend\n\nfunction IGS.IsInventoryOverloaded(pl)\n\treturn #(IGS.Inventory(pl) or {}) >= 100\nend\n--[[-------------------------------------------------------------------------\n\t\/\/–ò–ù–í–ï–ù–¢–ê–†–¨\n---------------------------------------------------------------------------]]\n", "igs\/extensions\/darkrp.lua":"IGS.ITEMS.DRP = IGS.ITEMS.DRP or {\n\tITEMS = {},\n\tJOBS  = {}\n}\n\n\nlocal STORE_ITEM = MT_IGSItem\n\n-- –î–µ–ª–∞–µ—Ç –∏—Ç–µ–º –≤ –º–∞–≥–∞–∑–∏–Ω–µ –ø–æ–∫—É–ø–∞–µ–º—ã–º —Ç–æ–ª—å–∫–æ –∑–∞ –¥–æ–Ω–∞—Ç\n-- –≠—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —è—â–∏–∫ –æ—Ä—É–∂–∏—è, –æ—Ç–¥–µ–ª—å–Ω–∞—è –ø—É—à–∫–∞ –∏–ª–∏ –¥–∞–∂–µ –æ—Ç–¥–µ–ª—å–Ω–∞—è —ç–Ω—Ç–∏—Ç–∏\nfunction STORE_ITEM:SetDarkRPItem(sEntClass)\n\tself.dpr_item = self:Insert(IGS.ITEMS.DRP.ITEMS, sEntClass)\n\treturn self\nend\n\n-- –î–æ—Å—Ç—É–ø –∫ –ø—Ä–æ—Ñ–µ—Å—Å–∏—è–º —Ç–æ–ª—å–∫–æ —Ç–µ–º, –∫—Ç–æ –µ–µ –ø–æ–∫—É–ø–∞–ª\nfunction STORE_ITEM:SetDarkRPTeams(...)\n\t-- https:\/\/trello.com\/c\/xxGiGpb2\/319-—É–ª—É—á—à–∏—Ç—å-setdarkrpteam\n\tlocal tTeams = {...}\n\tfor i,team in ipairs(tTeams) do\n\t\tif isnumber(team) then -- –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (20.03.2019)\n\t\t\tlocal TEAM = RPExtraTeams[team]\n\t\t\tself:Insert(IGS.ITEMS.DRP.JOBS, TEAM.command)\n\t\t\ttTeams[i] = TEAM.command -- –∑–∞–º–µ–Ω—è–µ–º ENUM –Ω–∞ cmd –¥–ª—è ITEM.dpr_teams\n\t\telse -- —Å—Ç—Ä–æ–∫–∞ (team.command) https:\/\/trello.com\/c\/BcbYbAb7\/512\n\t\t\tself:Insert(IGS.ITEMS.DRP.JOBS, team)\n\t\tend\n\tend\n\tself.dpr_teams = tTeams\n\treturn self\nend\nSTORE_ITEM.SetDarkRPTeam = STORE_ITEM.SetDarkRPTeams -- –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (20.03.2019)\n\nfunction STORE_ITEM:SetDarkRPMoney(iSum)\n\tself:SetDescription(\"–ú–≥–Ω–æ–≤–µ–Ω–Ω–æ –∏ –±–µ–∑ –ø—Ä–æ–±–ª–µ–º –ø–æ–ø–æ–ª–Ω—è–µ—Ç –±–∞–ª–∞–Ω—Å –∏–≥—Ä–æ–≤–æ–π –≤–∞–ª—é—Ç—ã –Ω–∞ \" .. string.Comma(iSum) .. \" –≤–∞–ª—é—Ç—ã\")\n\tself:SetInstaller(function(pl) pl:addMoney(iSum,\"IGS\") end)\n\tself:SetStackable()\n\n\tself.dpr_money = iSum\n\treturn self\nend\n\nhook.Add(\"canBuyShipment\", \"IGS\", function(pl, tItem)\n\tlocal ITEM = IGS.PlayerHasOneOf(pl, IGS.ITEMS.DRP.ITEMS[tItem.entity])\n\tif ITEM ~= nil then -- –¥–æ–Ω–∞—Ç–Ω—ã–π –∏—Ç–µ–º\n\t\tlocal allow, message = hook.Run(\"IGS.canBuyShipment\", pl, tItem)\n\t\treturn allow or tobool(ITEM), false, message or \"–≠—Ç–æ –¥–ª—è –¥–æ–Ω–∞—Ç–µ—Ä–æ–≤ (\/donate)\"\n\tend\nend)\n\nhook.Add(\"canBuyPistol\", \"IGS\", function(pl, tItem)\n\tlocal ITEM = IGS.PlayerHasOneOf(pl, IGS.ITEMS.DRP.ITEMS[tItem.entity])\n\tif ITEM ~= nil then -- –¥–æ–Ω–∞—Ç–Ω—ã–π –∏—Ç–µ–º\n\t\tlocal allow, message = hook.Run(\"IGS.canBuyPistol\", pl, tItem)\n\t\treturn allow or tobool(ITEM), false, message or \"–≠—Ç–æ –¥–ª—è –¥–æ–Ω–∞—Ç–µ—Ä–æ–≤ (\/donate)\"\n\tend\nend)\n\n-- –≤ DarkRP.hooks –Ω–µ—Ç —Ç–∞–∫–æ–≥–æ\n-- https:\/\/img.qweqwe.ovh\/1528097550183.png\nhook.Add(\"canBuyCustomEntity\", \"IGS\", function(pl, tItem)\n\tlocal ITEM = IGS.PlayerHasOneOf(pl, IGS.ITEMS.DRP.ITEMS[tItem.ent])\n\tif ITEM ~= nil then -- –¥–æ–Ω–∞—Ç–Ω—ã–π –∏—Ç–µ–º\n\t\tlocal allow, message = hook.Run(\"IGS.canBuyCustomEntity\", pl, tItem)\n\t\treturn allow or tobool(ITEM), false, message or \"–≠—Ç–æ –¥–ª—è –¥–æ–Ω–∞—Ç–µ—Ä–æ–≤ (\/donate)\"\n\tend\nend)\n\n-- –Ω–µ—Ç suppress\n-- print(IGS.PlayerHasOneOf(AMD(), IGS.ITEMS.DRP.JOBS[TEAM_LOCK]))\nhook.Add(\"playerCanChangeTeam\", \"IGS\", function(pl, iTeam, bForce)\n\tlocal TEAM = RPExtraTeams[iTeam]\n\tlocal ITEM = IGS.PlayerHasOneOf(pl, IGS.ITEMS.DRP.JOBS[TEAM.command])\n\tif ITEM ~= nil then -- –¥–æ–Ω–∞—Ç–Ω—ã–π –∏—Ç–µ–º\n\t\tlocal allow, message = hook.Run(\"IGS.playerCanChangeTeam\", pl, iTeam, bForce)\n\t\treturn allow or tobool(ITEM), message or \"–≠—Ç–æ –¥–ª—è –¥–æ–Ω–∞—Ç–µ—Ä–æ–≤ (\/donate)\"\n\tend\nend)\n\n\n-- Hunger\nfunction STORE_ITEM:DisablePlayerHunger()\n\treturn self:SetInstaller(function(pl)\n\t\tpl.igs_disable_hunger = true\n\tend):SetValidator(function(pl)\n\t\treturn false\n\tend)\nend\n\nhook.Add(\"hungerUpdate\", \"IGS\", function(pl)\n\tif pl.igs_disable_hunger then\n\t\tpl:setSelfDarkRPVar(\"Energy\", 100)\n\t\treturn true\n\tend\nend)\n", "igs\/interface\/vgui\/igs_button.lua":"local PANEL = {}\n\nfunction PANEL:Init()\n\tself:SetTextColor(IGS.col.HIGHLIGHTING)\n\tself:SetFont(\"igs.18\")\nend\n\n-- –ö–∞–∫ –±–ª—è—Ç—å –ø–æ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏ –æ–≤–µ—Ä—Ä–∞–π–¥–Ω—É—Ç—å —ç—Ç—É —Ö—É–µ—Ç–æ—Ç—É?\n-- function PANEL:SetText(text)\n-- \tself.BaseClass:SetText(\" \" .. text .. \" \") -- —á—Ç–æ–±—ã –ø—Ä–∏ SizeToContent –±—ã–ª–æ –Ω–µ –≤–ø–ª–æ—Ç–Ω—É—é –∫ —Å—Ç–µ–Ω–∫–∞–º\n-- end\n\nfunction PANEL:SetActive(bActive)\n\tself.active = bActive\n\n\tself:SetTextColor(self.active and IGS.col.TEXT_ON_HIGHLIGHT or IGS.col.HIGHLIGHTING)\nend\n\nfunction PANEL:IsActive()\n\treturn self.active\nend\n\nfunction PANEL:Paint(w,h)\n\tdraw.RoundedBox(4,0,0,w,h,IGS.col.HIGHLIGHTING) -- outline\n\n\tif not self.active then\n\t\tdraw.RoundedBox(4,1,1,w - 2,h - 2,IGS.col.PASSIVE_SELECTIONS) -- bg TODO –∏–∑–º–µ–Ω–∏—Ç—å, —Å–¥–µ–ª–∞–≤ –∫–∞–∫-—Ç–æ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–º\n\tend\nend\n\nvgui.Register(\"igs_button\",PANEL,\"DButton\")\n\n-- IGS.UI()\n", "igs\/modules\/extra\/new_items_notify_cl.lua":"-- bib.setNum(\"igs:lasttimeitems\", 85)\n\n-- 18, 23, 245\nlocal PL_POYAVILSA = PLUR({\"–ø–æ—è–≤–∏–ª—Å—è\",\"–ø–æ—è–≤–∏–ª–æ—Å—å\",\"–ø–æ—è–≤–∏–ª–æ—Å—å\"})\nlocal PL_NEW       = PLUR({\"–Ω–æ–≤—ã–π\", \"–Ω–æ–≤—ã—Ö\", \"–Ω–æ–≤—ã—Ö\"})\nlocal PL_ITEMS     = PLUR({\"–ø—Ä–µ–¥–º–µ—Ç\", \"–ø—Ä–µ–¥–º–µ—Ç–∞\", \"–ø—Ä–µ–¥–º–µ—Ç–æ–≤\"})\n\nhook.Add(\"IGS.Loaded\", \"NewItemsNotify\", function()\n\t-- local ip,port = game.GetIPAddress():match(\"(.+):(.+)\")\n\t-- print(game.GetIPAddress():gsub(\"%.\",\"\"):gsub(\":\",\"\"))\n\t-- print(util.CRC(game.GetIPAddress()))\n\n\tif IGS.C.NotifyAboutNewItems == false then return end\n\n\tlocal crc = util.CRC(game.GetIPAddress())\n\n\tlocal iItemsNow = #IGS.GetItems()\n\tlocal iCached = bib.getNum(\"igs:lasttimeitems:\" .. crc)\n\tbib.setNum(\"igs:lasttimeitems:\" .. crc, iItemsNow)\n\n\tif iCached and iCached < iItemsNow then\n\t\tlocal new = iItemsNow - iCached\n\n\t\tlocal _,sNew    = PL_NEW(new) -- –ß–∏—Å—Ç–æ —Å–ª–æ–≤–æ (–Ω–æ–≤—ã–π, –Ω–æ–≤—ã—Ö –∏—Ç–¥)\n\t\tlocal _,sItems  = PL_ITEMS(new)\n\t\tlocal _,sAppear = PL_POYAVILSA(new)\n\n\t\tlocal message =\n\t\t\t\"–í –Ω–∞—à–µ–º \/donate –º–∞–≥–∞–∑–∏–Ω–µ \" .. sAppear .. \" \" .. new .. \" \" .. sNew .. \" \" .. sItems .. \". –ñ–µ–ª–∞–µ—Ç–µ –≤–∑–≥–ª—è–Ω—É—Ç—å?\"\n\n\t\tIGS.BoolRequest(\"–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∞–≥–∞–∑–∏–Ω–∞\", message, function(aga)\n\t\t\tif aga then\n\t\t\t\tIGS.UI()\n\t\t\tend\n\t\tend)\n\tend\nend)\n", "igs\/extensions\/sam.lua":"local STORE_ITEM = MT_IGSItem\n\nfunction STORE_ITEM:SetSAMGroup(sUserGroup)\n\tIGS.SAM_GROUPS = IGS.SAM_GROUPS or {}\n\n\tself:SetInstaller(function(pl)\n\t\tpl:sam_set_rank(sUserGroup)\n\tend):SetMeta(\"samgroup\", sUserGroup)\n\n\tself:Insert(IGS.SAM_GROUPS, sUserGroup) -- #todo insert –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ..\n\treturn self\nend\n\n-- #todo IGS.Filter ?\nlocal function fl_filter(t, func)\n\tlocal res = {}\n\tfor i,v in ipairs(t) do\n\t\tif func(v) then\n\t\t\tres[#res + 1] = v\n\t\tend\n\tend\n\treturn res\nend\n\nhook.Add(\"IGS.PlayerPurchasesLoaded\", \"IGS_SAM\", function(pl, purchases_)\n\tif CLIENT or not IGS.SAM_GROUPS then return end\n\n\tlocal purchased_groups = {}\n\tif purchases_ then\n\t\tlocal purchases_list = table.GetKeys(purchases_)\n\t\tpurchased_groups = fl_filter(purchases_list, function(uid)\n\t\t\treturn IGS.GetItemByUID(uid):GetMeta(\"samgroup\")\n\t\tend)\n\tend\n\n\t-- –£ –∏–≥—Ä–æ–∫–∞ —Å—Ä–µ–¥–∏ –ø–æ–∫—É–ø–æ–∫ –Ω–µ—Ç SAM –≥—Ä—É–ø–ø\n\t-- –ù–æ –µ–≥–æ —Ä–∞–Ω–≥ –Ω–µ –¥–µ—Ñ–æ–ª—Ç–Ω—ã–π –∏ –ø—Ä–æ–¥–∞–µ—Ç—Å—è\n\t-- –ó–Ω–∞—á–∏—Ç —Å–Ω–∏–º–∞–µ–º\n\tif not purchased_groups[1] then\n\t\tlocal current_pl_rank = pl:sam_getrank()\n\t\tif current_pl_rank ~= \"user\" and IGS.SAM_GROUPS[current_pl_rank] then\n\t\t\tpl:sam_set_rank(\"user\") -- –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è sam.player.set_rank(ply, rank, length), –Ω–µ –ø—É—Ç–∞—Ç—å —Å PLAYER:sam_setrank(name)\n\t\tend\n\n\t\treturn\n\tend\n\n\t-- –£ –∏–≥—Ä–æ–∫–∞ –∫—É–ø–ª–µ–Ω–∞ –º–∏–Ω–∏–º—É–º 1 SAM –≥—Ä—É–ø–ø–∞\n\t-- –¢–∞, —á—Ç–æ –≤ sh_additems –Ω–∏–∂–µ, —Ç–∞ –≤–∞–∂–Ω–µ–µ\n\tlocal priority_item = IGS.GetItemByUID( purchased_groups[1] )\n\tfor _,uid in ipairs(purchased_groups) do\n\t\tlocal ITEM = IGS.GetItemByUID(uid)\n\t\tif ITEM.id > priority_item.id then\n\t\t\tpriority_item = ITEM\n\t\tend\n\tend\n\n\t-- –°–∞–º—É—é –≤–∞–∂–Ω—É—é –∏–∑ –∫—É–ø–ª–µ–Ω–Ω—ã—Ö –∏ –≤—ã—Å—Ç–∞–≤–ª—è–µ–º\n\tpriority_item:Setup(pl)\nend)\n", "igs\/interface\/core.lua":"IGS.WIN = IGS.WIN or {}\n\nsurface.CreateFont(\"igs.40\", {font = \"roboto\", extended = true, size = 40, weight = 500})\nsurface.CreateFont(\"igs.24\", {font = \"roboto\", extended = true, size = 24, weight = 400})\nsurface.CreateFont(\"igs.22\", {font = \"roboto\", extended = true, size = 22, weight = 400})\nsurface.CreateFont(\"igs.20\", {font = \"roboto\", extended = true, size = 20, weight = 400})\nsurface.CreateFont(\"igs.19\", {font = \"roboto\", extended = true, size = 19, weight = 400})\nsurface.CreateFont(\"igs.18\", {font = \"roboto\", extended = true, size = 18, weight = 400})\nsurface.CreateFont(\"igs.17\", {font = \"roboto\", extended = true, size = 15, weight = 550})\nsurface.CreateFont(\"igs.15\", {font = \"roboto\", extended = true, size = 15, weight = 550})\n\n\nuigs = uigs or {}\nfunction uigs.Create(t, f, p)\n\tlocal cb, parent = f, p\n\n\tif not isfunction(f) then -- nil or panel\n\t\tparent, cb = f, nil\n\tend\n\n\tlocal v = vgui.Create(t, parent)\n\tif cb then cb(v, parent) end\n\treturn v\nend\n-- uigs.Create(\"name\")\n-- uigs.Create(\"name\", parent)\n-- uigs.Create(\"name\", func, parent)\n-- uigs.Create(\"name\", func)\n\nlocal function f1()\n\tlocal GM = GM or GAMEMODE\n\tif GM and IGS.C.MENUBUTTON == KEY_F1 then\n\t\tfunction GM:ShowHelp() end\n\tend\nend\n\n-- –ß—Ç–æ–±—ã –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–ª–æ F1 –º–µ–Ω—é—à–∫—É –¥–∞—Ä–∫—Ä–ø—à–µ–≤—Å–∫—É—é –µ–±—É—á—É—é\nhook.Add(\"DarkRPFinishedLoading\",\"SupressDarkRPF1\",f1) -- —Å addons\nhook.Add(\"IGS.Initialized\",\"SupressDarkRPF1\",f1) -- git –∑–∞–≥—Ä—É–∑–∫–∞\n\n\n\n\n\n\n-- —á—Ç–æ–±—ã –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –Ω–µ –ø–µ—Ä–µ–¥–∞–ª–∞—Å—å –ø–∞–Ω–µ–ª—å\nlocal function dep() IGS.WIN.Deposit() end\n\n\nlocal mf -- –∞–Ω—Ç–∏–¥—É–±–ª–∏–∫–∞—Ç\nfunction IGS.UI()\n\tif not IGS.IsLoaded() then\n\t\tLocalPlayer():ChatPrint(\"[IGS] –ê–≤—Ç–æ–¥–æ–Ω–∞—Ç –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω\")\n\t\treturn\n\tend\n\n\tif not IGS.C then -- –ü—Ä–æ–±–ª–µ–º–∞ AddCSLua. –í –∫–æ–Ω—Å–æ–ª–∏ –∫–ª–∏–µ–Ω—Ç–∞ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—à–∏–±–∫–∏ –∏–Ω–∫–ª—é–¥–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –±–∞–∑–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤\n\t\tLocalPlayer():ChatPrint(\"[IGS] –ê–≤—Ç–æ–¥–æ–Ω–∞—Ç —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –°–æ–æ–±—â–∏—Ç–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏\")\n\t\treturn\n\tend\n\n\tif IsValid(mf) then\n\t\tif not mf:IsVisible() then\n\t\t\tIGS.ShowUI()\n\t\tend\n\t\treturn\n\tend\n\n\tmf = uigs.Create(\"igs_frame\", function(self)\n\t\t-- 580 = (items_in_line * item_pan_wide) + (10(margin) * (items_in_line + 1))\n\t\tself:SetSize(math.min(ScrW(), 800), math.min(ScrH(), 500)) -- –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–∫—Ä—ã—Ç—å –æ–∫–Ω–æ –Ω–∞ —É—â–µ—Ä–±–Ω—ã—Ö —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è—Ö\n\t\tself:RememberLocation(\"igs\")\n\t\tself:MakePopup()\n\n\t\t-- –µ—Å–ª–∏ –ø–æ–≤–µ—Å–∏—Ç—å –Ω–∞ —Ñ—Ä–µ–π–º, —Ç–æ –¥—Ä–∞–≥ —Å–ª–æ–º–∞–µ—Ç—Å—è\n\t\tlocal init = CurTime() -- https:\/\/t.me\/c\/1353676159\/7185\n\t\tfunction self.btnClose:Think()\n\t\t\tif CurTime() - init > 1 and input.IsKeyDown(IGS.C.MENUBUTTON) then\n\t\t\t\tIGS.HideUI()\n\t\t\tend\n\t\tend\n\tend)\n\n\t-- –ë–∞–ª–∞–Ω—Å\n\tuigs.Create(\"igs_button\", function(self)\n\t\tfunction self:UPDBalance()\n\t\t\tself.bal = LocalPlayer():IGSFunds()\n\t\t\tself:SetText(\"–ë–∞–ª–∞–Ω—Å: \" .. IGS.SignPrice(self.bal))\n\t\tend\n\n\t\tself:SetPos(20,0)\n\t\tself:SetSize(150,27)\n\t\tself:UPDBalance()\n\t\tself:SetTooltip(\"–û—Ç–∫—Ä—ã—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–∫—É–ø–æ–∫\")\n\t\tself.Think = function(s)\n\t\t\tif s.bal ~= LocalPlayer():IGSFunds() then\n\t\t\t\ts:UPDBalance()\n\t\t\tend\n\t\tend\n\n\t\tlocal add = uigs.Create(\"igs_button\", mf)\n\t\tadd:SetPos(20 + 150 + 2,0)\n\t\tadd:SetSize(27,27)\n\t\tadd:SetText(\"+\")\n\t\tadd:SetTooltip(\"–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—á–µ—Ç–∞\")\n\t\tadd:SetActive(true)\n\n\t\t add.DoClick = dep\n\t\tself.DoClick = dep\n\tend,mf)\n\n\tmf.activity = uigs.Create(\"igs_tabbar\", function(self)\n\t\tself:SetPos(0,mf:GetTitleHeight())\n\t\tself:SetSize(580,mf:GetTall() - mf:GetTitleHeight())\n\tend, mf)\n\n\t-- –•–µ—Ä–Ω—è —Å–ø—Ä–∞–≤–∞ –æ—Ç –ª—ç–π–∞—É—Ç–∞ —Å —É—Å–ª—É–≥–∞–º–∏ http:\/\/joxi.ru\/52aQQ8Efzov120\n\t-- –í–∏–¥ –±–µ–∑ –Ω–µ–µ: http:\/\/joxi.ru\/eAO44lGcXORlro\n\tlocal x,y = mf.activity:GetPos()\n\tmf.sidebar = uigs.Create(\"igs_sidebar\", mf)\n\tmf.sidebar:SetSize(mf:GetWide() - mf.activity:GetWide(), mf.activity:GetTall() + 1 + 1)\n\tmf.sidebar:SetPos(x + mf.activity:GetWide(),y - 1) -- -1 —á—Ç–æ–±—ã –ø–µ—Ä–µ–∫—Ä—ã—Ç—å –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ —Ö—ç–¥–µ—Ä–∞\n\tmf.sidebar.PaintOver = function(_,_,h)\n\t\tsurface.SetDrawColor(IGS.col.HARD_LINE)\n\t\tsurface.DrawLine(0,0,0,h) -- –ª–∏–Ω–∏—è —Å–ª–µ–≤–∞\n\tend\n\tmf.sidebar.header.Paint = function(_,w,h)\n\t\tdraw.RoundedBox(0,0,0,w,h,IGS.col.FRAME_HEADER)\n\n\t\tsurface.SetDrawColor(IGS.col.HARD_LINE)\n\t\tsurface.DrawLine(0,h - 1,w,h - 1)\n\tend\n\n\tmf.sidebar.activity = uigs.Create(\"igs_multipanel\", mf.sidebar.sidebar)\n\tmf.sidebar.activity:Dock(FILL)\n\n\tfunction mf.sidebar:AddPanel(panel,active)\n\t\treturn self.activity:AddPanel(panel,active)\n\tend\n\n\tfunction mf.sidebar:Show(iPanelID)\n\t\treturn self.activity:SetActivePanel(iPanelID)\n\tend\n\n\tfunction mf.sidebar:AddPage(sTitle)\n\t\treturn uigs.Create(\"Panel\", function(bg)\n\t\t\tbg.side = uigs.Create(\"igs_scroll\")\n\n\t\t\tbg.SidePanelID = self:AddPanel(bg.side)\n\t\t\tbg.side:SetSize(self:GetSize()) -- –µ—Å–ª–∏ —É–∫–∞–∑–∞—Ç—å —Ä–∞–Ω—å—à–µ, —Ç–æ —Å–±—Ä–æ—Å–∏—Ç—Å—è\n\t\t\tbg.OnOpen = function(s)\n\t\t\t\tself:SetTitle(sTitle)\n\t\t\t\tself:Show(s.SidePanelID)\n\n\t\t\t\t-- –ù–µ –∑–Ω–∞—é –∫–∞–∫ —Å–¥–µ–ª–∞—Ç—å –ª—É—á—à–µ.\n\t\t\t\t-- –ß–¢–æ–±—ã –Ω–µ –æ–≤–µ—Ä—Ä–∞–π–¥–∏—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é - —Å–¥–µ–ª–∞–ª –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥\n\t\t\t\tif bg.OnOpenOver then\n\t\t\t\t\tbg.OnOpenOver()\n\t\t\t\tend\n\t\t\tend\n\t\tend, self)\n\tend\n\n\t-- –ù–µ–º–Ω–æ–≥–æ –Ω–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –Ω–æ —ç—Ç–∞ —à—Ç—É–∫–∞ –æ—Ç–∫–ª—é—á–∞–µ—Ç\n\tfor hook_name in pairs(IGS.C.DisabledFrames) do\n\t\thook.Remove(\"IGS.CatchActivities\",hook_name)\n\tend\n\n\t-- –°–æ–±–∏—Ä–∞–µ–º –∫–Ω–æ–ø–æ—á–∫–∏ –≤ —Ñ—É—Ç–µ—Ä–µ\n\thook.Run(\"IGS.CatchActivities\",mf.activity,mf.sidebar)\n\n\treturn mf\nend\n\nfunction IGS.GetUI()\n\treturn IsValid(mf) and mf or nil\nend\n\nfunction IGS.CloseUI()\n\tif IsValid(mf) then\n\t\tmf:Close()\n\tend\nend\n\nlocal lastX,lastY -- remember\nfunction IGS.HideUI()\n\tif not mf.moving then\n\t\tmf.moving = true\n\t\tlastX,lastY = mf:GetPos()\n\t\tmf:MoveTo(-mf:GetWide(), lastY, .2)\n\t\ttimer.Simple(.2, function()\n\t\t\tmf:SetVisible(false)\n\t\t\tmf.moving = false\n\t\tend)\n\tend\nend\n\nfunction IGS.ShowUI()\n\tif not mf.moving then\n\t\tmf.moving = true\n\t\tmf:SetVisible(true)\n\t\tmf:MoveTo(lastX, lastY, .2)\n\t\ttimer.Simple(.2, function() mf.moving = false end)\n\tend\nend\n\nfunction IGS.OpenUITab(sName)\n\tlocal iui = IGS.GetUI() or IGS.UI()\n\n\tfor _,btn in ipairs(iui.activity.Buttons) do\n\t\tif btn:Name() == sName then\n\t\t\tbtn:DoClick()\n\t\tend\n\tend\nend\n\n-- –î–æ–±–∞–≤–ª—è–µ—Ç –±–ª–æ–∫ —Ç–µ–∫—Å—Ç–∞ –∫ —Å–∫—Ä–æ–ª–ª –ø–∞–Ω–µ–ª–∏. –ö –æ–±—ã—á–Ω–æ–π –Ω–µ –≤–∏–∂—É —Å–º—ã—Å–ª–∞\n-- scroll –î–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–∞–∑–º–µ—Ä. –ù–∏–∫–∞–∫–∏—Ö –¥–æ–∫–æ–≤!\n-- –°–µ—Ç–∫–∞: https:\/\/img.qweqwe.ovh\/1487023074990.png\nfunction IGS.AddTextBlock(scroll,sTitle,sText) -- –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ñ—Ä–µ–π–º–µ —Ö–µ–ª–ø–∞ –∏ —á–∞—Ä—Ç–æ–≤\n\t-- \\\/ –≤—Å—Ç–∞–≤–ª–µ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å\n\treturn scroll:AddItem(uigs.Create(\"Panel\", function(pnl)\n\t\tlocal y = 3\n\n\t\t-- Title\n\t\tif sTitle then\n\t\t\tfor _,line in ipairs( string.Wrap(\"igs.20\",sTitle,scroll:GetWide() - 5 - 5) ) do\n\t\t\t\tlocal t = uigs.Create(\"DLabel\", pnl)\n\t\t\t\tt:SetPos(5,y)\n\t\t\t\tt:SetFont(\"igs.20\")\n\t\t\t\tt:SetText(line)\n\t\t\t\tt:SetTextColor(IGS.col.TEXT_HARD)\n\t\t\t\tt:SizeToContents()\n\n\t\t\t\ty = y + t:GetTall()\n\t\t\tend\n\n\t\t\ty = y + 2\n\t\tend\n\n\t\tfor _,line in ipairs( string.Wrap(\"igs.18\",sText,scroll:GetWide() - 5 - 5) ) do\n\t\t\tlocal lbl = uigs.Create(\"DLabel\", pnl)\n\t\t\tlbl:SetPos(5,y)\n\t\t\tlbl:SetFont(\"igs.18\")\n\t\t\tlbl:SetText(line)\n\t\t\tlbl:SetTextColor(IGS.col.TEXT_SOFT)\n\t\t\tlbl:SizeToContents()\n\n\t\t\ty = y + lbl:GetTall()\n\t\tend\n\n\t\tpnl:SetTall(y + 10)\n\tend))\nend\n\nfunction IGS.AddButton(pScroll,sName,fDoClick) -- –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ –∏ –ø—Ä–æ—Ñ–∏–ª–µ –¥–ª—è —é–∑–∞ –∫—É–ø–æ–Ω–æ–≤\n\t-- \\\/ –≤—Å—Ç–∞–≤–ª–µ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å\n\treturn pScroll:AddItem(uigs.Create(\"Panel\", function(pan)\n\t\tpan.button = uigs.Create(\"igs_button\", function(s)\n\t\t\ts:SetSize(pScroll:GetWide() - 5 - 5,50)\n\t\t\ts:SetPos(5,5)\n\t\t\ts:SetText(sName)\n\t\t\ts.DoClick = fDoClick\n\t\tend, pan)\n\n\t\tpan:SetTall(pan.button:GetTall() + 5)\n\tend))\nend\n\n-- IGS.UI()\n\n-- timer.Create(\"IGSUI\",30,1,function()\n-- \tif IsValid(mf) then\n-- \t\tmf:Close()\n-- \tend\n-- end)\n", "igs\/utils\/ut_sv.lua":"\nlocal col_lime  = Color(100,210,40)\nlocal col_light = Color(228,228,228)\nlocal col_red   = Color(250,30,90)\n\nfunction IGS.NotifyAll(...)\n\tchat.AddTextSV(\n\t\tcol_lime, \"[IGS]\",\n\t\tcol_red,  \" > \",\n\t\tcol_light,...\n\t)\nend\n\n\nfunction IGS.Notify(pl, ...)\n\tpl:ChatPrintColor(\n\t\tcol_lime, \"[IGS]\",\n\t\tcol_red,  \" > \",\n\t\tcol_light,...\n\t)\nend\n\n-- IGS.MUTE_NOTIFY = IGS.MUTE_NOTIFY or {}\n-- function IGS.NotifyOpt(pl, uid, ...)\n-- \tif IGS.MUTE_NOTIFY[uid] then return end\n-- \treturn IGS.Notify(pl, ...)\n-- end\n\n\n-- todo —Ä–µ–∞–ª—å–Ω—ã–π –ª–æ–≥–≥–∏–Ω–≥\nfunction IGS.LogError(err)\n\terror(err)\nend\n\n\n--[[---------------------------\n\tAPI\n-----------------------------]]\n-- –ü—Ä–æ—â–µ https:\/\/qweqwe.ovh\/9vAdB\nlocal limit_per_query = 255\nlocal function getTxsNoLimit(cb, s64, am_, _tmp_)\n\t_tmp_ = _tmp_ or {}\n\tam_   =   am_ or math.huge\n\tlocal left = am_ - #_tmp_\n\t-- print(\"need, done, left\", am_, #_tmp_, left)\n\tIGS.GetTransactions(function(data)\n\t\tfor _,tr in ipairs(data) do\n\t\t\tlocal i = table.insert(_tmp_,tr)\n\t\t\tif am_ and i == am_ then cb(_tmp_) return end -- —Å–æ–±—Ä–∞–ª–∏ –Ω—É–∂–Ω–æ–µ –∫–æ–ª-–≤–æ\n\t\tend\n\n\t\tif #data < limit_per_query then cb(_tmp_) -- –ü–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞\n\t\telse getTxsNoLimit(cb, s64, am_, _tmp_)\n\t\tend\n\tend, s64, true, math.min(limit_per_query, left), #_tmp_)\nend\n\nIGS.GetPlayerTransactionsBypassingLimit = getTxsNoLimit\n\n-- getTxsNoLimit(function(all)\n-- \tfor i,tx in ipairs(all) do\n-- \t\tprint(i, DateTime(tx.Time), tx.Note)\n-- \tend\n-- \tprint(\"#all\", #all)\n-- end, AMD():SteamID(), 20)", "igs\/interface\/vgui\/igs_group.lua":"local PANEL = {}\n\nlocal PL_VARIANTS = PLUR({\"–≤–∞—Ä–∏–∞–Ω—Ç\", \"–≤–∞—Ä–∏–∞–Ω—Ç–∞\", \"–≤–∞—Ä–∏–∞–Ω—Ç–æ–≤\"})\nfunction PANEL:SetGroup(ITEM_GROUP)\n\tself.group = ITEM_GROUP\n\n\tif ITEM_GROUP:ICON() then\n\t\tself:SetIcon(ITEM_GROUP:ICON())\n\tend\n\n\tif ITEM_GROUP.highlight then\n\t\tself:SetTitleColor(ITEM_GROUP.highlight)\n\tend\n\n\tlocal visible_items = {}\n\tfor _,GROUP_ITEM in ipairs(ITEM_GROUP:Items()) do\n\t\tif GROUP_ITEM.item:CanSee( LocalPlayer() ) then\n\t\t\ttable.insert(visible_items, GROUP_ITEM)\n\t\tend\n\tend\n\n\tself:SetName(ITEM_GROUP:Name())\n\tself:SetSign(PL_VARIANTS(#visible_items))\n\n\tlocal min,max = math.huge,0 -- –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω—ã –∏—Ç–µ–º–æ–≤\n\tfor _,v in ipairs(visible_items) do\n\t\tlocal price = v.item:GetPrice( LocalPlayer() )\n\n\t\tif price < min then\n\t\t\tmin = price\n\t\tend\n\n\t\tif price > max then\n\t\t\tmax = price\n\t\tend\n\tend\n\n\tif min == max then\n\t\tself:SetBottomText(\"–í—Å–µ –ø–æ \" .. IGS.SignPrice(min))\n\telse\n\t\tself:SetBottomText(\"–û—Ç \" .. min .. \" –¥–æ \" .. IGS.SignPrice(max))\n\tend\n\n\treturn self\nend\n\nfunction PANEL:DoClick()\n\tif not IsValid(self.list_bg) then\n\t\tself.list_bg = IGS.WIN.Group(self.group:UID())\n\tend\nend\n\n\nvgui.Register(\"igs_group\",PANEL,\"igs_item\")\n-- IGS.UI()\n", "igs\/servers\/serv_sv.lua":"local function getHostPort()\n\treturn tonumber( game.GetIPAddress():match(\":(.+)$\") )\nend\n\nlocal function dprint(...)\n\tif IGS.DEBUG and IGS.DEBUG <= 2 then -- debug, info, [warning, error]\n\t\tIGS.dprint(\"üêõ \", \"\", ...)\n\tend\nend\n\n-- –ü–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤—Ç–æ—Ä–∞—è —á–∞—Å—Ç—å —Å–∫—Ä–∏–ø—Ç–∞\n-- –¢.–µ. –Ω–µ –≤—ã–∑–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é - –Ω–µ –∑–∞–ø—É—Å—Ç–∏—Ç—Å—è —Å–∫—Ä–∏–ø—Ç\n-- –û–Ω–∞ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è, –µ—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä –æ—Ç–∫–ª—é—á–µ–Ω –∏–ª–∏ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –≤ —Ö–æ–¥–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞ –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤\nlocal function onReady()\n\tdprint(\"–ú—ã –≥–æ—Ç–æ–≤—ã. \", \"–ó–∞–ø—É—Å–∫–∞–µ–º IGS üöÄ\")\n\tIGS.SERVERS.Broadcast()\n\thook.Run(\"IGS.ServersLoaded\")\n\tIGS.SetServerVersion( cookie.GetString(\"igs_version\", \"123\") )\nend\n\nlocal function addServerLocally(id, serv_name, enabled)\n\tif true    then IGS.SERVERS.TOTAL   = IGS.SERVERS.TOTAL   + 1 end\n\tif enabled then IGS.SERVERS.ENABLED = IGS.SERVERS.ENABLED + 1 end\n\n\tIGS.SERVERS.MAP[id] = serv_name\nend\n\nlocal function addCurrentServerLocally(id, serv_name)\n\tIGS.SERVERS.CURRENT = id\n\taddServerLocally(id, serv_name, true)\n\n\t-- –±—ã–ª–æ –≤ registerCurrentServer –¥–æ https:\/\/t.me\/c\/1353676159\/17695\n\tbib.set(\"igs:serverid\", id)\nend\n\nlocal function registerCurrentServer(local_ip,port, fOnSuccess)\n\tIGS.AddServer(local_ip, port, function(id)\n\t\tIGS.prints(\n\t\t\t\"CEPBEP 3APEruCTPuPOBAH nOg ig: \", id, \"\\n\" ..\n\t\t\t\"HACTPOuKu B \", \"gm-donate.net\/panel\/projects\/\" .. IGS.C.ProjectID\n\t\t)\n\n\t\tlocal serv_name = GetConVarString(\"hostname\")\n\t\taddCurrentServerLocally(id, serv_name) -- –Ω—É–∂–Ω–æ —Å–Ω–∞—Ä—É–∂–∏ –¥–ª—è IGS.SERVERS:ID()\n\t\tIGS.SetServerName( serv_name )\n\tend)\nend\n\nlocal function loadServersOrRegisterCurrent(d, local_ip)\n\tlocal serv_port = getHostPort()\n\n\t-- reset\n\tIGS.SERVERS.TOTAL   = 0\n\tIGS.SERVERS.ENABLED = 0\n\n\tlocal maxVisibleServerId = 0 -- –±–æ–ª—å—à–∏–π –∏–¥ –º–æ–∂–µ—Ç –±—ã—Ç—å –∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–º\n\tlocal isCurrentDisabled\n\tfor _,v in ipairs(d) do -- -- `ID`,`Name`,`IP`,`Port`,`Disabled`\n\t\tlocal disabled = tobool(v.Disabled)\n\t\tmaxVisibleServerId = math.max(v.ID, maxVisibleServerId)\n\n\t\t-- –¢–µ–∫—É—â–∏–π —Å–µ—Ä–≤–µ—Ä\n\t\tif v.IP == local_ip and v.Port == serv_port then\n\t\t\tif disabled then isCurrentDisabled = true end\n\t\t\taddCurrentServerLocally(v.ID, v.Name)\n\t\t\tdprint(\"üìç –í–ö–õ: \", (disabled and \"‚ùå\" or \"‚úÖ\"), \" ID: \", v.ID, \". –ù–∞–∑–≤–∞–Ω–∏–µ: \", v.Name)\n\t\telse\n\t\t\taddServerLocally(v.ID, v.Name, not disabled)\n\t\t\tdprint(\"üì§ –í–ö–õ: \", (disabled and \"‚ùå\" or \"‚úÖ\"), \" ID: \", v.ID, \". –ù–∞–∑–≤–∞–Ω–∏–µ: \", v.Name)\n\t\tend\n\tend\n\n\tdprint(\"ID —Å–∞–º–æ–≥–æ –º–ª–∞–¥—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞: \", maxVisibleServerId)\n\n\t-- limit 50\n\tif maxVisibleServerId > 40 then\n\t\tIGS.prints(Color(255, 50, 50), \"\",\n\t\t\t\"y IIpoekTa \", maxVisibleServerId, \" 3arerucTpuPoBaHHbIx cepBepoB.\\n\" ..\n\t\t\t\"IIo gocTu}{eHuIO 50 cepBepoB HoBbIe IIepectaHyT co3gaBaTbC9 u 3tot He 3arpy3uTc9.\\n\" ..\n\t\t\t\"O6HoBJI9uTe IP IIpowJIbIX uJIu co3gauTe HoBbIu IIpoeKT\"\n\t\t)\n\tend\n\n\tif isCurrentDisabled then\n\t\tIGS.prints(Color(255, 50, 50), \"\", \"3TOT CEPBEP OTKJII04EH. 3ArPy3KA nPEKPAwEHA\")\n\t\treturn -- –Ω–µ –¥–∞–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç—å onReady()\n\tend\n\n\t-- –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω\n\tif not IGS.SERVERS.CURRENT then\n\t\tlocal id_before = bib.getNum(\"igs:serverid\")\n\t\tif id_before and IGS.SERVERS(id_before) then\n\t\t\tIGS.prints(\"IIOXO}{E 3TOT CEPBEP IIEPEEXAJI (CMEHA IP)\")\n\t\t\tIGS.UpdateServerAddress(id_before, local_ip, serv_port, function()\n\t\t\t\tIGS.GetServers(function(dat)\n\t\t\t\t\tloadServersOrRegisterCurrent(dat, local_ip)\n\t\t\t\tend, true)\n\t\t\tend)\n\n\t\telse\n\t\t\tIGS.prints(\"3TOT CEPBEP HE 3APEruCTPuPOBAH. CO39AEM!\")\n\t\t\tregisterCurrentServer(local_ip,serv_port, onReady)\n\t\tend\n\telse\n\t\tonReady()\n\tend\nend\n\n\nlocal function getAndLoadServers(local_ip)\n\tdprint(\"–ù–∞—à IP: \", local_ip, \". –ü–æ–ª—É—á–∞–µ–º —Å–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–µ—Ä–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞\")\n\tIGS.GetServers(function(dat)\n\t\tdprint(\"–ü–æ–ª—É—á–∏–ª–∏ –¥–∞–Ω–Ω—ã–µ \", #dat, \" —Å–µ—Ä–≤–µ—Ä–∞(–æ–≤). –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –û–ó–£\")\n\t\tloadServersOrRegisterCurrent(dat, local_ip)\n\tend, true) -- include disabled\nend\n\ntimer.Simple(0, function() -- —Ñ–µ—Ç—á –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–∞–∫ –≤ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç\n\tdprint(\"–ó–∞–≥—Ä—É–∑–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤\")\n\tIGS.GetExternalIP(getAndLoadServers)\nend)\n\nlocal function renewAddressAndReloadServers(ip)\n\tIGS.UpdateServerAddress(IGS.SERVERS:ID(), ip, getHostPort(), function()\n\t\tIGS.GetServers(function(dat)\n\t\t\tloadServersOrRegisterCurrent(dat, ip)\n\t\tend, true)\n\tend)\nend\n\nhook.Add(\"IGS.OnApiError\",\"NotifyAboutImpossibleLoading\",function(sMethod)\n\tif sMethod == \"\/servers\/get\" then\n\t\tIGS.prints(Color(255,0,0), \"\", \"NEVOZMOZNO ZAGRUZIT SKRIPT. VAZNIE DANNIE NE POLUCHENI\")\n\tend\nend)\n\n-- https:\/\/t.me\/c\/1353676159\/10880\nhook.Add(\"IGS.OnApiError\",\"DuplicatedServerWarning\",function(sMethod, error_uid)\n\tif sMethod == \"\/servers\/get\" and error_uid == \"server_already_exists\" then\n\t\tIGS.prints(Color(255,0,0), \"\", \"Server s takim IP i PORTom uze zaregistrirovan v paneli. Nuzno izmenit ego tam na drugoy\")\n\tend\nend)\n", "igs\/servers\/serv_sh.lua":"IGS.SERVERS = --[[ IGS.SERVERS or --]] setmetatable({\n\tID   = function() return IGS.SERVERS.CURRENT end,\n\tName = function() return IGS.SERVERS.MAP[IGS.SERVERS.CURRENT] end,\n\n\t-- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ –∫–ª–∏–µ–Ω—Ç —Ç–∞–±–ª–∏—Ü—É IGS.SERVERS\n\tBroadcast = function()\n\t\t-- –Ω–µ–ª—å–∑—è nil\n\t\tIGS.nw.SetGlobal(\"igs_servers\",true)\n\tend,\n\n\tMAP  = {}, -- id, name\n\n\t-- CURRENT -- int\n\t-- LOADED -- bool\n\tTOTAL   = 0, -- –¥–ª—è —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤ –≤ nw\n\tENABLED = 0, -- –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ —Å–∫–∏–¥–∫–∏\n},{\n\t__call = function(self,id)\n\t\treturn IGS.SERVERS.MAP[id]\n\tend\n})\n\n\nIGS.nw.Register(\"igs_servers\")\n\t:Write(function()\n\t\tnet.WriteUInt(IGS.SERVERS.CURRENT,16) -- 65535\n\t\tnet.WriteUInt(IGS.SERVERS.TOTAL,8) -- 256\n\t\tnet.WriteUInt(IGS.SERVERS.ENABLED,8) -- 256\n\n\t\tfor id,name in pairs(IGS.SERVERS.MAP) do\n\t\t\tnet.WriteUInt(id,16)\n\t\t\tnet.WriteString(name)\n\t\tend\n\tend)\n\t:Read(function()\n\t\tIGS.SERVERS.CURRENT = net.ReadUInt(16)\n\t\tIGS.SERVERS.TOTAL   = net.ReadUInt(8)\n\t\tIGS.SERVERS.ENABLED = net.ReadUInt(8)\n\n\t\tfor i = 1,IGS.SERVERS.TOTAL do\n\t\t\tIGS.SERVERS.MAP[net.ReadUInt(16)] = net.ReadString()\n\t\tend\n\n\t\treturn IGS.SERVERS\n\tend)\n:SetGlobal():SetHook(\"IGS.ServersLoaded\")\n", "igs\/interface\/activities\/inventory.lua":"local function loadTab(activity,sidebar,dat)\n\tlocal bg = sidebar:AddPage(\"–î–µ–π—Å—Ç–≤–∏—è –Ω–∞–¥ –∏—Ç–µ–º–æ–º\")\n\tIGS.AddTextBlock(bg.side, nil, #dat > 0 and\n\t\t\"–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–µ–¥–º–µ—Ç, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –ø–æ –Ω–µ–º—É —Å–ø–∏—Å–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π\" or\n\n\t\t\"–ö—É–ø–ª–µ–Ω–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã –±—É–¥—É—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∑–¥–µ—Å—å.\" ..\n\t\t\"\\n\\n–ë–ª–∞–≥–æ–¥–∞—Ä—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä—é –≤—ã –º–æ–∂–µ—Ç–µ –ø–æ–¥–µ–ª–∏—Ç—å—Å—è –ø–æ–∫—É–ø–∫–æ–π —Å–æ —Å–≤–æ–∏–º –¥—Ä—É–≥–æ–º, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –¥–µ–Ω–µ–≥ –Ω–∞ –ø–æ–∫—É–ø–∫—É —É—Å–ª—É–≥–∏. \" ..\n\t\t\t\"–ü—Ä–æ—Å—Ç–æ –∫—É–ø–∏—Ç–µ –µ–µ –≤–º–µ—Å—Ç–æ –Ω–µ–≥–æ –∏ –±—Ä–æ—Å—å—Ç–µ –Ω–∞ –ø–æ–ª. –ü–æ—Å–ª–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø—Ä–µ–¥–º–µ—Ç–∞ –æ–Ω –ø–æ—è–≤–∏—Ç—Å—è —É –Ω–µ–≥–æ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ.\" ..\n\t\t\"\\n\\n–î–æ–±—Ä—ã–µ —Å–∞–º–æ—Ä–∏—Ç—è–Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –¥–ª—è —É—Å—Ç—Ä–∞–∏–≤–∞–Ω–∏—è –∫–ª–∞—Å—Å–Ω—ã—Ö –∫–æ–Ω–∫—É—Ä—Å–æ–≤. \" ..\n\t\t\t\"–û–Ω–∏ –Ω–∞–±–∏–≤–∞—é—Ç —Å–≤–æ–π –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏, –∞ –∑–∞—Ç–µ–º –ø—Ä–∏ –∫–∞–∫–∏—Ö-—Ç–æ —É—Å–ª–æ–≤–∏—è—Ö –∏—Ö —Ä–∞–∑–¥–∞—é—Ç\"\n\t)\n\n\tbg.OnRemove = function()\n\t\thook.Remove(\"IGS.PlayerPurchasedItem\",\"UpdateInventoryView\")\n\tend\n\n\t-- local act_tall = activity:GetTall() - activity.tabBar:GetTall()\n\n\tlocal infpan = uigs.Create(\"igs_iteminfo\", function(p)\n\t\t-- p:SetSize(300,act_tall) -- \\\/\n\t\t-- p:SetPos(0,0)\n\t\tp:Dock(LEFT) p:SetWide(300)\n\t\tp:SetIcon(IGS.C.DefaultIcon)\n\t\tp:SetName(\"\")\n\t\tp:SetDescription(\"–ó–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–∞—à–µ–π –ø–æ–∫—É–ø–∫–µ, –∫–æ–≥–¥–∞ –≤—ã –µ–µ —Å–¥–µ–ª–∞–µ—Ç–µ\")\n\tend, bg)\n\n\tlocal scr = uigs.Create(\"igs_scroll\", bg)\n\tscr:Dock(FILL) scr:SetWide(activity:GetWide() - infpan:GetWide())\n\t-- scr:SetSize(activity:GetWide() - infpan:GetWide(),act_tall)\n\t-- scr:SetPos(infpan:GetWide(),0)\n\n\tIGS.AddTextBlock(scr, \"–í–∞—à –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å\", \"–ß—Ç–æ-—Ç–æ —Ç—É—Ç –ø—É—Å—Ç–æ–≤–∞—Ç–æ...\")\n\n\tscr:AddItem( uigs.Create(\"DIconLayout\", function(icons)\n\t\ticons:SetWide(scr:GetWide())\n\t\ticons:SetSpaceX(2)\n\t\ticons:SetSpaceY(2)\n\t\ticons.Paint = function() end\n\n\t\tlocal function removeFromCanvas(itemPan)\n\t\t\tif IsValid(itemPan) then -- –Ω–µ –∑–∞–∫—Ä—ã–ª–∏ –æ–∫–Ω–æ\n\t\t\t\tbg.side:Reset()\n\t\t\t\tinfpan:Reset()\n\t\t\t\titemPan:Remove()\n\t\t\tend\n\t\tend\n\n\t\tfunction icons:AddItem(ITEM, dbID)\n\t\t\tlocal item = icons:Add(\"igs_item\")\n\t\t\titem:SetSize(icons:GetWide(),60)\n\t\t\titem:SetIcon(ITEM:ICON())\n\t\t\titem:SetName(ITEM:Name())\n\t\t\titem:SetSign(\"–î–µ–π—Å—Ç–≤—É–µ—Ç \" .. IGS.TermToStr(ITEM:Term()))\n\t\t\titem.DoClick = function()\n\t\t\t\tinfpan:Reset()\n\t\t\t\tinfpan:SetIcon(ITEM:ICON())\n\t\t\t\tinfpan:SetName(ITEM:Name())\n\t\t\t\tinfpan:SetImage(ITEM:IMG())\n\t\t\t\tinfpan:SetSubNameButton(ITEM:Group() and ITEM:Group():Name(), function()\n\t\t\t\t\tIGS.WIN.Group(ITEM:Group():UID())\n\t\t\t\tend)\n\t\t\t\tinfpan:SetDescription(ITEM:Description())\n\t\t\t\tinfpan:SetInfo(IGS.FormItemInfo(ITEM, LocalPlayer())) -- lp –¥–ª—è GetPrice\n\n\n\t\t\t\tbg.side:Reset()\n\n\t\t\t\tlocal act_btn = IGS.AddButton(bg.side, \"\",function()\n\t\t\t\t\tIGS.ProcessActivate(dbID, function(ok) -- iPurchID, sMsg_\n\t\t\t\t\t\tif not ok then return end\n\n\t\t\t\t\t\tremoveFromCanvas(item)\n\t\t\t\t\tend)\n\t\t\t\tend).button\n\t\t\t\tact_btn:SetActive(true)\n\t\t\t\tact_btn:SetText(\"–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å\")\n\n\t\t\t\tif IGS.C.Inv_AllowDrop then\n\t\t\t\t\tIGS.AddButton(bg.side,\"–ë—Ä–æ—Å–∏—Ç—å –Ω–∞ –ø–æ–ª\",function()\n\t\t\t\t\t\tIGS.DropItem(dbID,function()\n\t\t\t\t\t\t\tremoveFromCanvas(item)\n\t\t\t\t\t\tend)\n\t\t\t\t\tend)\n\t\t\t\tend\n\t\t\tend\n\t\tend\n\n\t\tfor _,v in ipairs(dat) do\n\t\t\ticons:AddItem(v.item, v.id)\n\t\tend\n\n\t\thook.Add(\"IGS.PlayerPurchasedItem\",\"UpdateInventoryView\",function(_, ITEM, invDbID)\n\t\t\ticons:AddItem(ITEM, invDbID)\n\t\tend)\n\n\n\tend) )\n\n\tscr:AddItem(uigs.Create(\"Panel\", function(end_margin)\n\t\tend_margin:SetTall(5)\n\tend))\n\n\tactivity:AddTab(\"–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å\",bg,\"materials\/icons\/fa32\/cart-arrow-down.png\")\nend\n\nhook.Add(\"IGS.CatchActivities\",\"inventory\",function(activity,sidebar)\n\tif not IGS.C.Inv_Enabled then return end\n\n\tIGS.GetInventory(function(items)\n\t\tif not IsValid(sidebar) then return end\n\t\tloadTab(activity,sidebar,items)\n\tend)\nend)\n\n-- IGS.UI()\n", "igs\/repeater.lua":"-- –ê–ª–≥–æ—Ä–∏—Ç–º –∏ –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–ø–∏—Ç–µ—Ä–∞: https:\/\/gist.github.com\/5e5afdff55cc1f70f1c1a459b8487943\n\nIGS.REPEATER = IGS.REPEATER or IGStack()\nlocal R = IGS.REPEATER\n\nfunction R:IsEmpty() -- –≤–Ω–µ—à–∫–∞\n\treturn self:isempty()\nend\n--------------------------------------------------------\n\nfunction R:Query(REQ)\n\tIGS.WrapQuery(REQ[1], REQ[2], REQ[3])\nend\n\nfunction R:ProcessNextQuery()\n\tlocal NEXT_REQ = self:lpop()\n\tif NEXT_REQ then\n\t\tself:Query(NEXT_REQ) -- –æ–¥–∏–Ω –∑–∞ –¥—Ä—É–≥–∏–º, –ø–æ–∫–∞ –Ω–µ –∑–∞–∫–æ–Ω—á–∞—Ç—Å—è\n\telse -- —Å—Ç–∞–≤–∏—Ç—Å—è ok –¥–ª—è IGS\n\t\thook.Run(\"IGS.RepeaterEmpty\")\n\tend\nend\n\nfunction R:SafeQuery(sMethod, tParams, fOnSuccess)\n\tlocal REQ = {sMethod, tParams, fOnSuccess}\n\n\tif self:IsEmpty() then\n\t\tself:Query(REQ)\n\telse\n\t\tself:rpush(REQ)\n\tend\nend\n\n--------------------------------------------------------\n\n-- func > iter\n-- –°–∫–æ–ª—å–∫–æ —Ä–∞–∑ —Ñ—É–Ω–∫—Ü–∏—è –ø–µ—Ä–µ–≤—ã–ø–æ–ª–Ω—è–ª–∞—Å—å\nlocal repeats_counter = setmetatable({}, {__mode = \"k\"})\n\nlocal SHOULD_REPEAT_CASES = {\n\t[\"too_many_requests\"] = true,\n\t[\"http_error\"] = true,\n\n\t-- —Å—Ç–æ–∏—Ç –ª–∏? –ß—Ç–æ –µ—Å–ª–∏ –º–µ—Ç–æ–¥ —Å–ª–æ–º–∞–ª—Å—è –Ω–∞ –ø–æ—Å—Ç–æ—è–Ω–∫–µ?\n\t[\"invalid_response_format\"] = true,\n}\n\n-- –ù—É–∂–Ω–æ, —á—Ç–æ–±—ã –∑–∞–ø—Ä–æ—Å—ã –±–µ–∑ –∫–æ–ª–±—ç–∫–∞ –Ω–µ –≤—ã–¥–∞–≤–∞–ª–∏ –æ—à–∏–±–∫—É\n-- https:\/\/t.me\/c\/1353676159\/12486\nlocal function getBlankCallback(sMethod)\n\treturn function()\n\t\tIGS.prints(\"\", \"–†–µ–¥–∫–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ. –í—ã–ø–æ–ª–Ω–∏–ª—Å—è \", sMethod, \" –±–µ–∑ –∫–æ–ª–±—ç–∫–∞, –∫–æ—Ç–æ—Ä—ã–π —Å–Ω–∞—á–∞–ª–∞ '—É–ø–∞–ª'\")\n\tend\nend\n\n-- –ü–µ—Ä–µ–Ω–æ—Å–∏—Ç –∑–∞–ø—Ä–æ—Å –≤ –∫–æ–Ω–µ—Ü –æ—á–µ—Ä–µ–¥–∏ –∏–ª–∏ –æ—Ç–±—Ä–∞—Å—ã–≤–∞–µ—Ç –µ–≥–æ\nhook.Add(\"IGS.OnApiError\", \"repeater\", function(sMethod, error_uid, tParams, fOnSuccess)\n\tif SHOULD_REPEAT_CASES[error_uid] then\n\t\tfOnSuccess = fOnSuccess or getBlankCallback(sMethod)\n\n\t\tlocal try = (repeats_counter[fOnSuccess] or 0) + 1\n\t\trepeats_counter[fOnSuccess] = try\n\n\t\tif try <= 15 then\n\t\t\t-- –°–ª–µ–¥—É—é—â–∏–µ –∑–∞–ø—Ä–æ—Å—ã —Ç–µ–ø–µ—Ä—å –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –≤ –æ—á–µ—Ä–µ–¥—å, –∞ –Ω–µ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è\n\t\t\t-- –ù–∏–∂–µ —Ç–∞–π–º–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Å–∫–æ—Ä–æ –Ω–∞—á–Ω–µ—Ç –∏—Ö –æ–±—Ä–∞–±–æ—Ç–∫—É\n\t\t\tR:rpush({sMethod, tParams, fOnSuccess})\n\t\tend\n\n\t\t-- –ë—ã–ª burst –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ —Ö—É–∫ –≤—ã–∑–≤–∞–ª—Å—è –¥–≤–∞–∂–¥—ã\n\t\tif not timer.Exists(\"IGS_REPEATER\") then\n\t\t\tIGS.dprint(Color(250, 50, 50), \"–û—à–∏–±–∫–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–ø—Ä–æ—Å–∞: \", error_uid, \". –ó–∞–ø—É—â–µ–Ω —Ä–µ–ø–∏—Ç–µ—Ä\")\n\t\t\ttimer.Create(\"IGS_REPEATER\", 10, 1, function() R:ProcessNextQuery() end)\n\t\tend\n\telse\n\t\t-- –ê–Ω—Ç–∏–∑–∞–≤–∏—Å–∞–Ω–∏–µ –ø—Ä–∏\n\t\t-- [—É—Å–ø–µ—à–Ω—ã–π > –Ω–µ—É—Å–ø–µ—à–Ω—ã–π > —É—Å–ø–µ—à–Ω—ã–π]\n\t\t-- https:\/\/img.qweqwe.ovh\/1565285856105.png\n\t\tR:ProcessNextQuery()\n\tend\nend)\n\n-- –í—ã—Ä—É–±–∞–µ—Ç —Ç–∞–π–º–µ—Ä, –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –∑–∞–ø—Ä–æ—Å—ã\nhook.Add(\"IGS.OnApiSuccess\", \"repeater\", function()\n\t-- –≠—Ç–æ –∫–∞–ª–ª–±—ç–∫ –≤–Ω—É—Ç—Ä–∏ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ö—É–∫–∞, —Ç–æ–µ—Å—Ç—å GMD –∑–∞—Ä–∞–±–æ—Ç–∞–ª\n\t-- –∏ –ø–æ –ª–æ–≥–∏–∫–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –≤—ã–ø–æ–ª–Ω—è—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ\n\t-- –ï—Å–ª–∏ –∫–∞–∫–æ–π-—Ç–æ –≤—Å–µ –∂–µ –¥–∞—Å—Ç —Å–±–æ–π, —Ç–æ —Å–Ω–æ–≤–∞ –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–π–º–µ—Ä\n\tR:ProcessNextQuery() -- one by one\nend)\n", "igs\/modules\/extra\/init_cl.lua":"list.Set(\"DesktopWindows\", \"IGS\",{\n\ttitle = \"–ê–≤—Ç–æ–¥–æ–Ω–∞—Ç\",\n\ticon  = \"icon16\/money_add.png\",\n\tinit  = function()\n\t\tIGS.UI()\n\tend\n})\n\n-- IGS.UI()\n", "igs\/extensions\/serverguard.lua":"local STORE_ITEM = MT_IGSItem\n\nlocal is_on_sale_ranks = {}\n\nfunction STORE_ITEM:SetSGGroup(sUserGroup)\n\tis_on_sale_ranks[sUserGroup] = true\n\n\treturn self:SetInstaller(function(pl)\n\t\tlocal rankData = serverguard.ranks:GetRank(sUserGroup)\n\t\tassert(rankData, \"IGS: –í SetSGGroup —É–∫–∞–∑–∞–Ω–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –≥—Ä—É–ø–ø–∞\")\n\t\tserverguard.player:SetRank(pl, sUserGroup, 0)\n\t\tserverguard.player:SetImmunity(pl, rankData.immunity)\n\t\tserverguard.player:SetTargetableRank(pl, rankData.targetable)\n\t\tserverguard.player:SetBanLimit(pl, rankData.banlimit)\n\tend):SetMeta(\"sggroup\", sUserGroup)\nend\n\nif CLIENT then return end\n\n-- addhook –Ω–µ –ø–æ–¥–æ–π–¥–µ—Ç (–Ω–µ –±—É–¥–µ—Ç –∞–≤—Ç–æ—Å–Ω—è—Ç–∏—è. –ú–æ–∂–Ω–æ –∏ –æ—Ç–¥–µ–ª—å–Ω–æ, –∫–æ–Ω–µ—á–Ω–æ)\nhook.Add(\"IGS.PlayerPurchasesLoaded\", \"sggroup\", function(pl, purchases)\n\tif not serverguard then hook.Remove(\"IGS.PlayerPurchasesLoaded\", \"sggroup\") return end\n\tif hook.Run(\"IGS.SkipSGRestore\", pl) then return end\n\n\tlocal prior\n\n\tfor uid in pairs(purchases or {}) do\n\t\tlocal ITEM = IGS.GetItemByUID(uid)\n\t\tif ITEM:GetMeta(\"sggroup\") and (not prior or ITEM.id >= prior.id) then\n\t\t\tprior = ITEM\n\t\tend\n\tend\n\n\tif prior then\n\t\tprior:Setup(pl)\n\telse -- –Ω–∏ –æ–¥–∏–Ω –Ω–µ –∫—É–ø–ª–µ–Ω (—Å—Ä–æ–∫ –∏—Å—Ç–µ–∫?)\n\t\tlocal player_rank = serverguard.player:GetRank(pl) -- default: user\n\t\tif is_on_sale_ranks[player_rank] then -- –Ω–æ —Ä–∞–Ω–≥, –∫–æ—Ç–æ—Ä—ã–π —É –∏–≥—Ä–æ–∫–∞ –ø—Ä–æ–¥–∞–µ—Ç—Å—è\n\t\t\tserverguard.player:SetRank(pl, \"user\", 0) -- —Å–Ω–∏–º–∞–µ–º\n\t\tend\n\tend\nend)\n", "igs\/objects\/shop_group.lua":"--[[-------------------------------------------------------------------------\n–í –º–∞–≥–∞–∑–∏–Ω–µ –µ—Å—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –∞ –µ—Å—Ç—å –≥—Ä—É–ø–ø—ã —Ç–æ–≤–∞—Ä–æ–≤.\n\n–ö–∞—Ç–µ–≥–æ—Ä–∏—è - —ç—Ç–æ –≥—Ä—É–ø–ø–∞ –ø–æ–¥–æ–±–Ω—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤.\n–ù–∞–ø—Ä–∏–º–µ—Ä, –≤–∏–ø—ã –∏ –ø—Ä–µ–º–∏—É–º—ã\n\n–ì—Ä—É–ø–ø–∞ —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–∑–Ω–æ–≤–∏–¥–Ω–æ—Å—Ç—å –æ–¥–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä–∞.\n–ù–∞–ø—Ä–∏–º–µ—Ä –≥—Ä—É–ø–ø–∞ –≤–∏–ø –ø—Ä–∞–≤ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–µ–±–µ –≤–∏–ø –Ω–∞ –Ω–µ–¥–µ–ª—é, –º–µ—Å—è—Ü, –Ω–∞–≤—Å–µ–≥–¥–∞ –∏ —Ç.–¥.\n\n–≠—Ç–æ—Ç —Ñ–∞–π–ª –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ç–æ—Ä –ì–†–£–ü–ü\n---------------------------------------------------------------------------]]\n\nlocal ITEM_GROUP = {}\nITEM_GROUP.__index = ITEM_GROUP\nITEM_GROUP.__tostring = function(self)\n\t-- \"ITEM GROUP (Name Of Group) [i]\"\n\treturn \"IGS GROUP (\" .. self:Name() .. \")[\" .. #self:Items() .. \"]\"\nend\n-- MT_IGSGroup = getmetatable( IGS.NewGroup(\"\") )\n\n\n\n-- Fade, Tiger, Damascus\nfunction ITEM_GROUP:AddItem(STORE_ITEM,sNameOverride)\n\tif self.items.STORED[STORE_ITEM:UID()] then\n\t\treturn self.items.STORED[STORE_ITEM:UID()]\n\tend\n\n\tlocal dat = {\n\t\titem = STORE_ITEM,\n\t\tname = sNameOverride or STORE_ITEM:Name()\n\t}\n\n\tlocal ID = #self.items.MAP + 1\n\tself.items.MAP[ID] = dat\n\tself.items.STORED[STORE_ITEM:UID()] = dat\n\n\tSTORE_ITEM.group = self\n\n\treturn self.items.MAP[ID]\nend\n\nfunction ITEM_GROUP:SetIcon(sIconUrl)\n\tself.icon_url = sIconUrl\n\treturn self\nend\n\nfunction ITEM_GROUP:SetHighlightColor(color)\n\tif CLIENT then\n\t\tself.highlight = color\n\tend\n\treturn self\nend\n\n\n\n\nfunction ITEM_GROUP:Name()\n\treturn self.name\nend\n\nfunction ITEM_GROUP:UID() -- TODO\n\treturn self:Name()\nend\n\nfunction ITEM_GROUP:Items()\n\treturn self.items.MAP\nend\n\nfunction ITEM_GROUP:ICON()\n\treturn self.icon_url\nend\n\n\n\n\nIGS.GROUPS = IGS.GROUPS or {}\n\n-- Flip Knifes\nfunction IGS.NewGroup(sName)\n\tif IGS.GROUPS[sName] then\n\t\treturn IGS.GROUPS[sName]\n\tend\n\n\tlocal group = setmetatable({\n\t\tname = sName,\n\t\titems = {\n\t\t\tMAP    = {}, -- iter, STORED\n\t\t\tSTORED = {}  -- STORE_ITEM:UID(),\n\t\t},\n\t},ITEM_GROUP)\n\n\tIGS.GROUPS[sName] = group\n\n\treturn group\nend\n\nfunction IGS.GetGroups()\n\treturn IGS.GROUPS\nend\n\nfunction IGS.GetGroup(name)\n\treturn IGS.GROUPS[name]\nend\n", "igs\/interface\/vgui\/igs_panels_layout_list.lua":"local PANEL = {}\n\nfunction PANEL:Init()\n\t-- categ_name > categpan\n\tself.list = {}\nend\n\n-- –û–¥–∏–Ω–æ—á–Ω–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ\nfunction PANEL:Add(panel,sCategory)\n\tlocal cat = sCategory or \"–†–∞–∑–Ω–æ–µ\"\n\n\tif not self.list[cat] then\n\t\tself.list[cat] = uigs.Create(\"igs_panels_layout\", self)\n\t\tself.list[cat]:SetWide(650)\n\t\tself.list[cat]:SetName(sCategory)\n\t\tself.list[cat]:DisableAlignment(self.disabled_align)\n\n\t\tself:AddItem(self.list[cat])\n\tend\n\n\tself.list[cat]:Add(panel)\n\n\treturn self.list[cat]\nend\n\n-- –û—Ç–∫–ª—é—á–∞–µ—Ç —Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–ª–ª–µ–º–µ–Ω—Ç–æ–≤ –≤–æ –≤—Å–µ—Ö –ø–∞–Ω–µ–ª—è—Ö –ª—ç–π–∞—É—Ç–∞\nfunction PANEL:DisableAlignment(bDisable)\n\tself.disabled_align = bDisable\nend\n\nfunction PANEL:Clear()\n\tfor _,panel in pairs(self.list) do -- categ\n\t\tpanel:Remove()\n\tend\n\n\tself:Init()\nend\n\nvgui.Register(\"igs_panels_layout_list\", PANEL, \"igs_scroll\")\n-- IGS.UI()\n", "igs\/objects\/level.lua":"IGS.LVL = IGS.LVL or setmetatable({\n\tMAP    = {},\n\tSTORED = {}\n},{\n\t__call = function(self,...)\n\t\treturn self.Add(...)\n\tend\n})\n\n\n\nlocal LVL = {}\nLVL.__index = LVL\n\nfunction LVL:SetBonus(fOnReach)\n\tself.bonus = fOnReach -- ply in args\n\treturn self\nend\n\nfunction LVL:SetName(sName) -- OUTDATED (—É–¥–∞–ª–µ–Ω–æ 2018.03.12)\n\tself.name = sName\n\treturn self\nend\n\nfunction LVL:SetDescription(sDesc)\n\tself.description = sDesc\n\treturn self\nend\n\nfunction LVL:Name()\n\treturn self.name\nend\n\nfunction LVL:Description()\n\treturn self.description\nend\n\nfunction LVL:LVL()\n\treturn self.lvl\nend\n\nfunction LVL:Cost()\n\treturn self.cost\nend\n\nfunction LVL:GetNext() -- may be nil\n\tlocal ilvl,OBJ = next(IGS.LVL.MAP,self.lvl)\n\treturn OBJ,ilvl\nend\n\n-- –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É —É—Ä–æ–≤–Ω—è–º–∏\n-- function LVL:NeedToRaise() -- nil on last lvl\n-- \tlocal n = self:GetNext()\n-- \treturn n and n.cost - self.cost\n-- end\n\nfunction IGS.LVL.Add(iNeedSum, sName)\n\tlocal OBJ = setmetatable({\n\t\tcost = iNeedSum,\n\t\tname = sName\n\t},LVL)\n\n\tIGS.LVL.STORED[iNeedSum] = OBJ\n\tIGS.LVL.Rearrange()\n\n\treturn OBJ\nend\n\nfunction IGS.LVL.Get(iLVL)\n\treturn IGS.LVL.MAP[iLVL]\nend\n\n-- –î–∞–µ—Ç –æ–±—ä–µ–∫—Ç –ª–≤–ª, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π —É–∫–∞–∑–∞–Ω–Ω–æ–π —Å—É–º–º–µ\nfunction IGS.LVL.GetByCost(iRealCost)\n\tfor lvl = 1,#IGS.LVL.MAP do\n\t\tif not IGS.LVL.MAP[lvl + 1] or IGS.LVL.MAP[lvl + 1].cost > iRealCost then\n\t\t\treturn IGS.LVL.MAP[lvl]\n\t\tend\n\tend\nend\n\n-- –£—Ä–æ–≤–Ω–∏ –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ —Å—Ç–æ–∏–º–æ—Å—Ç–∏.\n-- –ù–∞—á–∞–ª–æ —é–∑–∞—Ç—å—Å—è –ø—Ä–∏ –≤—ã–¥–∞—á–µ –±–æ–Ω—É—Å–æ–≤ –∑–∞ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ: https:\/\/trello.com\/c\/EjmPOeso\/476--\n-- function IGS.LVL.GetRange(iFromCost, iToCost)\n-- \tlocal t = {}\n\n-- \tfor iLVL,lvl in ipairs(IGS.LVL.MAP) do\n-- \t\tif lvl.cost >= iFromCost and lvl.cost <= iToCost then\n-- \t\t\ttable.insert(t,lvl)\n-- \t\tend\n-- \tend\n\n-- \treturn t\n-- end\n\n-- –ü–µ—Ä–µ—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –∫—ç—à –ø–æ—Ä—è–¥–∫–∞ –ª–µ–≤–µ–ª–æ–≤\n-- –ù—É–∂–Ω–æ –Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ —Å–Ω–∞—á–∞–ª–∞ –¥–æ–±–∞–≤–∏–ª–∏ 30 –ª–≤–ª, –∞ –ø–æ—Ç–æ–º 10\n-- —Ç–æ —á—Ç–æ–±—ã –Ω–µ —Å—á–∏—Ç–∞–ª–æ—Å—å, —á—Ç–æ 30 –Ω–∏–∂–µ 10\nfunction IGS.LVL.Rearrange()\n\tIGS.LVL.MAP = {} -- reset\n\n\tlocal i = 0\n\tfor sum in SortedPairs(IGS.LVL.STORED) do\n\t\t-- –¥–æ–ª–≥–æ –æ–±—ä—è—Å–Ω—è—Ç—å. –ö–æ—Ä–æ—á–µ —Å–æ—Ä—Ç–µ–¥–ø—ç–∏—Ä—Å –ø–æ —Ö–æ–¥—É –∫–æ–ø–∏—Ä—É–µ—Ç –æ–±—ä–µ–∫—Ç –ø–µ—Ä–µ–¥ —Ç–µ–º,\n\t\t-- –∫–∞–∫ –≤–µ—Ä–Ω—É—Ç—å –µ–≥–æ –≤ —Ü–∏–∫–ª –∏ –Ω–µ–ª—å–∑—è —Å–¥–µ–ª–∞—Ç—å for sum,OBJ\n\t\tlocal OBJ = IGS.LVL.STORED[sum]\n\t\ti = i + 1\n\t\tOBJ.lvl = i\n\n\t\tIGS.LVL.MAP[i] = OBJ\n\tend\nend\n", "igs\/network\/nw_sh.lua":"IGS.nw.Register(\"igs_lvl\")\n\t:Write(net.WriteUInt,7) -- 127\n\t:Read(function()\n\t\treturn IGS.LVL.Get(net.ReadUInt(7))\n\tend)\n:SetLocalPlayer()\n\n\nIGS.nw.Register(\"igs_balance\") -- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –¢–û–õ–¨–ö–û —É –∫–ª–∏–µ–Ω—Ç–æ–≤!\n\t:Write(net.WriteDouble)\n\t:Read(net.ReadDouble)\n:SetLocalPlayer() --:SetHook(\"OnIGSBalanceChanged\")\n\n\nIGS.nw.Register(\"igs_total_transactions\")\n\t:Write(net.WriteUInt,17) -- 131071\n\t:Read(net.ReadUInt,17)\n:SetLocalPlayer()\n\n-- –î–æ 16 —Ñ–µ–≤ 2022 –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∏—Å—å —á–∏—Å—Ç–æ ID –ø—Ä–µ–¥–º–µ—Ç–æ–≤\n-- –ù–æ –≤–µ–± –ª–æ–∞–¥ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Ç–æ–º—É, —á—Ç–æ –µ—â–µ –¥–æ –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∞–º–æ–≥–æ –∏–≥—Ä–æ–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –µ–º—É –º–æ–≥–ª–∏\n-- –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å—Å—è ID –ø—Ä–µ–¥–º–µ—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –Ω–µ —É—Å–ø–µ–ª–∏ —Å–æ–∑–¥–∞—Ç—å—Å—è (–Ω–∞–ø—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–≤–∞–ª–∏—Å—å –≤ —Ö—É–∫–µ IGS.Loaded)\nIGS.nw.Register(\"igs_purchases\"):Write(function(networked_purchases)\n\tlocal flatten = {}\n\tfor uid, am in pairs(networked_purchases) do\n\t\tlocal s = #flatten\n\t\tflatten[s + 1] = uid\n\t\tflatten[s + 2] = am\n\tend\n\n\tnet.WriteUInt(#flatten \/ 2, 8) -- 255\n\n\tfor i = 1,#flatten,2 do\n\t\tnet.WriteString(flatten[i])\n\t\tnet.WriteUInt(flatten[i + 1], 9)\n\tend\nend):Read(function()\n\tlocal res = {}\n\tfor _ = 1,net.ReadUInt(8) do\n\t\tres[net.ReadString()] = net.ReadUInt(9)\n\tend\n\treturn res\nend):SetLocalPlayer():SetHook(\"IGS.PlayerPurchasesLoaded\")\n\n\n--[[--------------\n\tCONSTANTS\n----------------]]\nIGS.BIT_TX = 8 -- max —Ç—Ä–∞–Ω–∑ –≤ –Ω–µ—Ç–≤–æ—Ä–∫–µ (255)\nIGS.BIT_LATEST_PURCH = 6 -- 63\n\n-- –†–∞–∑–º–µ—Ä —è—á–µ–π–∫–∏\nIGS.BIT_PURCH_ID = 32 -- 4294967295\nIGS.BIT_INV_ID = 32\nIGS.BIT_TX_ID = 32\n\n\n--[[--------------\n\t.net Helpers\n----------------]]\nfunction net.WriteIGSItem(ITEM) net.WriteString(ITEM:UID()) end\nfunction net.ReadIGSItem() return IGS.GetItemByUID(net.ReadString()) end\n-- function net.WriteIGSGroup(GROUP) net.WriteString(GROUP:Name()) end\n-- function net.ReadIGSGroup() return IGS.GetGroup(net.ReadString()) end\n\nlocal function writeIf(value, fWrite, arg_)\n\t-- Server = 0 –∑–∞–ø–∏—Å—ã–≤–∞–ª false, —Ö–æ—Ç—å —ç—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ\n\t-- –î–ª—è –æ—Ç–ª–æ–≤–∞ –±–∞–≥–∞ –±—ã–ª–∞ —Ç–∞–∫–∞—è —à—Ç—É–∫–∞:\n\t-- https:\/\/img.qweqwe.ovh\/1567089471715.png\n\tnet.WriteBool(value ~= nil)\n\tif value then\n\t\tfWrite(value, arg_)\n\tend\nend\n\nlocal function readIf(fRead, arg_)\n\treturn net.ReadBool() and fRead(arg_)\nend\n\nfunction net.WriteIGSPurchase(p)\n\tnet.WriteUInt(p.ID,IGS.BIT_PURCH_ID)\n\tnet.WriteString(p.Item)\n\n\twriteIf(p.Server,  net.WriteUInt, 6) -- 63\n\twriteIf(p.Purchase,net.WriteUInt, 32)\n\twriteIf(p.Expire,  net.WriteUInt, 32)\n\twriteIf(p.Nick,    net.WriteString)\nend\n\nfunction net.ReadIGSPurchase()\n\treturn {\n\t\tid       = net.ReadUInt(IGS.BIT_PURCH_ID),\n\t\titem     = net.ReadString(),\n\n\t\tserver   = readIf(net.ReadUInt, 6),\n\t\tpurchase = readIf(net.ReadUInt, 32),\n\t\texpire   = readIf(net.ReadUInt, 32),\n\t\tnick     = readIf(net.ReadString),\n\t}\nend\n\nfunction net.WriteIGSTx(tx)\n\tnet.WriteUInt(tx.ID, IGS.BIT_TX_ID)\n\twriteIf(tx.Server, net.WriteUInt, 6) -- 63\n\tnet.WriteDouble(tx.Sum)\n\tnet.WriteUInt(tx.Time, 32) -- dohuya\n\twriteIf(tx.Note, net.WriteString)\nend\n\nfunction net.ReadIGSTx()\n\treturn {\n\t\tid     = net.ReadUInt(IGS.BIT_TX_ID),\n\t\tserver = readIf(net.ReadUInt, 6),\n\t\tsum    = net.ReadDouble(),\n\t\tdate   = net.ReadUInt(32), -- timestamp\n\t\tnote   = readIf(net.ReadString),\n\t}\nend\n\nfunction net.WriteIGSInventoryItem(inv_it)\n\tnet.WriteUInt(inv_it.ID, IGS.BIT_INV_ID)\n\tnet.WriteString(inv_it.Item)\nend\n\nfunction net.ReadIGSInventoryItem()\n\treturn {\n\t\tid = net.ReadUInt(IGS.BIT_INV_ID),\n\t\titem = IGS.GetItemByUID(net.ReadString()),\n\t}\nend\n\nfunction net.WriteIGSMessage(sErr)\n\twriteIf(sErr, net.WriteString)\nend\n\nfunction net.ReadIGSMessage()\n\treturn net.ReadBool() and net.ReadString()\nend\n\nnet.WriteIGSError = net.WriteIGSMessage\nnet.ReadIGSError  = net.ReadIGSMessage\n", "igs\/interface\/windows\/group_content.lua":"local function getSpacePanel()\n\treturn uigs.Create(\"Panel\", function(self)\n\t\tself:Dock(TOP)\n\t\tself:SetTall(3)\n\tend)\nend\n\nfunction IGS.WIN.Group(sGroupUID)\n\tlocal GROUP = IGS.GetGroup(sGroupUID)\n\tassert(GROUP, \"Incorrect group: \" .. tostring(sGroupUID))\n\n\tsurface.PlaySound(\"ambient\/weather\/rain_drip1.wav\")\n\n\treturn uigs.Create(\"igs_frame\", function(bg)\n\t\tbg:SetTitle(GROUP:Name())\n\t\tbg:MakePopup()\n\n\t\tlocal cellW,cellH -- –Ω–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç–µ–Ω—Ç–∞\n\t\tfunction bg:AddIGSItem(ITEM, nameInGroup)\n\t\t\tlocal it = uigs.Create(\"igs_item\"):SetItem(ITEM)\n\t\t\tit:SetName(nameInGroup or ITEM:Name())\n\n\t\t\tif not cellW then\n\t\t\t\tcellW,cellH = it:GetSize()\n\t\t\tend\n\n\t\t\tit:SetSize(cellW * 1.3, cellH)\n\t\t\tit.DoClick = function()\n\t\t\t\t-- bg:Close()\n\t\t\t\tIGS.WIN.Item(ITEM:UID())\n\t\t\tend\n\n\t\t\tbg.scroll:AddItem(it)\n\t\tend\n\n\t\tbg.scroll = uigs.Create(\"igs_scroll\", bg)\n\t\tbg.scroll:Dock(FILL)\n\t\tbg.scroll:SetPadding(6)\n\n\n\t\tbg.scroll:AddItem( getSpacePanel() ) -- –∏–∑-–∑–∞ –ø–∞–¥–¥–∏–Ω–≥–∞ #1\n\t\tfor _,v in pairs(GROUP:Items()) do\n\t\t\tlocal ITEM = v.item\n\t\t\tif v.item:CanSee( LocalPlayer() ) then -- –µ—â–µ –≤ main_cl\n\t\t\t\tbg:AddIGSItem(ITEM, v.name)\n\t\t\tend\n\t\tend\n\t\tbg.scroll:AddItem( getSpacePanel() ) -- –∏–∑-–∑–∞ –ø–∞–¥–¥–∏–Ω–≥–∞ #2\n\n\t\t-- or: https:\/\/t.me\/c\/1353676159\/21116\n\t\tbg:SetSize((cellW or 220) * 1.3, 300)\n\t\tbg:RememberLocation(\"igs_group\")\n\tend)\nend\n-- IGS.UI()\n", "igs\/interface\/skin.lua":"--[[-------------------------------------------------------------------------\n\t–ß–µ—Ä–µ–∑ —ç—Ç–æ—Ç —Ñ–∞–π–ª –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø–æ–≤—Å–µ–º–µ—Å—Ç–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Å–∫–∏–Ω.\n\t–î–∞ –∏ –≤–æ–æ–±—â–µ, –≤—Å–µ –≤ –≥–æ–≤–Ω–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ, –Ω–æ –º–Ω–µ –ª–µ–Ω—å —É–∂–µ –¥–µ–ª–∞—Ç—å –≤—Å–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.\n\t–≠—Ç–æ –∫—É—á–∞ –≥–µ–º–º–æ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –Ω–∏–∫–æ–º—É –Ω–µ –Ω—É–∂–µ–Ω\n---------------------------------------------------------------------------]]\n\nIGS.S = IGS.S or {}\n\nIGS.S.COLORS = {\n\tFRAME_HEADER        = Color(255,255,255), -- –§–æ–Ω –≤–µ—Ä—Ö—É—à–∫–∏ —Ñ—Ä–µ–π–º–æ–≤ –≤ —Ç.—á. –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è —Å—á–µ—Ç–∞ –∏ —Ç.–¥. https:\/\/img.qweqwe.ovh\/1491950958825.png\n\tACTIVITY_BG         = Color(255,255,255), -- –§–æ–Ω –≤ –∫–∞–∂–¥–æ–π –≤–∫–ª–∞–¥–∫–µ (–æ—Å–Ω–æ–≤–Ω–æ–π) https:\/\/img.qweqwe.ovh\/1509370647204.png\n\tTAB_BAR             = Color(250,250,250), -- –§–æ–Ω —Ç–∞–± –±–∞—Ä–∞ https:\/\/img.qweqwe.ovh\/1509370669492.png\n\n\tPASSIVE_SELECTIONS  = Color(240,240,240), -- –§–æ–Ω –ø–∞–Ω–µ–ª–∏ —Ç–µ–≥–æ–≤, —Ü–≤–µ—Ç –∫–Ω–æ–ø–∫–∏ —Å –±–∞–ª–∞–Ω—Å–æ–º, –≤–µ—Ä—Ö—É—à–∫–∏ —Ç–∞–±–ª–∏—Ü, –Ω–µ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–µ –∫–Ω–æ–ø–∫–∏ https:\/\/img.qweqwe.ovh\/1509370720597.png\n\tINNER_SELECTIONS    = Color(255,255,255), -- –§–æ–Ω –∏–∫–æ–Ω–æ–∫ –Ω–∞ –ø–ª–∞—à–∫–∞—Ö, —Ñ–æ–Ω –ø–∞–Ω–µ–ª–µ–∫ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø–æ–∫—É–ø–æ–∫... https:\/\/img.qweqwe.ovh\/1509370766148.png\n\n\tSOFT_LINE           = Color(240,240,240), -- –õ–∏–Ω–∏—è –º–µ–∂–¥—É —Å–µ–∫—Ü–∏—è–º–∏, —Ç–∏–ø–∞ \"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è\" –∏ \"–û–ø–∏—Å–∞–Ω–∏–µ\" –≤ –∏–Ω—Ñ–µ –æ–± –∏—Ç–µ–º–µ\n\tHARD_LINE           = Color(200,200,200), -- –û–±–≤–æ–¥–∫–∏ –ø–∞–Ω–µ–ª–µ–π\n\n\tHIGHLIGHTING        = Color(0,122,255),   -- –û–±–≤–æ–¥–∫–∞ –∫–Ω–æ–ø–æ–∫, —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏\n\tHIGHLIGHT_INACTIVE  = Color(160,160,160), -- –¶–≤–µ—Ç –∏–∫–æ–Ω–∫–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–π –∫–Ω–æ–ø–∫–∏ —Ç–∞–±–±–∞—Ä–∞, –º–∏–≥–∞—é—â–∞—è –∏–∫–æ–Ω–∫–∞ –Ω–∞ —Ñ—Ä–µ–π–º–µ –ø–æ–º–æ—â–∏ https:\/\/img.qweqwe.ovh\/1509371884592.png\n\n\tTEXT_HARD           = Color(0,0,0),       -- –ó–∞–≥–æ–ª–æ–≤–∫–∏, –≤—ã–¥–µ–ª—è—é—â–∏–µ—Å—è —Ç–µ–∫—Å—Ç—ã https:\/\/img.qweqwe.ovh\/1509372019687.png\n\tTEXT_SOFT           = Color(140,140,150), -- –û–ø–∏—Å–∞–Ω–∏—è, –∑–Ω–∞—á–µ–Ω–∏—è —á–µ–≥–æ-—Ç–æ\n\tTEXT_ON_HIGHLIGHT   = Color(255,255,255), -- –¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –Ω–∞ –≤—ã–¥–µ–ª–µ–Ω–Ω—ã—Ö –∫–Ω–æ–ø–∫–∞—Ö\n\n\tLOG_SUCCESS         = Color(76,217,100),  -- –í –ª–æ–≥–∞—Ö –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è —Ü–≤–µ—Ç —É—Å–ø–µ—à–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π\n\tLOG_ERROR           = Color(220,30,70),   -- –í –ª–æ–≥–∞—Ö –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è —Ü–≤–µ—Ç –æ—à–∏–±–æ–∫\n\tLOG_NORMAL          = Color(0,0,0),       -- –í –ª–æ–≥–∞—Ö –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –æ–±—ã—á–Ω—ã–µ –∑–∞–ø–∏—Å–∏\n\n\tICON                = Color(255,255,255), -- —Ü–≤–µ—Ç –∏–∫–æ–Ω–æ–∫ –Ω–∞ –ø–ª–∞—à–µ—á–∫–∞—Ö\n}\n\n-- –í–∞—Ä–∏–∞–Ω—Ç —Ä–∞—Å–∫—Ä–∞—Å–∫–∏ –æ—Ç –ü–∞–≤–µ–ª –¢—É–º–∞—á–µ–≤ (vk.com\/id240371602)\n-- –î–µ–º–æ: https:\/\/img.qweqwe.ovh\/1626714494454.jpg\n-- IGS.S.COLORS = {\n-- \tFRAME_HEADER        = Color(0,0,0),\n-- \tACTIVITY_BG         = Color(10,10,10,180),\n-- \tTAB_BAR             = Color(0,0,0),\n\n-- \tPASSIVE_SELECTIONS  = Color(0,0,0),\n-- \tINNER_SELECTIONS    = Color(0,0,0),\n\n-- \tSOFT_LINE           = Color(51,128,255),\n-- \tHARD_LINE           = Color(51,128,255),\n\n-- \tHIGHLIGHTING        = Color(51,128,255),\n-- \tHIGHLIGHT_INACTIVE  = Color(255,255,255),\n\n-- \tTEXT_HARD           = Color(255,255,255),\n-- \tTEXT_SOFT           = Color(255,255,255),\n-- \tTEXT_ON_HIGHLIGHT   = Color(255,255,255),\n\n-- \tLOG_SUCCESS         = Color(76,217,100),\n-- \tLOG_ERROR           = Color(255,45,85),\n-- \tLOG_NORMAL          = Color(255,255,255),\n\n-- \tICON                = Color(255,255,255),\n-- }\n\n-- –ü–æ–ø—ã—Ç–∫–∏ —Å–¥–µ–ª–∞—Ç—å —Ç–µ–º–Ω—ã–π —Å–∫–∏–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞\n-- IGS.S.COLORS = {\n-- \tFRAME_HEADER        = Color(23,23,23),\n-- \tACTIVITY_BG         = Color(13,13,13),\n-- \tTAB_BAR             = Color(23,23,23),\n\n-- \tPASSIVE_SELECTIONS  = Color(23,23,23),\n-- \tINNER_SELECTIONS    = Color(23,23,23),\n\n-- \tSOFT_LINE           = Color(50,50,50),\n-- \tHARD_LINE           = Color(66,66,66),\n\n-- \tHIGHLIGHTING        = Color(230,130,35),\n-- \tHIGHLIGHT_INACTIVE  = Color(130,130,130),\n\n-- \tTEXT_HARD           = Color(255,255,255),\n-- \tTEXT_SOFT           = Color(140,140,150),\n-- \tTEXT_ON_HIGHLIGHT   = Color(255,255,255),\n\n-- \tLOG_SUCCESS         = Color(76,217,100),\n-- \tLOG_ERROR           = Color(255,45,85),\n-- \tLOG_NORMAL          = Color(140,140,150),\n\n-- \tICON                = Color(255,255,255),\n-- }\n\nIGS.col = IGS.S.COLORS\n\n-- https:\/\/img.qweqwe.ovh\/1486557631077.png\nIGS.S.Panel = function(s,w,h,lL,tL,rL,bL)\n\tdraw.RoundedBox(0,0,0,w,h,IGS.col.PASSIVE_SELECTIONS) -- bg\n\n\tsurface.SetDrawColor(IGS.col.HARD_LINE) -- outline\n\n\tif lL then surface.DrawLine(0,0,0,h) end -- left line\n\tif tL then surface.DrawLine(0,0,w,0) end -- top line\n\tif rL then surface.DrawLine(w,0,w,h) end -- right line\n\tif bL then surface.DrawLine(0,h - 1,w,h - 1) end -- bottom line\nend\n\n-- https:\/\/img.qweqwe.ovh\/1486557676799.png\nIGS.S.RoundedPanel = function(s,w,h)\n\tdraw.RoundedBox(3,0,0,w,h,        IGS.col.HARD_LINE) -- outline\n\tdraw.RoundedBox(3,1,1,w - 2,h - 2,IGS.col.INNER_SELECTIONS) -- bg\n\n\treturn true\nend\n\n-- igs\\vgui\\igs_frame.lua\nIGS.S.Frame = function(s,w,h)\n\tdraw.RoundedBox(0,0,0,w,h,IGS.col.ACTIVITY_BG) -- bg\n\n\t-- \/header\n\tlocal th = s:GetTitleHeight()\n\tdraw.RoundedBox(0,0,0,w,th,IGS.col.FRAME_HEADER)\n\tsurface.SetDrawColor(IGS.col.HARD_LINE)\n\tsurface.DrawLine(0,th - 1,w,th - 1)\n\t-- \\header\nend\n\n-- igs\\vgui\\igs_table.lua\nIGS.S.TablePanel = function(s,w,h)\n\tif s.header_tall then\n\t\tIGS.S.Panel(s,w,s.header_tall) -- header\n\tend\nend\n\n-- igs_table, igs_frame\nIGS.S.Outline = function(s,w,h)\n\tsurface.SetDrawColor(IGS.col.HARD_LINE)\n\n\t-- https:\/\/img.qweqwe.ovh\/1486830692390.png\n\tsurface.DrawLine(0,h,0,0)\n\tsurface.DrawLine(0,0,w,0)\n\tsurface.DrawLine(w - 1,0,w - 1,h)\n\tsurface.DrawLine(w,h - 1,0,h - 1)\nend\n", "igs\/modules\/pushes\/init_sv.lua":"local log = kupol.log\n\nlocal function handleUpdate(upd)\n\tif log.level == 1 or log.level == 2 then\n\t\tPrintTable(upd)\n\tend\n\n\tif not upd.ok then\n\t\tlog.warning(\"GMD –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É: {}\", upd.error)\n\t\treturn\n\tend\n\n\t-- {cp = true\/false, data = {}, ok = true, method = \"payment\"}\n\thook.Run(\"IGS.IncomingMessage\", upd.data, upd.method, upd)\nend\n\nhook.Add(\"IGS.Loaded\", \"polling\", function()\n\tif IGS.POLLING then\n\t\tlog.debug(\"Stopping previous poller\")\n\t\tIGS.POLLING.stop()\n\tend\n\n\tlog.info(\"Start polling\")\n\tlocal uid = string.format(\"gmd_%s_%s\", IGS.C.ProjectID, IGS.C.ProjectKey) -- antinil\n\tIGS.POLLING = kupol.new(\"https:\/\/poll.gmod.app\/\", uid, 30).start(handleUpdate)\nend)\n", "igs\/modules\/pushes\/akupol_sv.lua":"-- 2021.01.18 4:16\n-- Polling client for poll.gmod.app\n-- Docs: https:\/\/blog.amd-nick.me\/poll-gmod-app-docs\n-- Author: amd-nick.me\/about\n\n-- 2 copy of this file in some cases in different places with different include methods\nif not lolib then require(\"lolib\") end\n-- require bib\n\nkupol = kupol or {\n\tlog = lolib.new()\n}\n\n\nlocal log = kupol.log\nlog.setCvar(\"kupol_logging_level\")\n\nlog.format = function(fmt, ...)\n\tfmt = fmt:gsub(\"{}\", \"%%s\") -- –æ–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å\n\treturn os.date(\"%H:%M:%S \") .. fmt:format(...):gsub(\"(app\/..)[%w_]*(..\/)\", \"%1*****%2\")\nend\n\nlocal safestr = function(str) -- hide uid from logZ\n\treturn str:gsub(\"(..)[%w_]*(..)\", \"%1*****%2\")\nend\n\nlocal function get_updates(base_url, uid, sleep, ts, fOnResponse)\n\tlocal url = base_url .. uid .. \"\/getUpdates?sleep=\" .. (sleep or \"\") .. \"&ts=\" .. (ts or \"\")\n\tlog.debug(\"kupol http.Fetch({})\", url)\n\thttp.Fetch(url, function(json)\n\t\tlog.debug(\"kupol body: {}\", json)\n\t\tlocal t = util.JSONToTable(json)\n\t\tif t and t.ok then\n\t\t\tfOnResponse(t)\n\t\telse\n\t\t\tfOnResponse(false, t and t.description or \"response is not a json\")\n\t\tend\n\tend, function(http_err)\n\t\tfOnResponse(false, http_err)\n\tend)\nend\n\n\nfunction kupol.new(sUrl, uid, iTimeout)\n\tlocal o = {uid = uid, url = sUrl, timeout = iTimeout, handler = false, running = false, stopping = false}\n\n\to.poll = function(ts, fOnResponse)\n\t\tget_updates(o.url, o.uid, o.timeout, ts, fOnResponse)\n\tend\n\n\tlocal processResponse = function(requested_ts, res)\n\t\tlocal remote_ts = res.ts\n\n\t\tlocal a = remote_ts < requested_ts -- –ø–µ—Ä–µ–µ–∑–¥, –±—ç–∫–∞–ø, –æ–±–Ω—É–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–µ–º\n\t\tlocal b = #res.updates == 0 and requested_ts > remote_ts -- –ø–µ—Ä–µ—Ö–æ–¥ —Å dev –Ω–∞ prod, –≥–¥–µ ts –±–æ–ª—å—à–µ\n\n\t\tif a or b then\n\t\t\tlocal log_pattern = a and \"ts —Å–µ—Ä–≤–µ—Ä–∞ ({}) –º–µ–Ω—å—à–µ –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ ({})\"\n\t\t\t\tor \"–ü–æ—Ö–æ–∂–µ, —á—Ç–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–æ–∏–∑–æ—à–µ–ª –±–∞–≥ –∏–ª–∏ —Å–µ—Ä–≤–µ—Ä –∏–∑–º–µ–Ω–∏–ª—Å—è. ts {} prev {}\"\n\n\t\t\tlog.warning(log_pattern, remote_ts, requested_ts)\n\t\t\tbib.setNum(\"lp:ts:\" .. o.uid, remote_ts)\n\t\t\trequested_ts = remote_ts\n\t\tend\n\n\t\tlocal ts_diff = remote_ts - requested_ts\n\t\tif #res.updates > 0 then\n\t\t\tlog.debug(\"From uid {} received {} new messages. Ts diff: {} items\", safestr(o.uid), #res.updates, ts_diff)\n\t\tend\n\n\t\tfor _,upd in ipairs(res.updates) do\n\t\t\t-- –≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏–µ https:\/\/img.qweqwe.ovh\/1609615123638.png\n\t\t\t-- bib.setNum(\"lp:ts\", remote_ts)\n\t\t\tlocal i = bib.getNum(\"lp:ts:\" .. o.uid, 0) + 1\n\t\t\tbib.setNum(\"lp:ts:\" .. o.uid, i) -- increment\n\n\t\t\tlocal _, err = pcall(o.handler, upd)\n\t\t\tif err then\n\t\t\t\tlog.error(\"–í–Ω—É—Ç—Ä–∏ —Ö–µ–Ω–¥–ª–µ—Ä–∞ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –∏ —Ä–∞–±–æ—Ç–∞ —á—É—Ç—å –Ω–µ –ø—Ä–µ–∫—Ä–∞—Ç–∏–ª–∞—Å—å: {}\", err)\n\t\t\tend\n\t\tend\n\n\t\t-- https:\/\/t.me\/c\/1353676159\/43747\n\t\tif ts_diff > #res.updates then\n\t\t\tlog.warning(\"–ê–ø–¥–µ–π—Ç—ã –¥–æ–ª–≥–æ –Ω–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–ª–∏—Å—å –∏ {} —à—Ç —É—Ç–µ—Ä—è–Ω–æ\", ts_diff - #res.updates)\n\t\t\tbib.setNum(\"lp:ts:\" .. o.uid, remote_ts)\n\t\tend\n\tend\n\n\to.consume_updates = function()\n\t\tlocal previous_ts = bib.getNum(\"lp:ts:\" .. o.uid) or 0\n\n\t\t-- log.info(\"Polling uid: {}. Timeout {} sec. Requested Ts {}\", safestr(uid), sleep, previous_ts)\n\t\to.poll(previous_ts, function(res, err)\n\t\t\tif o.checkStopping() then return end\n\n\t\t\tif res then\n\t\t\t\tprocessResponse(previous_ts, res)\n\t\t\t\to.consume_updates()\n\n\t\t\telse\n\t\t\t\tlog.error(\"Error: {}. Waiting 5 sec and retrying\", err)\n\t\t\t\ttimer.Simple(5, o.consume_updates)\n\t\t\tend\n\t\tend)\n\n\t\treturn o\n\tend\n\n\to.start = function(fHandler)\n\t\tlocal stopping = o.stopping\n\n\t\to.running  = true\n\t\to.stopping = false\n\t\to.handler  = fHandler\n\n\t\tif not stopping then\n\t\t\to.consume_updates()\n\t\tend\n\n\t\treturn o\n\tend\n\n\to.stop = function(fOnStopped)\n\t\tfOnStopped = fOnStopped or function() end\n\t\tif not o.running then fOnStopped() return end\n\t\to.stopping = fOnStopped\n\t\treturn o\n\tend\n\n\to.checkStopping = function()\n\t\tlocal onStopped = o.stopping\n\t\tif onStopped then\n\t\t\to.stopping = false\n\t\t\to.running  = false\n\t\t\tonStopped()\n\t\t\treturn true\n\t\tend\n\t\treturn false\n\tend\n\n\treturn o\nend\n", "entities\/ent_igs\/shared.lua":"ENT.Type      = \"anim\"\nENT.Base      = \"base_anim\"\nENT.PrintName = \"–î–æ–Ω–∞—Ç –∏—Ç–µ–º\"\nENT.Author    = \"GMDonate\"\nENT.Category  = \"IGS\"\n\nENT.RenderGroup = RENDERGROUP_TRANSLUCENT\n\nfunction ENT:SetupDataTables()\n\tself:NetworkVar(\"Entity\", 0, \"owning_ent\")\n\tself:NetworkVar(\"String\", 0, \"UID\")\nend\n", "igs\/modules\/pushes\/actions_sv.lua":"--[[-------------------------------------------------------------------------\n\t–ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è\n---------------------------------------------------------------------------]]\nlocal function getPlayer(dat)\n\treturn player.GetBySteamID64( dat.SteamID64 )\nend\n\n-- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ –ø–ª–∞—Ç–µ–∂–∞\nhook.Add(\"IGS.IncomingMessage\",\"PaymentStatus\",function(d, method)\n\tif method ~= \"payment.UpdateStatus\" then return end\n\n\tlocal pl = getPlayer(d)\n\tif not pl then return end\n\n\t-- https:\/\/img.qweqwe.ovh\/1537567538620.png\n\t-- https:\/\/img.qweqwe.ovh\/1537568769298.png\n\thook.Run(\"IGS.PaymentStatusUpdated\",pl,d)\nend)\n\n-- –ú–æ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è –≤—ã–¥–∞—á–∞ —É—Å–ª—É–≥–∏\nhook.Add(\"IGS.IncomingMessage\",\"GivePurchase\",function(d, method)\n\tif method ~= \"purchase.store\" then return end\n\n\tlocal pl = getPlayer(d)\n\tif not pl then return end\n\n\tlocal ITEM = IGS.GivePurchase(pl,d.Item) -- –≤—ã–¥–∞–µ—Ç –ø–æ–∫—É–ø–∫—É –±–µ–∑ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ –ë–î\n\tIGS.Notify(pl,\"–í–∞–º –≤—ã–¥–∞–Ω–∞ –Ω–æ–≤–∞—è —É—Å–ª—É–≥–∞: \" .. ITEM:Name())\nend)\n\n-- –ü–µ—Ä–µ–Ω–æ—Å —É—Å–ª—É–≥–∏ (–≤ —Ç.—á. –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ)\nhook.Add(\"IGS.IncomingMessage\",\"MovePurchase\",function(d, method)\n\tif not (method == \"purchase.move\" and IGS.SERVERS:ID() == d.ServFrom) then return end\n\n\tlocal pl = getPlayer(d)\n\tif not pl then return end\n\n\t-- –ü—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ\n\t-- –ï—Å–ª–∏ –ø–µ—Ä–µ–Ω–æ—Å –±—ã–ª –Ω–∞ —ç—Ç–æ—Ç —Å–µ—Ä–≤–µ—Ä, —Ç–æ —É—Å–ª—É–≥–∞ –±—É–¥–µ—Ç –≤—ã–¥–∞–Ω–∞ (–∏–ª–∏ –∑–∞–±—Ä–∞–Ω–∞. –° :HasPurchase)\n\tIGS.Notify(pl, \"–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ –ø–æ–∫—É–ø–æ–∫ –∏–∑-–∑–∞ –ø–µ—Ä–µ–Ω–æ—Å–∞ –∏–ª–∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è —É—Å–ª—É–≥\")\n\tIGS.LoadPlayerPurchases(pl,function()\n\t\tIGS.Notify(pl,\"–°–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω\")\n\tend)\nend)\n\n\nlocal INV_ACTIONS = {\n\t[\"inventory.storeItem\"]  = true,\n\t[\"inventory.deleteItem\"] = true,\n}\n\n-- –ó–∞–±–∏—Ä–∞–µ–º –≤–µ—â—å —Å –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è\n-- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏—Ç–µ–º–∞ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å\nhook.Add(\"IGS.IncomingMessage\",\"InventoryActions\",function(d, method)\n\tif not INV_ACTIONS[method] then return end\n\n\tlocal pl = getPlayer(d)\n\tif not pl then return end\n\n\tIGS.Notify(pl, \"–ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è\")\n\tIGS.LoadInventory(pl,function()\n\t\tIGS.Notify(pl, \"–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω\")\n\tend)\nend)\n\n-- –û—Ç–∫–ª—é—á–∞–µ–º —Å–µ—Ä–≤–µ—Ä\nhook.Add(\"IGS.IncomingMessage\",\"DisableServer\",function(d, method)\n\tif method ~= \"servers.disable\" then return end\n\n\tlocal endl = \"\"\n\tif d.Server == IGS.SERVERS:ID() then\n\t\t-- –û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ç—è–∂–µ–ª–∞—è, –Ω–æ –∫–µ–π—Å —Ä–µ–¥–∫–∏–π. –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ\n\t\t-- https:\/\/img.qweqwe.ovh\/1566303954304.png\n\t\t-- –ú–æ–∂–Ω–æ –∑–∞—é–∑–∞—Ç—å lua broadcast –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∞–∂–µ\n\t\tSetGlobalBool(\"IGS_DISABLED\", true)\n\telse\n\t\tendl = \" –Ω–∞ \" .. IGS.SERVERS(d.Server)\n\tend\n\n\tIGS.NotifyAll(\"–ê–≤—Ç–æ–¥–æ–Ω–∞—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω\" .. endl)\nend)\n\n-- nomr\nhook.Add(\"IGS.IncomingMessage\", \"nomr\", function(d, method)\n\tif method ~= \"transactions.create\" then return end\n\n\tlocal pl = getPlayer(d)\n\tif not pl then return end\n\n\tif IGS.C.DisableAntiMultirun then return end\n\n\tif d.Server and d.Server ~= IGS.SERVERS:ID() then\n\t\tpl:Kick(\"–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –Ω–∞ –¥—Ä—É–≥–æ–º —Å–µ—Ä–≤–µ—Ä–µ\")\n\tend\nend)\n", "igs\/dependencies\/matex.lua":"-- TRIGON.IM 12 dec 2021\n-- –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è texture –ª–∏–±—ã –æ—Ç dash\n\nmatex = matex or {}\n\nfile.CreateDir(\"matex\")\n\nfunction matex.url(url, useproxy)\n\tlocal id = util.CRC(url)\n\n\tlocal filepath = \"matex\/\" .. id .. \".png\"\n\tlocal matpath  = \"..\/data\/matex\/\" .. id .. \".png\"\n\n\tlocal def = {material = nil}\n\n\tif file.Exists(filepath, \"DATA\") then\n\t\tdef.material = Material(matpath, \"noclamp smooth\")\n\t\treturn def\n\tend\n\n\tlocal baseurl = useproxy and \"https:\/\/proxy.duckduckgo.com\/iu\/?u=\" .. url or url\n\n\thttp.Fetch(baseurl, function(body)\n\t\tfile.Write(filepath, body)\n\t\tdef.material = Material(matpath, \"noclamp smooth\")\n\t\treturn def.material\n\tend, function(error)\n\t\tif useproxy then def.material = Material(\"nil\") return def end\n\t\treturn matex.url(url, true)\n\tend)\n\n\treturn def\nend\n\n-- function matex.imgur(id)\n-- \treturn matex.url(\"https:\/\/i.imgur.com\/\" .. id .. \".png\")\n-- end\n\n-- local furl = fl.memoize(matex.url)\n-- function matex.url_async(url)\n-- \treturn furl(url).material\n-- end\n\n-- function matex.imgur_async(id)\n-- \treturn furl(\"https:\/\/i.imgur.com\/\" .. id .. \".png\").material\n-- end\n\n\n\n\/* example\nlocal mater = matex.imgur(\"TZcJ1CK\")\n\nhook.Add(\"HUDPaint\", \"mater\", function()\n\tif not mater.material then return end\n\n\tsurface.SetDrawColor(color_white)\n\tsurface.SetMaterial(mater.material)\n\tsurface.DrawTexturedRect(35, 35, 570, 460)\nend)\n-- hook.Remove(\"HUDPaint\", \"mater\")\n*\/\n", "entities\/ent_igs\/init.lua":"IGS.sh(\"shared.lua\")\nIGS.cl(\"cl_init.lua\")\n\nfunction ENT:Initialize()\n\t-- self:SetModel(\"models\/props_junk\/Shoe001a.mdl\") -- –±–æ—Ç–∏–Ω–æ–∫\n\t-- self:SetModel(\"models\/christmas_gift2\/christmas_gift2.mdl\") -- –ø–æ–¥–∞—Ä–æ–∫\n\n\tself:SetModel(IGS_GIFT_MODEL or \"models\/dav0r\/hoverball.mdl\")\n\tself:SetModelScale(1.5)\n\tself:SetAngles(Angle(90, 0, 0))\n\n\tself:PhysicsInit(SOLID_VPHYSICS)\n\tself:SetMoveType(MOVETYPE_VPHYSICS)\n\tself:SetSolid(SOLID_VPHYSICS)\n\tself:SetUseType(SIMPLE_USE)\n\tself:PhysWake()\nend\n\n-- –ß—Ç–æ–±—ã –Ω–µ–ª—å–∑—è –±—ã–ª–æ —É–±–∏—Ç—å NPC\nfunction ENT:OnTakeDamage()\n\treturn 0\nend\n\nfunction ENT:Use(_, caller)\n\tif caller:IsPlayer() then\n\t\tself:PlayerUse(caller)\n\tend\nend\n\nfunction ENT:PlayerUse(pl)\n\tif IGS.IsInventoryOverloaded(pl) then\n\t\tIGS.Notify(pl, \"–£ –≤–∞—Å —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ\")\n\t\treturn\n\tend\n\n\tif self.Busy or self.Removed then -- —Ö–∑ –Ω—É–∂–Ω–æ –ª–∏ –∏–º–µ–Ω–Ω–æ –∑–¥–µ—Å—å, –Ω–æ —è –¥–æ–±–∞–≤–∏–ª\n\t\t-- https:\/\/vk.com\/gim143836547?sel=383010676&msgid=90338\n\t\tif CurTime() - self.Busy > 5 then\n\t\t\tIGS.Notify(pl, \"–ü—Ä–µ–¥–º–µ—Ç –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏—è –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å\")\n\t\t\tIGS.Notify(pl, \"–ï—Å–ª–∏ –ø—Ä–æ—Ü–µ—Å—Å –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π, —Ç–æ –ø–æ—Å–∫–æ—Ä–µ–µ —Å–¥–µ–ª–∞–π—Ç–µ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ –∏ —Å–æ–æ–±—â–∏—Ç–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É\")\n\t\tend\n\t\treturn\n\tend\n\tself.Busy = CurTime()\n\n\tlocal UID = self:GetUID()\n\tIGS.AddToInventory(pl, UID, function(invDbID)\n\t\tself.Removed = true\n\t\tself:Remove()\n\n\t\tIGS.Notify(pl, \"–ü—Ä–µ–¥–º–µ—Ç –ø–æ–º–µ—â–µ–Ω –≤ \/donate –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å\")\n\n\t\t-- –≤—Å—Ç–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–π ID –Ω–µ —Å–æ–≤—Å–µ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ\n\t\t-- –î—É–º–∞—é, –Ω–∞–¥–æ –∫–µ—à–∏—Ä–æ–≤–∞—Ç—å —Ç–æ—Ç –ò–î, —á—Ç–æ –±—ã–ª –ø—Ä–∏ –ø–æ–∫—É–ø–∫–µ\n\t\thook.Run(\"IGS.PlayerPickedGift\", self.Getowning_ent and self:Getowning_ent(), UID, invDbID, pl)\n\tend)\nend\n\nfunction IGS.SpawnGift(sUid, vPos)\n\tassert(sUid, \"Item UID expected\")\n\n\tlocal ent = ents.Create(\"ent_igs\")\n\tent:SetUID(sUid)\n\n\tif vPos then\n\t\tent:SetPos(vPos)\n\t\tent:Spawn()\n\tend\n\n\treturn ent\nend\n\n-- –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å\n-- https:\/\/forum.gm-donate.net\/t\/spavn-donata-cherez-konsol\/438\/4?u=gmd\nfunction IGS.CreateGift(sUid, plOwner, vPos)\n\tlocal ent = IGS.SpawnGift(sUid, vPos)\n\tif ent.Setowning_ent then\n\t\tent:Setowning_ent(plOwner)\n\tend\n\treturn ent\nend\n", "igs\/modules\/inv_log\/interface_cl.lua":"local actions = setmetatable({},{__index = function() return \"–û—à–∏–±–∫–∞\" end})\nactions[1] = \"–ü–æ–∫—É–ø–∫–∞\"\nactions[2] = \"–ê–∫—Ç–∏–≤–∞—Ü–∏—è\"\nactions[3] = \"–î—Ä–æ–ø\"\nactions[4] = \"–ü–∏–∫\"\n\nlocal function beautyS64(s64)\n\tlocal pl = player.GetBySteamID64(s64)\n\treturn pl and pl:Nick() or util.SteamIDFrom64(s64):sub(#\"STEAM_0\")\nend\n\nlocal function isSteamID64(s)\n\treturn #s == 17 and s:StartWith(\"7656\")\nend\n\nlocal function anyTo64(sid)\n\tlocal res = isSteamID64(sid) and sid or util.SteamIDTo64(sid)\n\treturn res ~= \"0\" and res\nend\n\nlocal function getNameBySid(cb, s64)\n\tIGS.IL.NameRequest(function(name_)\n\t\tcb(name_)\n\tend, s64)\nend\n\nfunction IGS.WIN.InvLog()\n\treturn uigs.Create(\"igs_frame\", function(bg)\n\t\tbg:SetTitle(\"–û–ø–µ—Ä–∞—Ü–∏–∏ —Å –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ–º\")\n\t\tbg:SetSize(800, 600)\n\t\tbg:Center()\n\t\tbg:MakePopup()\n\n\t\tfunction bg:SearchSteamID(s64)\n\t\t\tbg.table:Clear()\n\t\t\tbg:Search(1, s64)\n\t\tend\n\n\t\tfunction bg:SearchGiftUID(uid)\n\t\t\tbg.table:Clear()\n\t\t\tbg:Search(1, nil, uid)\n\t\tend\n\n\t\tfunction bg:ResetSearch()\n\t\t\tbg.table:Clear()\n\t\t\tbg:Search()\n\t\tend\n\n\t\tfunction bg:AddLine(sOwner, sInfli, sItem, sAction, sDate, r)\n\t\t\tlocal line = bg.table:AddLine(sOwner, sInfli, sItem, r.gift_id, sAction, sDate)\n\t\t\tline:SetTooltip(\"ID –æ–ø–µ—Ä–∞—Ü–∏–∏: \" .. r.action_id .. \". –ü–µ—Ä–µ–¥ –Ω–∏–∫–æ–º –≥–ª–æ–±–∞–ª—å–Ω—ã–π Score –∏–≥—Ä–æ–∫–∞\")\n\n\t\t\tlocal btn_giftid = line.columns[4]\n\t\t\tbtn_giftid.text_color = IGS_IL_ROW_SOLID_COLOR or HSVToColor(((r.gift_id * 10) * 5) % 360, 1, 1)\n\n\t\t\tfor _,v in ipairs(line.columns) do\n\t\t\t\tv:SetCursor(\"hand\")\n\t\t\tend\n\n\t\t\tfor i,s64 in ipairs({r.owner, r.inflictor}) do\n\t\t\t\tif not player.GetBySteamID64(s64) then -- –∏–≥—Ä–æ–∫ –Ω–µ –≤ —Å–µ—Ç–∏, –Ω–∏–∫ –Ω–µ –ø–æ–ª—É—á–µ–Ω\n\t\t\t\t\tgetNameBySid(function(name_)\n\t\t\t\t\t\tif not name_ then return end\n\n\t\t\t\t\t\tlocal btn_owner = line.columns[i] -- 1, 2 –∫–æ–ª–æ–Ω–∫–∞\n\t\t\t\t\t\tbtn_owner:SetText(name_)\n\t\t\t\t\tend, s64)\n\t\t\t\tend\n\t\t\tend\n\n\t\t\tline.DoClick = function()\n\t\t\t\tlocal m = DermaMenu(line)\n\t\t\t\tm:AddOption(\"–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å SID –≤–ª–∞–¥–µ–ª—å—Ü–∞\",function() SetClipboardText(r.owner) end)\n\t\t\t\tm:AddOption(\"–ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å SID –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è\",function() SetClipboardText(r.inflictor) end)\n\t\t\t\tm:AddOption(\"–î–µ–π—Å—Ç–≤–∏—è –∏–≥—Ä–æ–∫–∞\",function() bg:SearchSteamID(r.owner) end)\n\t\t\t\tm:AddOption(\"–î–µ–π—Å—Ç–≤–∏—è —Å \" .. sItem,function() bg:SearchGiftUID(r.gift_uid) end)\n\t\t\t\tif sAction == \"–ê–∫—Ç–∏–≤–∞—Ü–∏—è\" then -- –∞ —Ç–∞–∫–∏—Ö –∑–∞–ø–∏—Å—è—Ö –Ω–∞–ø–∏—Å–∞–Ω ID –ø–æ–∫—É–ø–∫–∏, –∞ –Ω–µ –≥–∏—Ñ—Ç–∞ (–∞–≤–µ —à–∏—Ç–∫–æ–¥–∏–Ω–≥!)\n\t\t\t\t\tm:AddOption(\"–û—Ç–∫–ª—é—á–∏—Ç—å\", function()\n\t\t\t\t\t\tIGS.DeactivateItem(r.gift_id)\n\t\t\t\t\tend)\n\t\t\t\tend\n\t\t\t\tm:Open()\n\t\t\tend\n\t\tend\n\n\t\tfunction bg:Search(page, sid_, uid_) -- sid –ò–õ–ò uid (–¢–∞–∫ —Å–¥–µ–ª–∞–Ω SELECT –∑–∞–ø—Ä–æ—Å)\n\t\t\tpage = page or 1\n\t\t\tself.prev_page = page\n\t\t\tself.prev_sid  = sid_\n\t\t\tself.prev_uid  = uid_\n\n\t\t\tIGS.IL.GetLog(function(tLog)\n\t\t\t\tif not IsValid(bg) then return end -- –î–æ–ª–≥–æ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–∞–ª–∏—Å—å\n\n\t\t\t\tfor _,r in ipairs(tLog) do\n\t\t\t\t\tlocal ITEM = IGS.GetItemByUID(r.gift_uid)\n\n\t\t\t\t\tlocal sDate   = IGS.TimestampToDate(r.date, true)\n\t\t\t\t\tlocal sAction = actions[r.action]\n\t\t\t\t\tlocal sItem   = ITEM.isnull and (r.gift_uid .. \" (NULL)\") or ITEM:Name()\n\n\t\t\t\t\tlocal sOwner = beautyS64(r.owner)\n\t\t\t\t\tlocal sInfli = beautyS64(r.inflictor)\n\n\t\t\t\t\tbg:AddLine(sOwner, sInfli, sItem, sAction, sDate, r)\n\t\t\t\tend\n\n\t\t\t\tbg.table:PerformLayout()\n\t\t\t\tbg.load:UpdateLoaded(#bg.table.lines, tLog[0])\n\t\t\tend, page, sid_, uid_)\n\t\tend\n\n\t\tbg.table = uigs.Create(\"igs_table\", function(pnl)\n\t\t\tpnl:Dock(FILL)\n\t\t\tpnl:DockMargin(5,5,5,5)\n\t\t\t-- pnl:SetSize(790, 565)\n\n\t\t\tpnl:SetTitle(\"–î–µ–π—Å—Ç–≤–∏—è\")\n\n\t\t\tpnl:AddColumn(\"–í–ª–∞–¥–µ–ª–µ—Ü\",120)\n\t\t\tpnl:AddColumn(\"–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å\",120)\n\t\t\tpnl:AddColumn(\"–ü—Ä–µ–¥–º–µ—Ç\")\n\t\t\tpnl:AddColumn(\"ID –≥–∏—Ñ—Ç–∞\", 65)\n\t\t\tpnl:AddColumn(\"–î–µ–π—Å—Ç–≤–∏–µ\",110)\n\t\t\tpnl:AddColumn(\"–î–∞—Ç–∞\",130)\n\t\tend, bg)\n\n\t\tlocal bottom = uigs.Create(\"Panel\", function(self)\n\t\t\tself:SetHeight(30)\n\t\t\tself:Dock(BOTTOM)\n\t\t\tself:DockMargin(5,0,5,5)\n\t\tend, bg)\n\n\t\tlocal entry = uigs.Create(\"DTextEntry\", function(self)\n\t\t\tself:Dock(LEFT)\n\t\t\tself:SetWide(200)\n\t\t\tself:SetValue(\"SteamID –∏–ª–∏ UID –∏—Ç–µ–º–∞\")\n\t\t\tself.OnEnter = function()\n\t\t\t\tlocal val = self:GetValue():Trim()\n\t\t\t\tlocal s64 = anyTo64(val)\n\n\t\t\t\tif val == \"\" then\n\t\t\t\t\tbg:ResetSearch()\n\t\t\t\telseif s64 then\n\t\t\t\t\tbg:SearchSteamID(s64)\n\t\t\t\telse\n\t\t\t\t\tbg:SearchGiftUID(val)\n\t\t\t\tend\n\t\t\tend\n\t\tend, bottom)\n\n\t\tuigs.Create(\"igs_button\", function(self)\n\t\t\tself:Dock(LEFT)\n\t\t\tself:SetWide(150)\n\t\t\tself:DockMargin(5,0,0,0)\n\t\t\tself:SetText(\"–ù–∞–π—Ç–∏\")\n\t\t\tself.DoClick = entry.OnEnter\n\t\tend, bottom)\n\n\t\tbg.load = uigs.Create(\"igs_button\", function(self)\n\t\t\tself:Dock(RIGHT)\n\t\t\tself:SetWide(200)\n\t\t\tself.DoClick = function()\n\t\t\t\t-- bg.table:Clear()\n\t\t\t\tbg:Search(bg.prev_page + 1, bg.prev_sid, bg.prev_uid)\n\t\t\tend\n\t\t\tself.UpdateLoaded = function(_, iLoaded, iTotal)\n\t\t\t\tif iLoaded == iTotal then\n\t\t\t\t\tself:SetText(\"–í—Å–µ –∑–∞–≥—Ä—É–∂–µ–Ω–æ (\" .. iTotal .. \")\")\n\t\t\t\t\tself:SetActive(false)\n\t\t\t\telse\n\t\t\t\t\tself:SetText(\"–ó–∞–≥—Ä—É–∑–∏—Ç—å –µ—â–µ (\" .. iLoaded .. \"\/\" .. iTotal .. \")\")\n\t\t\t\t\tself:SetActive(true)\n\t\t\t\tend\n\t\t\tend\n\t\tend, bottom)\n\n\t\tbg:Search()\n\t\tbg.load:UpdateLoaded(0, 0)\n\tend)\nend\n\nconcommand.Add(\"igs_invlog\",IGS.WIN.InvLog)\n\n-- for i = 1,1 do\n-- \tlocal fr = IGS.WIN.InvLog()\n-- \ttimer.Simple(10,function()\n-- \t\tif IsValid(fr) then\n-- \t\t\tfr:Remove()\n-- \t\tend\n-- \tend)\n-- end\n", "igs\/modules\/extra\/error_logging_sv.lua":"hook.Add(\"IGS.OnApiError\", \"LogError\", function(sMethod, error_uid, tParams)\n\tif error_uid == \"http_error\" then\n\t\tIGS.prints(Color(255, 0, 0), \"\", \"CEPBEPA GMD BPEMEHHO HE9OCTynHbI. y}{e PEWAEM nPO6JIEMy\")\n\tend\n\n\tlocal sparams = \"\\n\"\n\tfor k,v in pairs(tParams) do\n\t\tsparams = sparams .. (\"\\t%s = %s\\n\"):format(k,v)\n\tend\n\n\tlocal split = string.rep(\"-\",50)\n\tlocal err_log =\n\t\tos.date(\"%Y-%m-%d %H:%M\\n\") ..\n\t\tsplit ..\n\t\t\"\\nMethod: \" .. sMethod ..\n\t\t\"\\nError: \"  .. error_uid ..\n\t\t\"\\nParams: \" .. sparams ..\n\t\tsplit .. \"\\n\\n\\n\"\n\n\tfile.Append(\"igs_errors.txt\",err_log)\n\tIGS.dprint(Color(250, 50, 50), err_log)\nend)\n", "igs\/modules\/inv_log\/core_sv.lua":"IGS.IL = IGS.IL or { -- InventoryLogger\n\t[\"NEW\"] = 1, -- –ø–æ–∫—É–ø–∫–∞ –∏—Ç–µ–º–∞\n\t[\"ACT\"] = 2, -- –∞–∫—Ç–∏–≤–∞—Ü–∏—è\n\t[\"DROP\"] = 3,\n\t[\"PICK\"] = 4,\n}\n\nutil.AddNetworkString(\"IGS.InvLog\")\nutil.AddNetworkString(\"IGS.NameRequest\")\nutil.AddNetworkString(\"IGS.DeactivateItem\")\n\nlocal function WriteLog(tLog)\n\tnet.WriteUInt(tLog[0],22) -- 4194305 (–ö–æ–ª-–≤–æ –∑–∞–ø–∏—Å–µ–π –≤—Å–µ–≥–æ)\n\tnet.WriteUInt(#tLog,6) -- 63 (–ü–æ 50 –ª–∏–º–∏—Ç –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É)\n\n\tfor _,row in ipairs(tLog) do\n\t\tnet.WriteString(row.owner)\n\t\tnet.WriteString(row.inflictor)\n\t\tnet.WriteString(row.gift_uid)\n\t\tnet.WriteUInt(row.gift_id,22)   -- 4194305\n\t\tnet.WriteUInt(row.action,3)     -- 7\n\t\tnet.WriteUInt(row.action_id,22) -- 4194305\n\t\tnet.WriteUInt(row.date,32)      -- 4294967295\n\tend\nend\n\nlocal function ShitLog()\n\tlocal log = {}\n\tlog[0] = 5\n\tfor i = 1,log[0] do\n\t\tlog[i] = {\n\t\t\towner     = util.SteamIDTo64(\"STEAM_0:1:23456789\"),\n\t\t\tinflictor = util.SteamIDTo64(\"STEAM_0:1:23456789\"),\n\t\t\tgift_uid  = \"–¢–æ–ª—å–∫–æ –¥–ª—è SuperAdmin\",\n\t\t\tgift_id   = 1337,\n\t\t\taction    = 0,\n\t\t\taction_id = 1488,\n\t\t\tdate      = os.time(),\n\t\t}\n\tend\n\treturn log\nend\n\nnet.Receive(\"IGS.InvLog\",function(_, pl)\n\t-- –ò–ª–∏ s64_owner –∏–ª–∏ gift_uid\n\tlocal s64_owner = net.ReadBool() and net.ReadString()\n\tlocal gift_uid  = net.ReadBool() and net.ReadString()\n\tlocal iPage     = net.ReadBool() and net.ReadUInt(8)\n\tlocal cb_id     = net.ReadUInt(3) -- 7\n\n\n\tlocal tLog = pl:IsSuperAdmin() and IGS.IL.GetLog(50, iPage, s64_owner, gift_uid) or ShitLog()\n\tnet.Start(\"IGS.InvLog\")\n\t\tnet.WriteUInt(cb_id,3) -- 7\n\t\tWriteLog(tLog)\n\tnet.Send(pl)\nend)\n\nnet.Receive(\"IGS.NameRequest\",function(_, pl)\n\tif not pl:IsSuperAdmin() then return end\n\n\tlocal s64 = net.ReadString()\n\tIGS.GetPlayer(s64, function(d_)\n\t\tnet.Start(\"IGS.NameRequest\")\n\t\t\tnet.WriteString(s64)\n\n\t\t\tif d_ then\n\t\t\t\tnet.WriteBool(true)\n\t\t\t\tnet.WriteString(Format(\"%d - %s\", d_.Score, d_.Name))\n\t\t\telse\n\t\t\t\tnet.WriteBool(false)\n\t\t\tend\n\t\tnet.Send(pl)\n\tend)\nend)\n\nnet.Receive(\"IGS.DeactivateItem\", function(_, pl)\n\tlocal iPurchID = net.ReadUInt(IGS.BIT_PURCH_ID)\n\tif not (iPurchID and pl:IsSuperAdmin()) then return end\n\n\tIGS.DisablePurchase(iPurchID, function(bUpdated)\n\t\tIGS.Notify(pl, bUpdated and \"–ü–æ–∫—É–ø–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞\" or \"–£—Å–ª—É–≥–∞ —É–∂–µ –æ—Ç–∫–ª—é—á–µ–Ω–∞\")\n\tend)\nend)\n\n\n\n\n-- –í–Ω–æ—Å–∏—Ç –Ω–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ\nfunction IGS.IL.Log(iGiftOrPurchaseId, sGiftUID, s64_owner, s64_inflictor, iActionId)\n\tsGiftUID = sql.SQLStr(sGiftUID)\n\n\tsql.Query([[\n\t\tINSERT INTO `igs_inv_log`(`gift_id`,`gift_uid`,`owner`,`inflictor`,`action`,`date`)\n\t\tVALUES (]] ..\n\t\t\tiGiftOrPurchaseId .. [[, ]] .. sGiftUID .. [[, ]] .. s64_owner .. [[, ]] .. s64_inflictor .. [[, ]] .. iActionId .. [[, ]] .. os.time() ..\n\t\t[[)\n\t]])\nend\n\n-- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã\nfunction IGS.IL.GetLog(iLimit, iPage, s64_owner, gift_uid)\n\tsql.Begin()\n\n\tlocal q = \"SELECT * FROM `igs_inv_log`\"\n\tif s64_owner then\n\t\tq = q .. \" WHERE `owner` = \" .. sql.SQLStr(s64_owner)\n\telseif gift_uid then\n\t\tq = q .. \" WHERE `gift_uid` = \" .. sql.SQLStr(gift_uid)\n\tend\n\n\tq = q .. \" ORDER BY `action_id` DESC\"\n\n\tif iLimit then\n\t\tq = q .. \" LIMIT \" .. iLimit\n\n\t\tif iPage then\n\t\t\tq = q .. \" OFFSET \" .. (iPage * iLimit - iLimit)\n\t\tend\n\tend\n\n\tlocal q_count = \"SELECT COUNT(*) FROM `igs_inv_log`\"\n\tif s64_owner then\n\t\tq_count = q_count .. \" WHERE `owner` = \" .. sql.SQLStr(s64_owner)\n\tend\n\n\tlocal total = sql.QueryValue(q_count)\n\tlocal log   = sql.Query(q) or {}\n\tlog[0] = total\n\n\tsql.Commit()\n\treturn log\nend\n-- PRINT(IGS.IL.GetLog(50, 1, AMD():SteamID64()))\n-- PRINT(IGS.IL.GetLog(50, 1, nil, \"chat_prefix\"))\n\nfunction IGS.IL.CreateTable()\n\tsql.Begin()\n\n\tsql.Query([[\n\tCREATE TABLE IF NOT EXISTS `igs_inv_log` (\n\t\t`action_id` INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,\n\t\t`gift_id`   INTEGER NOT NULL,\n\t\t`gift_uid`  TEXT    NOT NULL,\n\t\t`owner`     TEXT    NOT NULL,\n\t\t`inflictor` TEXT    NOT NULL,\n\t\t`action`    NUMERIC NOT NULL,\n\t\t`date`      INTEGER NOT NULL\n\t);\n\t]])\n\n\tsql.Query(\"CREATE INDEX `owner` ON `igs_inv_log` (`owner`)\")\n\n\tsql.Commit()\nend\n\nIGS.IL.CreateTable()\n", "igs\/modules\/extra\/init_sh.lua":"-- –î–ª—è –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è —Å–æ–≤–µ—Ä—à–µ–Ω–∏—è –ø–æ–∫—É–ø–æ–∫ –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–∏—Ç—É–∞—Ü–∏—è—Ö\n-- \/igsitem group_premium_30d\n\nif SERVER then\n\tlocal function RunCommand(c)\n\t\treturn function(pl, arg) pl:RunSCC(c, arg) end\n\tend\n\n\tIGS.WIN = IGS.WIN or {}\n\tIGS.WIN.Item    = RunCommand(\"IGSItem\")\n\tIGS.WIN.Group   = RunCommand(\"IGSGroup\")\n\tIGS.WIN.Deposit = RunCommand(\"IGSDeposit\")\nend\n\nscc.addClientside(\"IGSItem\",    function(_, arg) IGS.WIN.Item(arg)    end)\nscc.addClientside(\"IGSDeposit\", function(_, arg) IGS.WIN.Deposit(arg) end)\nscc.addClientside(\"IGSGroup\",   function(_, arg) IGS.WIN.Group(arg)   end)\n\n\n\n\nIGS.PermaSaveFeature(\"npc_igs\")\n\nlocal function runAfterhooks() -- #todo –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ —ç—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤ –º–æ–¥—É–ª–∏ –∏–ª–∏ –≤—ã–∑—ã–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ if CODEMOUNT\n\tif (not IGS_MOUNT) then return end\n\n\tIGS.dprint(\"–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ '–æ–ø–æ–∑–¥–∞–≤—à–∏—Ö' —Ö—É–∫–æ–≤ –∏ spawnmenu_reload\")\n\tif CLIENT then -- –∫–æ—Å—Ç—ã–ª—å, –Ω–æ –¥—Ä—É–≥–æ–≥–æ —Å–ø–æ—Å–æ–±–∞ –Ω–µ –≤–∏–∂—É\n\t\thook.GetTable()[\"InitPostEntity\"][\"IGS.nw.InitPostEntity\"]()\n\t\thook.GetTable()[\"DarkRPFinishedLoading\"][\"SupressDarkRPF1\"]()\n\t\tRunConsoleCommand(\"spawnmenu_reload\") -- npc_igs\n\t-- else\n\t\t-- hook.GetTable()[\"InitPostEntity\"][\"IGS.PermaSents\"]()\n\t\t-- \"InitPostEntity\", \"InitializePermaProps\"\n\tend\nend\n\n-- IGS.Loaded –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏ IGS.nw.InitPostEntity\nhook.Add(\"IGS.Initialized\", \"afterhooks\", function()\n\ttimer.Simple(.1, runAfterhooks) -- —ç–Ω—Ç–∏—Ç–∏ –≥—Ä—É–∑—è—Ç—Å—è –≤—Ä–æ–¥–µ —à–∞–≥–æ–º –ø–æ–∑–∂–µ\nend)\n", "igs\/modules\/inv_log\/core_cl.lua":"IGS.IL = IGS.IL or {}\n\nlocal callbacks,last,MAX = {},0,7\nfunction IGS.IL.GetLog(fCb, iPage, s64_owner, gift_uid)\n\tnet.Start(\"IGS.InvLog\")\n\t\tnet.WriteBool(s64_owner)\n\t\tif s64_owner then\n\t\t\tnet.WriteString(s64_owner)\n\t\tend\n\n\t\tnet.WriteBool(gift_uid)\n\t\tif gift_uid then\n\t\t\tnet.WriteString(gift_uid)\n\t\tend\n\n\t\tnet.WriteBool(iPage)\n\t\tif iPage then\n\t\t\tnet.WriteUInt(iPage,8)\n\t\tend\n\n\t\tlast = (last + 1) % MAX + 1\n\t\tcallbacks[last] = fCb\n\n\t\tnet.WriteUInt(last,3)\n\tnet.SendToServer()\nend\n-- IGS.IL.GetLog(PRINT, 1, nil, \"chat_prefix\")\n\nnet.Receive(\"IGS.InvLog\", function()\n\tlocal cb_id = net.ReadUInt(3)\n\tlocal cb = callbacks[cb_id]\n\t-- prt({callbacks = callbacks,cb_id = cb_id})\n\tassert(cb,\"No callback with id \" .. cb_id)\n\n\tlocal data = {[0] = net.ReadUInt(22)}\n\tfor i = 1,net.ReadUInt(6) do\n\t\tdata[i] = {\n\t\t\towner     = net.ReadString(),\n\t\t\tinflictor = net.ReadString(),\n\t\t\tgift_uid  = net.ReadString(),\n\t\t\tgift_id   = net.ReadUInt(22),\n\t\t\taction    = net.ReadUInt(3),\n\t\t\taction_id = net.ReadUInt(22),\n\t\t\tdate      = net.ReadUInt(32),\n\t\t}\n\tend\n\n\tcb(data)\n\tcallbacks[cb_id] = nil\nend)\n\n\n\nlocal sid_to_name_cache = {}\nfunction IGS.IL.NameRequest(fCb, s64)\n\tif sid_to_name_cache[s64] then -- cached or queued {}\n\t\tlocal cached = sid_to_name_cache[s64][0]\n\t\tif cached ~= nil then\n\t\t\tfCb(cached) -- mb false\n\t\telse -- –¥–æ–±–∞–≤–ª—è–µ–º –µ—â–µ –æ–¥–Ω–æ–≥–æ –∂–µ–ª–∞—é—â–µ–≥–æ –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø—Ä–æ—Å–∞\n\t\t\ttable.insert(sid_to_name_cache[s64], fCb)\n\t\tend\n\telse\n\t\t-- —Å–∫–æ–∫ –∂–µ —è –ø—Ä–æ–µ–±–∞–ª—Å—è, –∑–∞–±—ã–≤ –¥–æ–±–∞–≤–∏—Ç—å –≤ —Ç–∞–±–ª–∏—Ü—É fCb\n\t\tsid_to_name_cache[s64] = {fCb}\n\t\tnet.Start(\"IGS.NameRequest\")\n\t\t\tnet.WriteString(s64)\n\t\tnet.SendToServer()\n\tend\nend\n\nnet.Receive(\"IGS.NameRequest\", function()\n\tlocal requested_s64 = net.ReadString()\n\tlocal name_ = net.ReadBool() and net.ReadString()\n\n\tlocal cbs = sid_to_name_cache[requested_s64]\n\tfor i = #cbs,1,-1 do\n\t\tcbs[i](name_ or false)\n\t\tcbs[i] = nil\n\tend\n\tcbs[0] = name_ -- cache\nend)\n-- IGS.IL.NameRequest(PRINT, AMD():SteamID64())\n-- IGS.IL.NameRequest(PRINT, \"76561198109429966\")\n\n\nfunction IGS.DeactivateItem(iPurchID)\n\tnet.Start(\"IGS.DeactivateItem\")\n\t\tnet.WriteUInt(iPurchID, IGS.BIT_PURCH_ID)\n\tnet.SendToServer()\nend\n", "igs\/extensions\/fadmin.lua":"-- –ö—Ç–æ-—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç FAdmin, –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –∞–¥–¥–æ–Ω –∫ –¥—Ä—É–≥–∏–º –≥–µ–π–º–º–æ–¥–∞–º? –û_–æ\n\nlocal STORE_ITEM = MT_IGSItem\n\nfunction STORE_ITEM:SetFAdminGroup(sGroup, iWeight)\n\treturn self:SetInstaller(function(pl)\n\t\tFAdmin.Access.PlayerSetGroup(pl, sGroup)\n\t\tpl.IGSFAdminWeight = iWeight\n\tend):SetValidator(function(pl)\n\t\tif pl.IGSFAdminWeight then\n\t\t\treturn iWeight < pl.IGSFAdminWeight\n\t\tend\n\n\t\treturn pl:IsUserGroup(sGroup)\n\tend)\nend\n", "igs\/modules\/inv_log\/README.MD":"## –≠—Ç–æ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–µ—Å—Ç–æ–≤. –°—Ç–∏–º–∞–π–¥–∏ —Ä–∞–Ω–¥–æ–º–Ω—ã–µ —Å –ë–î GMD\n\n```lua\nlocal sids = {\"76561198097017915\", \"76561198097089588\", \"76561198097109705\", \"76561198097113844\", \"76561198097186201\", \"76561198097281623\", \"76561198097324069\", \"76561198097348606\", \"76561198097388616\", \"76561198097390649\", \"76561198097443354\", \"76561198097470957\", \"76561198097591659\", \"76561198097631964\", \"76561198097649046\", \"76561198097780799\", \"76561198097785356\", \"76561198097893726\", \"76561198097926095\", \"76561198097989516\", \"76561198098070152\", \"76561198098092661\", \"76561198098098471\", \"76561198098108559\", \"76561198098113216\", \"76561198098173031\", \"76561198098185859\", \"76561198098354159\", \"76561198098371450\", \"76561198098398449\", \"76561198098424443\", \"76561198098487418\", \"76561198098504237\", \"76561198098509614\", \"76561198098645216\", \"76561198098671936\", \"76561198098749476\", \"76561198098842349\", \"76561198098914970\", \"76561198098929052\", \"76561198098958992\", \"76561198099013703\", \"76561198099021341\", \"76561198099146015\", \"76561198099192639\", \"76561198099210547\", \"76561198099218232\", \"76561198099294865\", \"76561198099344348\", \"76561198099377064\", \"76561198099385267\", \"76561198099453432\", \"76561198099465673\", \"76561198099784931\", \"76561198100103197\", \"76561198100269725\", \"76561198100391036\", \"76561198100392315\", \"76561198100415833\", \"76561198100426566\", \"76561198100486027\", \"76561198100509562\", \"76561198100520042\", \"76561198100537662\", \"76561198100542291\", \"76561198100581112\", \"76561198100594454\", \"76561198100610417\", \"76561198100667823\", \"76561198100690431\", \"76561198100705146\", \"76561198100736444\", \"76561198100842314\", \"76561198100858376\", \"76561198100882179\", \"76561198100885290\", \"76561198100886058\", \"76561198100894252\", \"76561198100942883\", \"76561198101014296\", \"76561198101020337\", \"76561198101022665\", \"76561198101028818\", \"76561198101121560\", \"76561198101145177\", \"76561198101162273\", \"76561198101200455\", \"76561198101200926\", \"76561198101459915\", \"76561198101526062\", \"76561198101592316\", \"76561198101624996\", \"76561198101738316\", \"76561198101804530\", \"76561198101869174\", \"76561198101886913\", \"76561198101919777\", \"76561198101931622\", \"76561198101935940\", \"76561198101971304\", \"76561198101982860\", \"76561198102043218\", \"76561198102069944\", \"76561198102075611\", \"76561198102080188\", \"76561198102246766\", \"76561198102253745\", \"76561198102255963\", \"76561198102311477\", \"76561198102694965\", \"76561198102704591\", \"76561198102723523\", \"76561198102750172\", \"76561198102769298\", \"76561198102817452\", \"76561198102835860\", \"76561198102839583\", \"76561198102852765\", \"76561198102853115\", \"76561198102985526\", \"76561198102985907\", \"76561198102987096\", \"76561198103110701\", \"76561198103149835\", \"76561198103159526\", \"76561198103178594\", \"76561198103194117\", \"76561198103248177\", \"76561198103249893\", \"76561198103262998\", \"76561198103274471\", \"76561198103402336\", \"76561198103448325\", \"76561198103473745\", \"76561198103481035\", \"76561198103551439\", \"76561198103671678\", \"76561198103677593\", \"76561198103691246\", \"76561198103698271\", \"76561198103699819\", \"76561198103705376\", \"76561198103706687\", \"76561198103715744\", \"76561198103805487\", \"76561198103824827\", \"76561198103839472\", \"76561198103855507\", \"76561198103873259\", \"76561198103958816\", \"76561198103968175\", \"76561198103989423\", \"76561198104027650\", \"76561198104029690\", \"76561198104031283\", \"76561198104068654\", \"76561198104069804\", \"76561198104083016\", \"76561198104141703\", \"76561198104166426\", \"76561198104227259\", \"76561198104277161\", \"76561198104295743\", \"76561198104319145\", \"76561198104339799\", \"76561198104432286\", \"76561198104471120\", \"76561198104479506\", \"76561198104490467\", \"76561198104502139\", \"76561198104560081\", \"76561198104566409\", \"76561198104580685\", \"76561198104584961\", \"76561198104611288\", \"76561198104635971\", \"76561198104652285\", \"76561198104656265\", \"76561198104715531\", \"76561198104718351\", \"76561198104721545\", \"76561198104737137\", \"76561198104756146\", \"76561198104829167\", \"76561198104863232\", \"76561198104865798\", \"76561198104872684\", \"76561198104919828\", \"76561198105078313\", \"76561198105114317\", \"76561198105147987\", \"76561198105160758\", \"76561198105282238\", \"76561198105305054\", \"76561198105349835\", \"76561198105361632\", \"76561198105474104\", \"76561198105484331\", \"76561198105495732\", \"76561198105547831\"}\nlocal datagen = {} -- SID, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–Ω–∏–º–∞—é—Ç —É—á–∞—Å—Ç–∏–µ –∏ –¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π\n\n\n-- –û—Ç–±–∏—Ä–∞–µ—Ç —Ä–∞–Ω–¥–æ–º —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Ç–µ—Å—Ç–∞\nlocal NEED = 500\nfor i = 1,NEED do\n\tlocal s64 = table.Random(sids)\n\tdatagen[i] = {s64 = s64}\nend\n\n-- –ß–∏—Å—Ç–∏–º —Ç–∞–±–ª–∏—Ü—É\nif sql.TableExists(\"igs_inv_log\") then\n\tsql.Query(\"DROP TABLE `igs_inv_log`\")\n\tIGS.IL.CreateTable()\nend\n\n-- –°–æ–∑–¥–∞–Ω–∏–µ –≥–∏—Ñ—Ç–æ–≤\nfor i,d in ipairs(datagen) do\n\td.gift_id  = i + 100500\n\td.gift_uid = table.Random(IGS.GetItems()):UID()\nend\n\n-- –î—Ä–æ–ø –∏–ª–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏—è –≥–∏—Ñ—Ç–∞\nfor _,d in ipairs(datagen) do\n\tif not DICE(5) then -- –≤ 1 –∏–∑ 5 —Å–ª—É—á–∞–µ–≤ –∏–≥—Ä–æ–∫ –∫—É–ø–∏–ª –∏—Ç–µ–º –∏ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç (—Ö–æ–ª–¥–∏—Ç)\n\t\tlocal action = DICE(5) and IGS.IL.DROP or IGS.IL.ACT -- 1 –¥—Ä–æ–ø –Ω–∞ 5 –∞–∫—Ç–∏–≤–∞—Ü–∏–π\n\t\td.second_action = action\n\tend\nend\n\n-- –ü–∏–∫ –≥–∏—Ñ—Ç–∞ –¥—Ä—É–≥–∏–º —á–µ–ª–æ–≤–µ–∫–æ–º\nfor _,d in ipairs(datagen) do\n\tif DICE(10) then -- –≤ 1 –∏–∑ 10 —Å–ª—É—á–∞–µ–≤ –≥–∏—Ñ—Ç –Ω–µ –ø–æ–¥–Ω–∏–º–∞–µ–º\n\t\tlocal s64_inflictor = table.Random(datagen).s64\n\t\td.pick_by = s64_inflictor\n\tend\nend\n\nfor _,d in ipairs(datagen) do\n\ttimer.Simple(math.Rand(0, 1),function()\n\t\tIGS.IL.Log(d.gift_id, d.gift_uid, d.s64, d.s64, IGS.IL.NEW)\n\tend)\n\n\tif d.second_action then\n\t\ttimer.Simple(math.Rand(.5, 1.5),function()\n\t\t\tIGS.IL.Log(d.gift_id, d.gift_uid, d.s64, d.s64, d.second_action)\n\t\tend)\n\tend\n\n\tif d.pick_by then\n\t\ttimer.Simple(math.Rand(1, 2),function()\n\t\t\tIGS.IL.Log(d.gift_id, d.gift_uid, d.s64, d.pick_by, IGS.IL.PICK)\n\t\tend)\n\tend\nend\n\n\n-- –ü–æ—Å–ª–µ –≤—Å–µ—Ö —Ç–∞–π–º–µ—Ä–æ–≤\ntimer.Simple(2.5,function()\n\tlocal random_search = table.Random(datagen).s64\n\tprt(IGS.IL.GetLog(nil, nil, random_search))\nend)\n\n```\n", "igs\/modules\/inv_log\/integrator_sv.lua":"hook.Add(\"IGS.PlayerPurchasedItem\", \"IL.Integration\", function(owner, ITEM, invDbID)\n\tif not IGS.C.Inv_Enabled then return end -- #todo —Å–¥–µ–ª–∞—Ç—å inv_log –º–æ–¥—É–ª–µ–º –∏ —É–±—Ä–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É (mb nil if inv disabled)\n\tIGS.IL.Log(invDbID, ITEM:UID(), owner:SteamID64(), owner:SteamID64(), IGS.IL.NEW)\nend)\n\n-- —Ä–∞–Ω–µ–µ –±—ã–ª–æ –Ω–∞ playeractivatedite. –Ω–æ —Ç–∞–º iPurchID\nhook.Add(\"IGS.PlayerActivatedInventoryItem\", \"IL.Integration\", function(owner, ITEM, invDbID)\n\tIGS.IL.Log(invDbID, ITEM:UID(), owner:SteamID64(), owner:SteamID64(), IGS.IL.ACT)\nend)\n\nhook.Add(\"IGS.PlayerDroppedGift\",   \"IL.Integration\", function(owner, UID, invDbID)\n\tIGS.IL.Log(invDbID, UID, owner:SteamID64(), owner:SteamID64(), IGS.IL.DROP)\nend)\n\nhook.Add(\"IGS.PlayerPickedGift\",    \"IL.Integration\", function(owner, UID, invDbID, picker)\n\tif not IsValid(owner) then return end -- —Å–∞–º–æ–¥–µ–ª—å–Ω—ã–π –≥–∏—Ñ—Ç\n\tIGS.IL.Log(invDbID, UID, owner:SteamID64(), picker:SteamID64(), IGS.IL.PICK)\nend)\n", "igs\/dependencies\/dash\/misc.lua":"if dash then return end\n-- Thanks to SuperiorServers.co\n\nlocal Start = net.Start\nlocal Send  = SERVER and net.Send or net.SendToServer\nfunction net.Ping(msg, recipients)\n\tStart(msg)\n\tSend(recipients)\nend\n\n\nif CLIENT then\n\tlocal surface_SetFont \t\t= surface.SetFont\n\tlocal surface_GetTextSize \t= surface.GetTextSize\n\tlocal string_Explode \t\t= string.Explode\n\tlocal ipairs \t\t\t\t= ipairs\n\n\tfunction string.Wrap(font, text, width)\n\t\tsurface_SetFont(font)\n\n\t\tlocal sw = surface_GetTextSize(' ')\n\t\tlocal ret = {}\n\n\t\tlocal w = 0\n\t\tlocal s = ''\n\n\t\tlocal t = string_Explode('\\n', text)\n\t\tfor i = 1, #t do\n\t\t\tlocal t2 = string_Explode(' ', t[i], false)\n\t\t\tfor i2 = 1, #t2 do\n\t\t\t\tlocal neww = surface_GetTextSize(t2[i2])\n\n\t\t\t\tif (w + neww >= width) then\n\t\t\t\t\tret[#ret + 1] = s\n\t\t\t\t\tw = neww + sw\n\t\t\t\t\ts = t2[i2] .. ' '\n\t\t\t\telse\n\t\t\t\t\ts = s .. t2[i2] .. ' '\n\t\t\t\t\tw = w + neww + sw\n\t\t\t\tend\n\t\t\tend\n\t\t\tret[#ret + 1] = s\n\t\t\tw = 0\n\t\t\ts = ''\n\t\tend\n\n\t\tif (s ~= '') then\n\t\t\tret[#ret + 1] = s\n\t\tend\n\n\t\treturn ret\n\tend\n\n\tlocal formathex = '%%%02X'\n\tfunction string:URLEncode()\n\t\treturn string.gsub(string.gsub(string.gsub(self, '\\n', '\\r\\n'), '([^%w ])', function(c)\n\t\t\treturn string.format(formathex, string.byte(c))\n\t\tend), ' ', '+')\n\tend\n\n\tlocal surface_DrawRect     = surface.DrawRect\n\tlocal surface_SetDrawColor = surface.SetDrawColor\n\tfunction draw.Box(x, y, w, h, col)\n\t\tsurface_SetDrawColor(col)\n\t\tsurface_DrawRect(x, y, w, h)\n\tend\nend\n", "igs\/dependencies\/chatprint.lua":"if chat and chat.AddTextSV then return end\n\n\nif SERVER then\n\tutil.AddNetworkString(\"ChatPrintColor\")\n\n\n\tlocal function sayColor(targ, ...)\n\t\tlocal args = {...}\n\t\t-- PrintTable(args)\n\t\tnet.Start(\"ChatPrintColor\")\n\t\t\tnet.WriteTable(IsColor(args[1]) and args or args[1])\n\t\tnet[targ and \"Send\" or \"Broadcast\"](targ)\n\tend\n\n\tlocal PLAYER = FindMetaTable(\"Player\")\n\tfunction PLAYER:ChatPrintColor(...)\n\t\tsayColor(self, ...)\n\tend\n\n\tchat = chat or {}\n\tfunction chat.AddTextSV(...)\n\t\tsayColor(nil, ...)\n\tend\n\nelse\n\tnet.Receive(\"ChatPrintColor\",function()\n\t\tchat.AddText(unpack(net.ReadTable()))\n\tend)\nend\n", "igs\/extensions\/badmin.lua":"local STORE_ITEM = MT_IGSItem\n\nfunction STORE_ITEM:SetBAdminGroup(rank)\n\treturn self:SetInstaller(function(pl)\n\t\tassert(rank, \"IGS Rank expected, got \" .. type(rank))\n\t\tlocal RANK = assert(ba.ranks.Get(rank), \"IGS Rank \" .. rank .. \" invalid\")\n\t\tpl:SetNetVar(\"UserGroup\", RANK:GetID())\n\tend):AddHook(\"IGS.PlayerPurchasesLoaded\", function(pl, purchases) -- #TODO —É–ø—Ä–æ—Å—Ç–∏—Ç—å —Ö—É–∫. sam –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ—Ç –∂–µ\n\t\tif CLIENT or not purchases then return end\n\n\t\tlocal priority_item = self\n\n\t\tfor uid in pairs(purchases) do\n\t\t\tlocal ITEM = IGS.GetItemByUID(uid)\n\t\t\tif ITEM:GetMeta(\"bagroup\") and ITEM.id > self.id then\n\t\t\t\tpriority_item = ITEM\n\t\t\tend\n\t\tend\n\n\t\tif priority_item == self then\n\t\t\tself:Setup(pl)\n\n\t\tend\n\tend):SetMeta(\"bagroup\", sUserGroup)\nend\n", "igs\/modules\/extra\/_main.lua":"IGS.sv(\"don_grace_sv.lua\")\nIGS.sv(\"error_logging_sv.lua\")\nIGS.sv(\"installation_check_sv.lua\")\nIGS.cl(\"new_items_notify_cl.lua\")\n\nIGS.sh(\"init_sh.lua\")\nIGS.sv(\"init_sv.lua\")\nIGS.cl(\"init_cl.lua\")\n", "igs\/interface\/windows\/modals.lua":"function IGS.BoolRequest(title, text, cback)\n\tlocal m = uigs.Create(\"igs_frame\", function(self)\n\t\tself:SetTitle(title)\n\t\tself:ShowCloseButton(false)\n\t\tself:SetWide(ScrW() * .2)\n\t\tself:MakePopup()\n\tend)\n\n\tlocal txt = string.Wrap(\"igs.18\", text, m:GetWide() - 10)\n\tlocal y = m:GetTitleHeight() + 5\n\n\tfor _,line in ipairs(txt) do\n\t\tuigs.Create(\"DLabel\", function(self, p)\n\t\t\tself:SetText(line)\n\t\t\tself:SetFont(\"igs.18\")\n\t\t\tself:SetTextColor(IGS.col.TEXT_HARD)\n\t\t\tself:SizeToContents()\n\t\t\tself:SetPos((p:GetWide() - self:GetWide()) \/ 2, y)\n\t\t\ty = y + self:GetTall() + 2\n\t\tend, m)\n\tend\n\n\ty = y + 5\n\tm.btnOK = uigs.Create(\"igs_button\", function(self, p)\n\t\tself:SetText(\"–î–∞\")\n\t\tself:SetPos(5, y)\n\t\tself:SetSize(p:GetWide() \/ 2 - 7.5, 25)\n\t\tself.DoClick = function()\n\t\t\tp:Close()\n\t\t\tcback(true)\n\t\tend\n\tend, m)\n\n\tm.btnCan = uigs.Create(\"igs_button\", function(self, p)\n\t\tself:SetText(\"–ù–µ—Ç\")\n\t\tself:SetPos(p.btnOK:GetWide() + 10, y)\n\t\tself:SetSize(p.btnOK:GetWide(), 25)\n\t\tself:RequestFocus()\n\t\tself.DoClick = function()\n\t\t\tp:Close()\n\t\t\tcback(false)\n\t\tend\n\t\ty = y + self:GetTall() + 5\n\tend, m)\n\n\tm:SetTall(y)\n\tm:Center()\n\n\tm:Focus()\n\treturn m\nend\n\nfunction IGS.StringRequest(title, text, default, cback)\n\tlocal m = uigs.Create(\"igs_frame\", function(self)\n\t\tself:SetTitle(title)\n\t\tself:ShowCloseButton(false)\n\t\tself:SetWide(ScrW() * .3)\n\t\tself:MakePopup()\n\tend)\n\n\tlocal txt = string.Wrap(\"igs.18\", text, m:GetWide() - 10)\n\tlocal y = m:GetTitleHeight() + 5\n\n\tfor _, v in ipairs(txt) do\n\t\tuigs.Create(\"DLabel\", function(self, p)\n\t\t\tself:SetText(v)\n\t\t\tself:SetFont(\"igs.18\")\n\t\t\tself:SetTextColor(IGS.col.TEXT_HARD)\n\t\t\tself:SizeToContents()\n\t\t\tself:SetPos((p:GetWide() - self:GetWide()) \/ 2, y)\n\t\t\ty = y + self:GetTall()\n\t\tend, m)\n\tend\n\n\ty = y + 5\n\tlocal tb = uigs.Create(\"DTextEntry\", function(self, p)\n\t\tself:SetPos(5, y + 5)\n\t\tself:SetSize(p:GetWide() - 10, 25)\n\t\tself:SetValue(default or '')\n\t\ty = y + self:GetTall() + 10\n\t\tself.OnEnter = function()\n\t\t\tp:Close()\n\t\t\tcback(self:GetValue())\n\t\tend\n\tend, m)\n\n\tlocal btnOK = uigs.Create(\"igs_button\", function(self, p)\n\t\tself:SetText(\"–û–ö\")\n\t\tself:SetPos(5, y)\n\t\tself:SetSize(p:GetWide() \/ 2 - 7.5, 25)\n\t\tself:SetActive(true)\n\t\tself.DoClick = function()\n\t\t\tp:Close()\n\t\t\tcback(tb:GetValue())\n\t\tend\n\tend, m)\n\n\tuigs.Create(\"igs_button\", function(self)\n\t\tself:SetText(\"–û—Ç–º–µ–Ω–∞\")\n\t\tself:SetPos(btnOK:GetWide() + 10, y)\n\t\tself:SetSize(btnOK:GetWide(), 25)\n\t\tself:RequestFocus()\n\t\tself.DoClick = function()\n\t\t\tm:Close()\n\t\tend\n\t\ty = y + self:GetTall() + 5\n\tend, m)\n\n\tm:SetTall(y)\n\tm:Center()\n\n\tm:Focus()\n\treturn m\nend\n\n\nlocal null = function() end\nfunction IGS.ShowNotify(sText, sTitle, fOnClose)\n\tlocal m = IGS.BoolRequest(sTitle or \"[IGS] –û–ø–æ–≤–µ—â–µ–Ω–∏–µ\", sText, fOnClose or null)\n\tm.btnCan:Remove() -- –æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–æ–ª—å–∫–æ 1 –∫–Ω–æ–ø–∫—É\n\n\tlocal _,y = m.btnOK:GetPos()\n\tm.btnOK:SetText(\"–û–ö\")\n\tm.btnOK:SetPos((m:GetWide() - m.btnOK:GetWide()) \/ 2, y)\n\n\treturn m\nend\n\nfunction IGS.WIN.ActivateCoupon()\n\tIGS.StringRequest(\"–ê–∫—Ç–∏–≤–∞—Ü–∏—è –∫—É–ø–æ–Ω–∞\",\n\t\t\"–ï—Å–ª–∏ —É –≤–∞—Å –µ—Å—Ç—å –¥–æ–Ω–∞—Ç –∫—É–ø–æ–Ω, —Ç–æ –≤–≤–µ–¥–∏—Ç–µ –µ–≥–æ –Ω–∏–∂–µ\",\n\tnil,function(val)\n\t\tIGS.UseCoupon(val,function(errMsg)\n\t\t\tif errMsg then\n\t\t\t\tIGS.ShowNotify(errMsg, \"–û—à–∏–±–∫–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∫—É–ø–æ–Ω–∞\")\n\t\t\telse\n\t\t\t\tIGS.ShowNotify(\"–î–µ–Ω—å–≥–∏ –Ω–∞—á–∏—Å–ª–µ–Ω—ã –Ω–∞ –≤–∞—à —Å—á–µ—Ç. –ú–æ–∂–µ—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ —ç—Ç–æ –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö, –ø–µ—Ä–µ–æ—Ç–∫—Ä—ã–≤ –¥–æ–Ω–∞—Ç –º–µ–Ω—é\", \"–£—Å–ø–µ—à–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∫—É–ø–æ–Ω–∞\")\n\t\t\tend\n\t\tend)\n\tend)\nend\n\n\n-- IGS.ShowNotify((\"test \"):rep(10), nil, function()\n-- \tprint(\"–ù–æ—Ç–∏—Ñ–∏–∫–∞—à–∫–∞ –∑–∞–∫—Ä—ã–ª–∞—Å—å\")\n-- end)\n\nIGS.OpenURL = gui.OpenURL\n\n-- IGS.UI()\n", "igs\/interface\/vgui\/igs_table.lua":"local PANEL = {}\n\nfunction PANEL:Init()\n\tself.columns = {}\n\tself.lines   = {}\n\n\tself.header_tall = 0\n\n\t-- –ö–æ–ª–æ–Ω–∫–∏, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö —É–∫–∞–∑–∞–Ω—ã iWidePx\n\tself.nonAdjustableSpace = 0\n\tself.nonAdjustableItems = 0\n\n\tself.scroll = uigs.Create(\"igs_scroll\", self)\nend\n\nfunction PANEL:SetTitle(sText)\n\tself.title = self.title or uigs.Create(\"DLabel\", function(t)\n\t\tt:Dock(TOP)\n\t\tt:SetTall(20)\n\t\tt:SetFont(\"igs.20\")\n\t\tt:SetTextColor(IGS.col.TEXT_HARD)\n\t\tt:SetContentAlignment(5)\n\t\t-- t:SetWrap(true) -- –µ—Å–ª–∏ —Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ç—å, —Ç–æ –Ω–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å SetContentAlignment\n\t\tt:SetAutoStretchVertical(true)\n\tend, self)\n\n\tself.title:SetText(sText)\nend\n\nfunction PANEL:AddColumn(sName,iWidePx)\n\tself.columns_panel = self.columns_panel or uigs.Create(\"Panel\", function(p)\n\t\tp:SetTall(15)\n\n\t\tself.header_tall = self.header_tall + p:GetTall()\n\tend, self)\n\n\ttable.insert(self.columns, uigs.Create(\"Panel\", function(clmn)\n\t\tclmn.staticWide = iWidePx\n\n\t\t-- 10 –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ. –ü—Ä–æ—Å—Ç–æ –¥–ª—è –∑–∞–º–µ—Ç–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –æ—Ç–ª–∞–¥–∫–µ\n\t\t-- clmn:SetSize(clmn.staticWide or 10, self.columns_panel:GetTall())\n\t\tclmn.Paint = function(s,w,h)\n\t\t\tsurface.SetDrawColor(IGS.col.HARD_LINE)\n\t\t\tsurface.DrawLine(3,h - 1,w - 2,h - 1)\n\n\t\t\tsurface.DrawLine(0,0,0,h)\n\t\t\tsurface.DrawLine(w,0,w,h)\n\n\t\t\tsurface.SetFont(\"igs.15\")\n\t\t\tsurface.SetTextColor(IGS.col.TEXT_SOFT)\n\t\t\tsurface.SetTextPos((w - surface.GetTextSize(sName)) \/ 2,0)\n\t\t\tsurface.DrawText(sName)\n\t\tend\n\tend, self.columns_panel))\n\n\tif iWidePx then\n\t\tself.nonAdjustableItems = self.nonAdjustableItems + 1\n\t\tself.nonAdjustableSpace = self.nonAdjustableSpace + iWidePx\n\tend\n\n\tself:PerformLayout()\nend\n\nfunction PANEL:AddLine(...)\n\tlocal rows = {...}\n\n\tlocal iKek = table.insert(self.lines,\n\t\tself.scroll:AddItem(uigs.Create(\"Panel\", function(line)\n\t\t\tline:SetTall(18)\n\t\t\tline:Dock(TOP)\n\t\t\tline.columns = {}\n\n\t\t\t-- self.columns[i]:GetWide()\n\t\t\tfor i,val in ipairs(rows) do\n\t\t\t\tline.columns[i] = uigs.Create(\"DButton\", function(row) -- –ë—ã–ª–æ Panel\n\t\t\t\t\trow:SetText(val)\n\t\t\t\t\trow.DoClick = function() if line.DoClick then line.DoClick(row) end end\n\t\t\t\t\trow:SetCursor(\"arrow\")\n\t\t\t\t\trow:SetTall( line:GetTall() )\n\t\t\t\t\t-- row:SetPos(self.columns[i]:GetPos())\n\t\t\t\t\trow.Paint = function(s,w,h)\n\t\t\t\t\t\tsurface.SetDrawColor(IGS.col.HARD_LINE)\n\t\t\t\t\t\tsurface.DrawLine(3,h - 1,w - 2,h - 1)\n\n\t\t\t\t\t\tsurface.DrawLine(0,0,0,h)\n\t\t\t\t\t\tsurface.DrawLine(w,0,w,h)\n\n\t\t\t\t\t\tsurface.SetFont(\"igs.18\")\n\t\t\t\t\t\tsurface.SetTextColor(s.text_color or IGS.col.TEXT_HARD)\n\t\t\t\t\t\tsurface.SetTextPos((w - surface.GetTextSize(s:GetText())) \/ 2,0)\n\t\t\t\t\t\tsurface.DrawText(s:GetText())\n\t\t\t\t\t\treturn true -- override\n\t\t\t\t\tend\n\t\t\t\tend, line)\n\t\t\tend\n\t\tend))\n\t)\n\n\t-- self:PerformLayout()\n\treturn self.lines[iKek] -- –≤—Å—Ç–∞–≤–ª–µ–Ω–Ω–∞—è —Å—Ç—Ä–æ–∫–∞\nend\n\nfunction PANEL:Clear()\n\t-- for i,linePan in ipairs(self.lines) do\n\t-- \tlinePan:Remove()\n\t-- \ttable.remove(self.lines,i)\n\t-- end\n\n\tfor i = #self.lines,1,-1 do\n\t\tlocal linePan = self.lines[i]\n\t\tlinePan:Remove()\n\t\ttable.remove(self.lines,i)\n\tend\nend\n\nPANEL.Paint     = IGS.S.TablePanel\nPANEL.PaintOver = IGS.S.Outline\n\nfunction PANEL:PerformLayout()\n\tif self.title then\n\t\tself.header_tall = self.title:GetTall()\n\tend\n\n\tif self.columns_panel then\n\t\tself.columns_panel:SetPos(0,self.header_tall)\n\t\tself.columns_panel:SetWide(self:GetWide())\n\n\t\t--PrintTable(self.columns)\n\n\t\tlocal x = 0\n\t\tlocal cell_wide = (self:GetWide() - self.nonAdjustableSpace) \/ (#self.columns - self.nonAdjustableItems)\n\t\t-- print(\"#self.columns\",#self.columns)\n\t\t-- print(\"self.nonAdjustableItems\",self.nonAdjustableItems)\n\t\t-- print(\"self.nonAdjustableSpace\",self.nonAdjustableSpace)\n\t\tfor _,v in ipairs(self.columns) do\n\t\t\t-- print(v,v:GetPos())\n\t\t\t-- print(v:GetSize())\n\t\t\tv:SetPos(x,0)\n\t\t\tv:SetSize(v.staticWide or cell_wide, self.columns_panel:GetTall())\n\n\t\t\tx = x + (v.staticWide or v:GetWide())\n\t\tend\n\n\t\tself.header_tall = self.header_tall + self.columns_panel:GetTall()\n\tend\n\n\tself.scroll:SetPos(0,self.header_tall)\n\tself.scroll:SetSize(self:GetWide(),self:GetTall() - self.header_tall)\n\n\tfor _,linePan in ipairs(self.lines) do\n\t\tfor i,rowPan in ipairs(linePan.columns) do\n\t\t\trowPan:SetWide(self.columns[i]:GetWide())\n\t\t\trowPan:SetPos(self.columns[i]:GetPos())\n\t\tend\n\tend\nend\n\nvgui.Register(\"igs_table\", PANEL, \"Panel\")\n-- IGS.UI()\n", "igs\/interface\/windows\/item_info.lua":"local m\n\nlocal function purchase(ITEM, buy_button)\n\tIGS.Purchase(ITEM:UID(), function(errMsg,dbID)\n\t\tif not IsValid(buy_button) then return end\n\n\t\tif errMsg then\n\t\t\tIGS.ShowNotify(errMsg, \"–û—à–∏–±–∫–∞ –ø–æ–∫—É–ø–∫–∏\")\n\t\t\tsurface.PlaySound(\"ambient\/voices\/citizen_beaten1.wav\") -- –µ—â–µ –µ—Å—Ç—å\n\t\t\treturn\n\t\tend\n\n\t\tbuy_button.purchased = buy_button.purchased or 0\n\t\tbuy_button.purchased = buy_button.purchased + 1\n\n\n\t\tif ITEM:IsStackable() then\n\t\t\tbuy_button:SetText(\"–ö—É–ø–ª–µ–Ω–æ \" .. buy_button.purchased .. \" —à—Ç\")\n\t\telse\n\t\t\tif IsValid(m) then\n\t\t\t\tm:Close()\n\t\t\tend\n\n\t\t\tif not IGS.C.Inv_Enabled then\n\t\t\t\tIGS.ShowNotify(\"–°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–∫—É–ø–∫—É. –≠—Ç–æ –±—ã–ª–æ –ø—Ä–æ—Å—Ç–æ, –ø—Ä–∞–≤–¥–∞? :)\", \"–£—Å–ø–µ—à–Ω–∞—è –ø–æ–∫—É–ø–∫–∞\")\n\t\t\t\treturn\n\t\t\tend\n\n\t\t\tIGS.BoolRequest(\"–£—Å–ø–µ—à–Ω–∞—è –ø–æ–∫—É–ø–∫–∞\",\n\t\t\t\t\"–°–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–∫—É–ø–∫—É. –û–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –≤–∞—à–µ–º \/donate –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ.\\n\\n–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –µ–µ —Å–µ–π—á–∞—Å?\",\n\t\t\tfunction(yes)\n\t\t\t\tif not yes then return end\n\n\t\t\t\tIGS.ProcessActivate(dbID)\n\t\t\tend)\n\t\tend\n\n\t\tsurface.PlaySound(\"ambient\/office\/coinslot1.wav\")\n\tend)\nend\n\n\n\n\n\n\nlocal function move(f, x, sp, cb)\n\tlocal _,y = f:GetPos()\n\tf:MoveTo(x,y, sp,nil,nil,cb)\nend\n\nlocal function shakeFrame(f, amplitude, speed, cb)\n\tif not IsValid(f) then return end\n\n\tlocal x = f:GetPos()\n\tmove(f, x + amplitude, speed, function()\n\t\tmove(f, x - amplitude, speed, function()\n\t\t\tmove(f, x, speed, cb)\n\t\tend)\n\tend)\nend\n\nfunction IGS.WIN.Item(uid)\n\tlocal ITEM = IGS.GetItemByUID(uid)\n\tif IsValid(m) then\n\t\tif m.item_uid == uid then -- –ø–æ–ø—ã—Ç–∫–∞ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è —Ç–æ–≥–æ –∂–µ —Ñ—Ä–µ–π–º–∞\n\n\t\t\tm:MoveToFront()\n\t\t\tshakeFrame(m, 20, .1)\n\n\t\t\treturn\n\t\tend\n\n\t\t-- –û—Ç–∫—Ä—ã—Ç–∏—è –¥—Ä—É–≥–æ–≥–æ\n\t\tm:Close()\n\t\tm = nil\n\tend\n\n\tsurface.PlaySound(\"ambient\/weather\/rain_drip1.wav\")\n\n\tm = uigs.Create(\"igs_frame\", function(self)\n\t\tself:SetSize(330,550)\n\t\tself:RememberLocation(\"igs_item\")\n\t\tself:MakePopup()\n\t\tself:SetTitle(ITEM:Name())\n\n\t\tself.item_uid  = uid -- –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –æ—Ç–∫—Ä—ã—Ç–∏—è –¥–≤—É—Ö –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Ñ—Ä–µ–π–º–æ–≤\n\tend)\n\n\n\tuigs.Create(\"igs_iteminfo\", function(p)\n\n\t\t--[[-------------------------------------------------------------------------\n\t\t\t–û—á–µ–Ω—å –Ω–µ –∫—Ä–∞—Å–∏–≤—ã–π, –Ω–æ –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω—ã–π –∫–æ–¥\n\t\t\t–ó–∞—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–∑—É–Ω–æ–∫ –ø–æ–º–∏–≥–∞—Ç—å –¥–ª—è –∑–∞–º–µ—Ç–Ω–æ—Å—Ç–∏\n\t\t---------------------------------------------------------------------------]]\n\t\tlocal viewed = tonumber( bib.get(\"igs:items_viewed\",0) )\n\t\tbib.set(\"igs:items_viewed\",viewed + 1)\n\n\t\t-- –ï—Å–ª–∏ –º–∏–≥–∞–ª–∏ 3+ —Ä–∞–∑–∞, —Ç–æ –±–æ–ª—å—à–µ –Ω–µ –Ω–∞–¥–æ\n\t\tif viewed < 3 then\n\t\t\tlocal oldThink = p.scroll.scrollBar.Think\n\t\t\ttimer.Simple(.5,function() -- 0.5 = –≤—Ä–µ–º—è, –∫–æ—Ç–æ—Ä–æ–µ —Å–∫—Ä–æ–ª–ª –±—É–¥–µ—Ç –º–∏–≥–∞—Ç—å\n\t\t\t\tif not IsValid(p) then return end\n\n\t\t\t\tp.scroll.scrollBar.Think = oldThink\n\t\t\tend)\n\n\t\t\tp.scroll.scrollBar.Think = function() --              \\\/ —Å–∫–æ—Ä–æ—Å—Ç—å –º–∏–≥–∞–Ω–∏—è\n\t\t\t\tp.scroll.scrollBar.addWidth = (math.sin( CurTime() * 20 ) + 1) \/ 2 * 8 -- 8 –ª–∏–º–∏—Ç —à–∏—Ä–∏–Ω—ã —Å–∫—Ä–æ–ª–ª–∞\n\t\t\t\tp.scroll.scrollBar:InvalidateLayout()\n\t\t\tend\n\t\tend\n\t\t-----------------------------------------------------------------------------\n\n\n\n\t\tp:Dock(FILL)\n\t\tp:SetIcon(ITEM:ICON())\n\t\tp:SetName(\"–î–µ–π—Å—Ç–≤—É–µ—Ç \" .. IGS.TermToStr(ITEM:Term()))\n\t\tp:SetImage(ITEM:IMG())\n\t\tp:SetSubNameButton(ITEM:Group() and ITEM:Group():Name(), function()\n\t\t\tIGS.WIN.Group(ITEM:Group():UID())\n\t\tend)\n\t\tp:SetDescription( ITEM:Description() )\n\t\tp:SetInfo(IGS.FormItemInfo(ITEM, LocalPlayer())) -- lp –¥–ª—è GetPrice\n\n\t\tm.act = p:CreateActivity() -- –ø–∞–Ω–µ–ª—å–∫–∞ –¥–ª—è –∫–∞—Å—Ç–æ–º —ç–ª–ª–µ–º–µ–Ω—Ç–æ–≤\n\t\tm.buy = uigs.Create(\"igs_button\", function(buy)\n\t\t\tlocal price = ITEM:GetPrice( LocalPlayer() )\n\n\t\t\tbuy:Dock(TOP)\n\t\t\tbuy:SetTall(20)\n\t\t\tbuy:SetText( \"–ö—É–ø–∏—Ç—å –∑–∞ \" .. PL_MONEY(price) )\n\t\t\tbuy:SetActive( IGS.CanAfford(LocalPlayer(), price) )\n\t\t\tbuy.DoClick = function(s)\n\t\t\t\tif not s:IsActive() then\n\t\t\t\t\tlocal need = price - LocalPlayer():IGSFunds()\n\n\t\t\t\t\tsurface.PlaySound(\"ambient\/voices\/citizen_beaten1.wav\") -- –µ—â–µ –µ—Å—Ç—å\n\t\t\t\t\tIGS.BoolRequest(\n\t\t\t\t\t\t\"–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–µ–Ω–µ–≥\",\n\t\t\t\t\t\t(\"–í–∞–º –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç %s –¥–ª—è –ø–æ–∫—É–ø–∫–∏ %s.\\n–ñ–µ–ª–∞–µ—Ç–µ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø–æ–ø–æ–ª–Ω–∏—Ç—å —Å—á–µ—Ç?\"):format( PL_MONEY(need), ITEM:Name()),\n\t\t\t\t\t\tfunction(yes)\n\t\t\t\t\t\t\tif yes then\n\t\t\t\t\t\t\t\tIGS.WIN.Deposit(price, true)\n\t\t\t\t\t\t\t\tsurface.PlaySound(\"vo\/npc\/male01\/yeah02.wav\")\n\t\t\t\t\t\t\tend\n\t\t\t\t\t\tend\n\t\t\t\t\t):ShowCloseButton(true)\n\n\t\t\t\t\treturn\n\t\t\t\tend\n\n\t\t\t\tpurchase(ITEM, s)\n\t\t\tend\n\t\tend, m.act)\n\tend, m)\n\n\thook.Run(\"IGS.OnItemInfoOpen\", ITEM, m)\nend\n-- IGS.WIN.Item(\"permission_model_30d\")\n", "igs\/interface\/vgui\/igs_frame.lua":"local PANEL = {}\n\nfunction PANEL:Init()\n\tself:DockPadding(0,24,0,0)\n\n\tself.lblTitle:SetPos(5,3)\n\tself.lblTitle:SetColor(IGS.col.TEXT_HARD)\n\n\tself.btnClose:SetTextColor(IGS.col.HIGHLIGHTING)\n\tself.btnClose:SetText(\"‚úï\")\n\tself.btnClose:SetSize(30, 24)\n\tself.btnClose.Paint = function() end\n\t-- self.btnClose.DoClick = function() self:Close() end\n\n\t-- self:SetBackgroundBlur(false)\n\tself:SetTitle(\"\")\n\n\t-- self.btnClose:SetVisible(false)\n\tself.btnMaxim:SetVisible(false)\n\tself.btnMinim:SetVisible(false)\n\n\tself.lblTitle:SetFont(\"igs.20\")\nend\n\nlocal locations = {}\nfunction PANEL:SaveLocation(panel_uid)\n\tlocations[panel_uid] = {self:GetPos()}\nend\n\nfunction PANEL:RestoreLocation(panel_uid)\n\tif locations[panel_uid] then\n\t\tlocal x,y = unpack(locations[panel_uid])\n\t\tself:SetPos(\n\t\t\tmath.Clamp(x,0,ScrW() - 10),\n\t\t\tmath.Clamp(y,0,ScrH() - 10)\n\t\t) -- –Ω–∞ —Å–ª—É—á–∞–π, –µ—Å–ª–∏ —É–º–µ–Ω—å—à–∞—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ, —á—Ç–æ–±—ã –Ω–µ –∏—Å—á–µ–∑–ª–æ —É –∫—Ä–∞–µ–≤\n\t\tlocations[panel_uid] = nil\n\telse\n\t\tself:Center()\n\tend\nend\n\nfunction PANEL:RememberLocation(panel_uid)\n\tself.remember_uid = panel_uid\nend\n\n\nfunction PANEL:Close(...)\n\tsurface.PlaySound(\"ambient\/water\/rain_drip3.wav\")\n\tself.BaseClass.Close(self, ...)\n\tif self.remember_uid then\n\t\tself:SaveLocation(self.remember_uid)\n\tend\nend\n\nfunction PANEL:GetTitleHeight()\n\treturn 24 -- close button H\nend\n\nfunction PANEL:Paint(w,h)\n\tif self.m_bBackgroundBlur then\n\t\tDerma_DrawBackgroundBlur(self, self.m_fCreateTime)\n\tend\n\n\tIGS.S.Frame(self,w,h)\n\treturn true\nend\n\nfunction PANEL:PaintOver(w,h)\n\tIGS.S.Outline(self,w,h) -- —á–µ—Ä–µ–∑ = –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–æ\nend\n\nfunction PANEL:Focus()\n\tlocal panels = {}\n\tself:SetBackgroundBlur(true)\n\tfor _, v in ipairs(vgui.GetWorldPanel():GetChildren()) do\n\t\tif v:IsVisible() and (v ~= self) then\n\t\t\tpanels[#panels + 1] = v\n\t\t\tv:SetVisible(false)\n\t\tend\n\tend\n\tself._OnClose = self.OnClose\n\tself.OnClose = function()\n\t\tfor _, v in ipairs(panels) do\n\t\t\tif IsValid(v) then\n\t\t\t\tv:SetVisible(true)\n\t\t\tend\n\t\tend\n\n\t\tself:_OnClose()\n\tend\nend\n\nfunction PANEL:PerformLayout()\n\tself.lblTitle:SizeToContents()\n\tself.btnClose:SetPos(self:GetWide() - 30, 0)\n\n\tif self.remember_uid and not self.restored then\n\t\tself.restored = true\n\t\tself:RestoreLocation(self.remember_uid)\n\tend\nend\n\nvgui.Register(\"igs_frame\",PANEL,\"DFrame\")\n-- IGS.UI()\n", "igs\/network\/net_sv.lua":"util.AddNetworkString(\"IGS.PaymentStatusUpdated\")\nutil.AddNetworkString(\"IGS.UI\")\n-- –û—Å—Ç–∞–ª—å–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ net_ReceiveProtected\n\n\nlocal SERIA_TIME   = 60 -- ~ –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫ –±—É–¥–µ—Ç —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å—Å—è —Å—á–µ—Ç—á–∏–∫\nlocal MAX_QUERIES  = 30 -- 30 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É, –ø–æ–ª—É—á–∞–µ—Ç—Å—è\nlocal KICK_QUERIES = 60 -- 60 –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ –º–∏–Ω—É—Ç—É —Å —á–µ–ª–æ–≤–µ–∫–∞ –∏ –∫–∏–∫\n\nlocal function SeriaTime()\n\treturn os.time() % SERIA_TIME\nend\n\nlocal function checkNotReady(pl) -- –Ω–µ –¥–∞–µ–º —Å–æ–≤–µ—Ä—à–∞—Ç—å –Ω–∏–∫–∞–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, –µ—Å–ª–∏ –∞–≤—Ç–æ–¥–æ–Ω–∞—Ç –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è (–ù–∞–ø—Ä–∏–º–µ—Ä, –±—ç–∫–µ–Ω–¥ —Å–¥–æ—Ö)\n\tlocal current_frame = SeriaTime()\n\n\tlocal d = pl:GetVar(\"igs_burst\", {0,0})\n\tlocal last_frame,queries = d[1],d[2]\n\n\tqueries = (current_frame < last_frame) and 0 or queries + 1\n\tlast_frame = current_frame\n\n\td[1],d[2] = last_frame,queries\n\n\tpl:SetVar(\"igs_burst\",d)\n\n\tif queries > KICK_QUERIES then\n\t\tpl:Kick(\"Networking flood\")\n\t\treturn true\n\tend\n\n\tif queries > MAX_QUERIES then\n\t\treturn true\n\tend\n\n\tif (not IGS.REPEATER:IsEmpty()) then\n\t\tIGS.Notify(pl,\"–ê–≤—Ç–æ–¥–æ–Ω–∞—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç\")\n\t\treturn true\n\tend\nend\n\nlocal function net_ReceiveProtected(sName, fCallback)\n\tutil.AddNetworkString(sName)\n\n\tnet.Receive(sName,function(_,pl)\n\t\tif checkNotReady(pl) then return end\n\n\t\t-- local iMsgID = net.ReadUInt(8) -- 255\n\t\tfCallback(pl, iMsgID)\n\tend)\nend\n\n\n\n\n--[[-------------------------------------------------------------------------\n\t–ü–û–ö–£–ü–ö–ê\n---------------------------------------------------------------------------]]\nlocal function IGS_Purchase(pl, uid, cb)\n\tlocal ITEM = IGS.GetItemByUID(uid)\n\n\tlocal price = ITEM:GetPrice(pl)\n\n\tlocal err =\n\t\tnot ITEM:CanSee( pl ) and \"–ö–∞–∫ –≤—ã –º–µ–Ω—è –Ω–∞—à–ª–∏?\"\n\t\tor not IGS.CanAfford(pl, price) and (\"–î–ª—è –ø–æ–∫—É–ø–∫–∏ –Ω—É–∂–Ω–æ \" .. PL_MONEY(price))\n\t\tor IGS.IsInventoryOverloaded(pl) and \"–£ –≤–∞—Å –ø–µ—Ä–µ–≥—Ä—É–∑ –≤ –¥–æ–Ω–∞—Ç –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ. –ê –µ—â–µ –≤—ã –æ–¥–∏–Ω –∏–∑ –Ω–µ–º–Ω–æ–≥–∏—Ö, –∫—Ç–æ –≤–∏–¥–µ–ª —ç—Ç–æ!\"\n\t\tor pl.igs_unfinished_purchase and \"–ó–∞–ø—Ä–æ—Å –Ω–∞ –ø–æ–∫—É–ø–∫—É –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ. –ü–æ–¥–æ–∂–¥–∏—Ç–µ, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞\" -- –≤ —Ü–∏–∫–ª–µ —Å –∫–ª–∏–µ–Ω—Ç–∞ –≤—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–∫—É–ø–∫–∏\n\n\t-- –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –æ—Ñ–Ω—É—Ç, –∑–Ω–∞—á–∏—Ç –∏—Ç–µ–º —Å—Ä–∞–∑—É –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å—Å—è\n\tif not IGS.C.Inv_Enabled then\n\t\tlocal can,e = ITEM:CanActivate(pl)\n\t\tif not can then\n\t\t\terr = e or \"–û—à–∏–±–∫–∞ 1\"\n\t\tend\n\tend\n\n\tlocal can,e = ITEM:CanBuy(pl)\n\tif not can then\n\t\terr = e or \"–û—à–∏–±–∫–∞ 2\"\n\tend\n\n\tif err then\n\t\tcb(nil, err)\n\t\treturn\n\tend\n\n\tpl.igs_unfinished_purchase = true\n\tpl:AddIGSFunds(-price, \"P: \" .. uid, function()\n\n\t\t-- –ª–æ–∂–∏—Ç –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –∏–ª–∏ —Ä–µ–≥–∞–µ—Ç —Å—Ä–∞–∑—É –∫–∞–∫ –ø–æ–∫—É–ø–∫—É –µ—Å–ª–∏ —Ç–æ—Ç –æ—Ç–∫–ª—é—á–µ–Ω\n\t\tIGS.PlayerPurchasedItem(pl, ITEM, function(invDbID_) -- nil if disabled\n\t\t\tpl.igs_unfinished_purchase = nil\n\n\t\t\tif IGS.C.Inv_Enabled then\n\t\t\t\tIGS.Notify(pl, \"–í–∞—à–∞ –ø–æ–∫—É–ø–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ \/donate –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ\")\n\t\t\tend\n\n\t\t\tcb(invDbID_)\n\t\tend)\n\n\tend)\nend\n\n-- –î–æ–±–∞–≤–ª—è–µ—Ç –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å\nnet_ReceiveProtected(\"IGS.Purchase\", function(pl)\n\tlocal sItemUID = net.ReadString()\n\n\tIGS_Purchase(pl, sItemUID, function(invDbID_, errMsg_)\n\t\tnet.Start(\"IGS.Purchase\")\n\t\t\tnet.WriteIGSError(errMsg_)\n\n\t\t\tif IGS.C.Inv_Enabled and not errMsg_ then\n\t\t\t\tnet.WriteUInt(invDbID_, IGS.BIT_INV_ID)\n\t\t\tend\n\t\tnet.Send(pl)\n\n\t\tif errMsg_ then\n\t\t\tlocal ITEM = IGS.GetItemByUID(sItemUID)\n\t\t\thook.Run(\"IGS.OnFailedPurchase\", pl, ITEM, errMsg_)\n\t\t\tIGS.Notify(pl,\"–û—à–∏–±–∫–∞ –ø–æ–∫—É–ø–∫–∏ \" .. sItemUID .. \": \" .. errMsg_)\n\t\tend\n\tend)\nend)\n\n\n\n\n\n--[[-------------------------------------------------------------------------\n\t–ê–ö–¢–ò–í–ê–¶–ò–Ø\n---------------------------------------------------------------------------]]\nlocal function IGS_Activate(pl, invDbID, cb)\n\tif not IGS.C.Inv_Enabled then\n\t\tcb(nil, \"–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å –æ—Ç–∫–ª—é—á–µ–Ω. –ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –º–æ–º–µ–Ω—Ç–∞–ª—å–Ω–∞—è\")\n\t\treturn\n\tend\n\n\tlocal INVITEM = IGS.Inventory(pl,\"map\")[invDbID]\n\tif not INVITEM then -- –µ—Å–ª–∏ —á–µ–ª —Ä–µ–∑–∫–æ –¥–≤–∞–∂–¥—ã –∫–Ω–æ–ø–∫—É –Ω–∞–∂–∞–ª\n\t\tcb(nil, \"–ü—Ä–µ–¥–º–µ—Ç —É–∂–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω. ID: \" .. tostring(invDbID))\n\t\treturn\n\tend\n\n\tlocal IGSITEM = IGS.GetItemByUID(INVITEM.Item)\n\n\tlocal can,err = IGSITEM:CanActivate(pl, invDbID)\n\tif not can then\n\t\tcb(nil, err or \"–û—à–∏–±–∫–∞\")\n\t\treturn\n\tend\n\n\t-- –í—ã—à–µ –µ—â–µ –ø—Ä–æ–≤–µ—Ä–∫–∞. –≠—Ç–æ –ª–∏—à–Ω—è—è, –Ω–æ –Ω–µ –ø–æ–º–µ—à–∞–µ—Ç\n\tlocal tRemoved = IGS.DeletePlayerInventoryItemLocally(pl, invDbID)\n\tif (not tRemoved) then\n\t\tcb(nil, \"–ü—Ä–µ–¥–º–µ—Ç —É–∂–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω #2\")\n\t\treturn\n\tend\n\n\tIGS.DeleteInventoryItem(function(ok)\n\t\tif not ok then -- –Ω–∞–ø—Ä–∏–º–µ—Ä, —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å \\\/\n\t\t\tcb(nil, \"–ü—Ä–µ–¥–º–µ—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω. –í–æ–∑–º–æ–∂–Ω–æ, —É–∂–µ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω\")\n\t\t\treturn\n\t\tend\n\n\t\thook.Run(\"IGS.PlayerActivatedInventoryItem\", pl, IGSITEM, invDbID) -- –≥–¥–µ-—Ç–æ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å invDbID –¥–ª—è log\n\t\tIGS.PlayerActivateItem(pl, IGSITEM:UID(), cb)\n\tend, invDbID)\nend\n\n-- –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç —É—Å–ª—É–≥—É, –∑–∞–±–∏—Ä–∞—è –µ–µ –∏–∑ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è\nnet_ReceiveProtected(\"IGS.Activate\", function(pl)\n\tIGS_Activate(pl, net.ReadUInt(IGS.BIT_INV_ID), net.ReadBool() and function(iPurchID, sMsg_)\n\t\tnet.Start(\"IGS.Activate\")\n\t\t\tnet.WriteBool(iPurchID) -- OK\n\t\t\tif iPurchID then\n\t\t\t\tnet.WriteUInt(iPurchID, IGS.BIT_PURCH_ID)\n\t\t\tend\n\t\t\tnet.WriteIGSMessage(sMsg_) -- err || custom msg || nothing (—Å–µ–π—á–∞—Å error only)\n\t\tnet.Send(pl)\n\tend or function() end)\nend)\n\n\n\n--[[-------------------------------------------------------------------------\n\t–ö–£–ü–û–ù–´\n---------------------------------------------------------------------------]]\nlocal function IGS_EnterCoupon(pl,sCode,cb)\n\tif string.Trim(sCode) == \"\" then\n\t\tcb(false, \"–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∫—É–ø–æ–Ω–∞\")\n\t\treturn\n\tend\n\n\t-- —Ö—É–∫ —é–∑–∞–µ—Ç—Å—è –≤ beauty code. –í–Ω—É—Ç—Ä–∏ –±–µ—Ä–µ—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–π –∫—É–ø–æ–Ω –∏–∑ –ë–î\n\t-- –∞ —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ —é–∑–∞—Ç—å –¥–ª—è –≤—Å—è–∫–æ–≥–æ —Ä–∞–∑–Ω–æ–≥–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä –∫—É–ø–æ–Ω—ã –Ω–∞ —Å–∫–∏–¥–∫—É\n\tlocal override,err_ = hook.Run(\"IGS.PlayerEnterCoupon\", pl, sCode)\n\tif override ~= nil then cb(override, err_) return end\n\n\tIGS.PlayerActivateCoupon(pl, sCode, cb)\nend\n\nnet_ReceiveProtected(\"IGS.UseCoupon\", function(pl)\n\tIGS_EnterCoupon(pl, net.ReadString(), function(ok, errMsg_)\n\t\tnet.Start(\"IGS.UseCoupon\")\n\t\t\tif not ok then\n\t\t\t\tnet.WriteIGSError(errMsg_ or \"unknown COUPON error\")\n\t\t\tend\n\t\tnet.Send(pl)\n\tend)\nend)\n\n\n\n\n--[[-------------------------------------------------------------------------\n\t–°–°–´–õ–ö–ò\n---------------------------------------------------------------------------]]\nnet_ReceiveProtected(\"IGS.GetPaymentURL\", function(pl)\n\tlocal sum  = net.ReadDouble()\n\n\tIGS.GetPaymentURL(function(url)\n\t\tnet.Start(\"IGS.GetPaymentURL\")\n\t\t\tnet.WriteString(url)\n\t\tnet.Send(pl)\n\tend, pl:SteamID64(), sum)\nend)\n\n\n--[[-------------------------------------------------------------------------\n\t–ü–û–°–õ–ï–î–ù–ò–ï –ü–û–ö–£–ü–ö–ò\n---------------------------------------------------------------------------]]\nlocal cache,last_update = {},0\nhook.Add(\"IGS.PlayerPurchasedItem\", \"ResetLatestPurchasesCache\", function()\n\t-- https:\/\/trello.com\/c\/hEgPItm0\/\n\ttable.Empty(cache)\n\tlast_update = 0\nend)\n\nlocal function IGS_GetLatestPurchases(pl, cb)\n\t-- –µ—Å–ª–∏ –∫—ç—à —Å—Ç–∞—Ä–µ–µ, —á–µ–º N –º–∏–Ω—É—Ç, —Ç–æ –æ–±–Ω–æ–≤–ª—è–µ–º –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∏–≥—Ä–æ–∫—É\n\t-- –ò–Ω–∞—á–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–Ω–≥–æ–≥–æ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –ë–î\n\tif last_update + 5 * 60 >= os.time() then\n\t\tcb(cache)\n\t\treturn\n\tend\n\n\t-- 10 –º–æ–∂–Ω–æ –ø–æ–¥–Ω–∏–º–∞—Ç—å –≤–ø–ª–æ—Ç—å –¥–æ 63. –î–∞–ª—å—à–µ –±—É–¥—É—Ç –æ—à–∏–±–∫–∏\n\tIGS.GetLatestPurchases(function(dat)\n\t\tcache = dat\n\t\tlast_update = os.time() -- CurTime –Ω–µ —é–∑–∞—Ç—å, —á—Ç–æ–±—ã –Ω–µ –ø–æ–ª—É—á–∞—Ç—å –ø—É—Å—Ç—É—é —Ç–∞–±–ª–∏—Ü—É\n\n\t\tcb(dat)\n\tend,10)\nend\n\nnet_ReceiveProtected(\"IGS.GetLatestPurchases\", function(pl)\n\tIGS_GetLatestPurchases(pl,function(dat)\n\t\tnet.Start(\"IGS.GetLatestPurchases\")\n\t\t\tnet.WriteUInt(#dat,IGS.BIT_LATEST_PURCH)\n\n\t\t\tfor _,v in ipairs(dat) do\n\t\t\t\tnet.WriteIGSPurchase(v)\n\t\t\tend\n\t\tnet.Send(pl)\n\tend)\nend)\n\n\n--[[-------------------------------------------------------------------------\n\t–°–ü–ò–°–û–ö –°–í–û–ò–• –¢–†–ê–ù–ó–ê–ö–¶–ò–ô\n---------------------------------------------------------------------------]]\nlocal function IGS_GetMyTransactions(pl, cb)\n\tIGS.GetPlayerTransactions(cb, pl:SteamID64())\nend\n\nnet_ReceiveProtected(\"IGS.GetMyTransactions\", function(pl)\n\tIGS_GetMyTransactions(pl, function(dat)\n\t\tnet.Start(\"IGS.GetMyTransactions\")\n\t\t\tnet.WriteUInt(#dat, IGS.BIT_TX)\n\n\t\t\tfor _,v in ipairs(dat) do\n\t\t\t\tnet.WriteIGSTx(v)\n\t\t\tend\n\t\tnet.Send(pl)\n\tend)\nend)\n\n\n--[[-------------------------------------------------------------------------\n\t–°–ü–ò–°–û–ö –°–í–û–ò–• –ü–û–ö–£–ü–û–ö\n---------------------------------------------------------------------------]]\nlocal function IGS_GetMyPurchases(pl,cb)\n\tIGS.GetPlayerPurchases(pl:SteamID64(),cb)\nend\n\nnet_ReceiveProtected(\"IGS.GetMyPurchases\", function(pl)\n\tIGS_GetMyPurchases(pl,function(dat)\n\t\tnet.Start(\"IGS.GetMyPurchases\")\n\t\t\tnet.WriteUInt(#dat,8) -- to 255\n\n\t\t\tfor _,v in ipairs(dat) do\n\t\t\t\tnet.WriteIGSPurchase(v)\n\t\t\tend\n\t\tnet.Send(pl)\n\tend)\nend)\n\n\n--[[-------------------------------------------------------------------------\n\t–ò–ù–í–ï–ù–¢–ê–†–¨\n---------------------------------------------------------------------------]]\nlocal function IGS_GetInventory(pl,cb)\n\tcb( IGS.C.Inv_Enabled and IGS.Inventory(pl) or {} )\nend\n\nnet_ReceiveProtected(\"IGS.GetInventory\", function(pl)\n\tIGS_GetInventory(pl,function(inv)\n\t\tnet.Start(\"IGS.GetInventory\")\n\t\t\tnet.WriteUInt(#inv,7) -- 127\n\t\t\tfor _,v in ipairs(inv) do\n\t\t\t\tnet.WriteIGSInventoryItem(v)\n\t\t\tend\n\t\tnet.Send(pl)\n\tend)\nend)\n\n\nlocal function IGS_DropItem(pl,invId,cb)\n\tif not (IGS.C.Inv_Enabled and IGS.C.Inv_AllowDrop) then return end\n\tlocal canDrop = hook.Run(\"IGS.PlayerCanDropGift\", pl, invId)\n\tif canDrop == false then\n\t\treturn\n\tend\n\n\tIGS.PlayerEjectItem(function(ent)\n\t\tif (not ent) then return end -- –æ—à–∏–±–∫–∞\n\n\t\ttimer.Simple(0,function() -- –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —ç–Ω—Ç–∏—Ç–∏\n\t\t\tcb(ent)\n\t\t\thook.Run(\"IGS.PlayerDroppedGift\", pl, ent:GetUID(), invId, ent)\n\t\tend)\n\tend, pl, invId)\nend\n\nnet_ReceiveProtected(\"IGS.DropItem\",function(pl)\n\tIGS_DropItem(pl,net.ReadUInt(IGS.BIT_INV_ID),function(ent)\n\t\tnet.Start(\"IGS.DropItem\")\n\t\t\tnet.WriteEntity(ent)\n\t\tnet.Send(pl)\n\tend)\nend)\n\n\n\n\n\n\nhook.Add(\"IGS.PaymentStatusUpdated\",\"network\",function(pl,d)\n\tif checkNotReady(pl) then return end\n\n\tnet.Start(\"IGS.PaymentStatusUpdated\")\n\t\tnet.WriteString(d.paymentType) -- qiwi, card, sms\n\t\tnet.WriteString(d.orderSum) -- 228.28\n\t\tnet.WriteString(d.method) -- check, pay, error\n\n\t\tif d.errorMessage then\n\t\t\tnet.WriteString(d.errorMessage)\n\t\tend\n\tnet.Send(pl)\nend)\n\n-- –û—Ç–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é—à–∫–∏ –Ω–∞ —á—É–±–∑–∏–∫–µ\nfunction IGS.UI(pl)\n\tif checkNotReady(pl) then return end\n\n\tnet.Ping(\"IGS.UI\",pl)\nend\n", "igs\/interface\/vgui\/igs_iteminfo.lua":"local PANEL = {}\n\nlocal dock = 5\n\nfunction PANEL:Init()\n\tself.head = uigs.Create(\"Panel\", self)\n\tself.head:SetTall(100)\n\tself.head:Dock(TOP)\n\tself.head:DockPadding(dock,dock,dock,dock)\n\tself.head.Paint = function(s,w,h)\n\t\tIGS.S.Panel(s,w,h, nil,nil,nil,true)\n\tend\n\n\tself.scroll = uigs.Create(\"igs_scroll\", self)\n\tself.scroll:Dock(FILL)\nend\n\nfunction PANEL:SetName(sName)\n\tself.name = self.name or uigs.Create(\"DLabel\", function(lbl)\n\t\tlbl:Dock(TOP)\n\t\t--lbl:SetTall(22)\n\t\tlbl:SetFont(\"igs.22\")\n\t\tlbl:SetTextColor(IGS.col.TEXT_HARD)\n\t\tlbl:SetWrap(true)\n\t\tlbl:SetAutoStretchVertical(true)\n\t\tlbl:SizeToContents()\n\tend, self.head)\n\n\tself.name:SetText(sName)\nend\n\n-- –î–æ–±–∞–≤–ª—è–µ—Ç –∏–∫–æ–Ω–∫—É —Ä—è–¥–æ–º —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –∏–Ω—Ñ–æ –ø–∞–Ω–µ–ª–∏\nfunction PANEL:SetIcon(sIco, sMode) -- url or Model path\n\tlocal bIsModel = sMode == true or sMode == \"model\"\n\tlocal bIsMaterial = sMode == \"material\"\n\n\tself.icon_bg = self.icon_bg or uigs.Create(\"Panel\", function(bg)\n\t\tbg.Paint = IGS.S.RoundedPanel\n\t\tbg:SetWide(self.head:GetTall() - dock * 2)\n\t\tbg:Dock(LEFT)\n\t\tbg:DockPadding(3,3,3,3)\n\t\tbg:DockMargin(0,0,dock,0)\n\n\t\tbg:InvalidateParent(true) -- true bg:GetSize()\n\tend, self.head)\n\n\tself.icon = self.icon or (bIsModel and uigs.Create(\"DModelPanel\", function(mdl)\n\t\tmdl:SetSize(self.icon_bg:GetSize())\n\t\tmdl:SetModel(sIco)\n\n\t\tlocal mn, mx = mdl.Entity:GetRenderBounds()\n\t\tlocal size = 0\n\t\tsize = math.max(size, math.abs(mn.x) + math.abs(mx.x))\n\t\tsize = math.max(size, math.abs(mn.y) + math.abs(mx.y))\n\t\tsize = math.max(size, math.abs(mn.z) + math.abs(mx.z))\n\n\t\tmdl:SetFOV(30)\n\t\tmdl:SetCamPos(Vector(size, size, size))\n\t\tmdl:SetLookAt((mn + mx) * 0.5)\n\t\tmdl.LayoutEntity = function() return false end\n\n\tend, self.icon_bg)) or uigs.Create(\"igs_wmat\", function(ico)\n\t\tico:SetSize(self.icon_bg:GetSize())\n\t\tico.AutoSize = false\n\tend, self.icon_bg) -- –ù–ï –º–æ–¥–µ–ª—å–∫–∞ (–°—Å—ã–ª–∫–∞ –Ω–∞ –∏–∫–æ–Ω–∫—É)\n\n\n\tif bIsModel then\n\t\tself.icon:SetModel(sIco)\n\telseif bIsMaterial then\n\t\tself.icon:SetMaterial(sIco)\n\telse\n\t\tself.icon:SetURL(sIco) -- nil = —Å–±—Ä–æ—Å\n\tend\nend\n\n-- –ö–Ω–æ–ø–∫–∞ –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º –∏–Ω—Ñ–æ –ø–∞–Ω–µ–ª–∏\nfunction PANEL:SetSubNameButton(sName,func)\n\tif not sName then return end\n\n\tself.sub = self.sub or uigs.Create(\"DButton\", function(btn)\n\t\tbtn:Dock(TOP)\n\t\tbtn:SetTall(20)\n\t\tbtn:SetFont(\"igs.20\")\n\t\tbtn:SetTextColor(IGS.col.TEXT_SOFT)\n\t\tbtn:SetContentAlignment(4)\n\t\tbtn.DoClick = func\n\t\tbtn.Paint = function() end\n\tend, self.head)\n\n\tself.sub:SetText(sName .. \"‚Øà\")\nend\n\n-- –°–æ–∑–¥–∞–µ—Ç –Ω–µ–≤–∏–¥–∏–º—É—é –ø–∞–Ω–µ–ª—å–∫—É –≤–æ—Ç —Ç—É—Ç:\n-- https:\/\/img.qweqwe.ovh\/1486589180000.png\nfunction PANEL:CreateActivity()\n\tself.activity = self.activity or uigs.Create(\"Panel\", function(btn)\n\t\tbtn:Dock(FILL)\n\tend, self.head)\n\n\treturn self.activity\nend\n\n-- –û–ø–∏—Å–∞–Ω–∏–µ, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –∫–∞—Ä—Ç–∏–Ω–∫–∞\nfunction PANEL:AddPanel(sTitle,panel)\n\t-- https:\/\/img.qweqwe.ovh\/1486595573943.png\n\tlocal background = uigs.Create(\"Panel\", function(bg)\n\t\tbg:DockPadding(10,0,10,0) -- –æ—Ç—Å—Ç—É–ø—ã –ø–æ –∫—Ä–∞—è–º –≤–Ω—É—Ç—Ä–∏ —Å–∫—Ä–æ–ª–ª–∞\n\t\tbg.Paint = function(s,w,h) -- –ª–∏–Ω–∏—è —Å–Ω–∏–∑—É –ø–æ—Å–µ—Ä–µ–¥–∏–Ω–µ –ø–∞–Ω–µ–ª–∏ https:\/\/img.qweqwe.ovh\/1491948928484.png\n\t\t\tsurface.SetDrawColor(IGS.col.SOFT_LINE)\n\t\t\tsurface.DrawLine(10,h - 1,w - 10,h - 1)\n\t\tend\n\tend) -- –¥–ª—è –æ—Ç—Å—Ç—É–ø–æ–≤\n\n\tlocal y = panel:GetTall() -- —Å –¥–æ–∫–∞–º–∏ –Ω–µ –≤—ã—à–ª–æ, –ø—Ä–∏—à–ª–æ—Å—å —Å–µ—Ç–∏—Ç—å –≤—Ä—É—á–Ω—É—é\n\n\tuigs.Create(\"DLabel\", function(title)\n\t\ttitle:Dock(TOP)\n\t\ttitle:SetTall(22)\n\t\ttitle:DockMargin(0,10,0,5)\n\t\ttitle:SetText(sTitle)\n\t\ttitle:SetFont(\"igs.22\")\n\t\ttitle:SetTextColor(IGS.col.TEXT_HARD)\n\n\t\ty = y + 22 + 5 + 5\n\tend, background)\n\n\tpanel:SetParent(background)\n\tpanel:Dock(TOP)\n\n\tself.scroll:AddItem(background)\n\n\tbackground:SetTall(y + 5 + 10) -- 5 —Ö–∑ —á–µ, –∞ 10 - –æ—Ç—Å—Ç—É–ø –æ—Ç —Ç–µ–∫—Å—Ç–∞ –∫ –±–æ—Ä—Ç–∏–∫—É —Å–Ω–∏–∑—É\nend\n\nfunction PANEL:Reset()\n\tself.scroll:Reset()\n\n\tif self.name then\n\t\tself.name:SetText(\"\")\n\tend\n\n\tif self.sub then\n\t\tself.sub:SetText(\"\")\n\tend\n\n\tif self.icon then\n\t\tself.icon:SetURL() -- IGS.C.DefaultIcon\n\tend\nend\n\n\n--[[-------------------------------------------------------------------------\n–ù–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –º–µ—Ç–æ–¥—ã. –ò—Ö —Ç—É—Ç –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞\n–ù–æ —Ç–∞–∫ –∫–∞–∫ —è –ø–∞–Ω–µ–ª—å –±–æ–ª—å—à–µ –Ω–∏–≥–¥–µ, –∫—Ä–æ–º–µ IGS –Ω–µ —é–∑–∞—é, —Ç–æ –º–Ω–µ —Ç–∞–∫ –±—É–¥–µ—Ç —É–¥–æ–±–Ω–µ–µ\n---------------------------------------------------------------------------]]\n-- –î–æ–±–∞–≤–ª—è–µ—Ç –ø–∞–Ω–µ–ª—å —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º\nfunction PANEL:SetDescription(sDescription)\n\tif self.description then return end\n\n\tlocal pnl = uigs.Create(\"Panel\")\n\n\tself:InvalidateParent(true)\n\tlocal w = self:GetWide()\n\tlocal txt = string.Wrap(\"igs.15\", sDescription, w - 10 - 10)\n\tlocal y   = 0\n\n\tfor _,line in ipairs(txt) do\n\t\tuigs.Create(\"DLabel\", function(d)\n\t\t\td:SetPos(0,y)\n\t\t\td:SetSize(w,15)\n\t\t\td:SetFont(\"igs.15\")\n\t\t\td:SetTextColor(IGS.col.TEXT_SOFT)\n\t\t\td:SetText(line)\n\n\t\t\ty = y + 15\n\t\tend, pnl)\n\tend\n\n\tpnl:SetTall(y)\n\tself:AddPanel(\"–û–ø–∏—Å–∞–Ω–∏–µ\",pnl)\nend\n\nfunction PANEL:SetInfo(tInf)\n\tlocal pnl = uigs.Create(\"Panel\")\n\tlocal y = 0\n\n\tfor k,v in pairs(tInf) do\n\t\tlocal line_bg = uigs.Create(\"Panel\", pnl)\n\t\tline_bg:SetTall(15)\n\t\tline_bg:Dock(TOP)\n\n\t\tuigs.Create(\"DLabel\", function(key)\n\t\t\tkey:Dock(LEFT)\n\t\t\tkey:SetWide(80)\n\t\t\tkey:SetFont(\"igs.15\")\n\t\t\tkey:SetTextColor(IGS.col.TEXT_SOFT)\n\t\t\tkey:SetText(k)\n\t\t\tkey:SetContentAlignment(6)\n\t\tend, line_bg)\n\n\t\tuigs.Create(\"DLabel\", function(key)\n\t\t\tkey:Dock(FILL)\n\t\t\tkey:SetFont(\"igs.15\")\n\t\t\tkey:SetTextColor(IGS.col.TEXT_HARD)\n\t\t\tkey:SetText(\"  \" .. v)\n\t\t\tkey:SetContentAlignment(4)\n\t\tend, line_bg)\n\n\t\ty = y + 15\n\tend\n\n\tpnl:SetTall(y)\n\tself:AddPanel(\"–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è\",pnl)\nend\n\n-- –î–æ–±–∞–≤–ª—è–µ—Ç –ø–∞–Ω–µ–ª—å —Å —É–∫–∞–∑–∞–Ω–Ω—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º\nfunction PANEL:SetImage(sUrl)\n\tif not sUrl then return end\n\n\tself:InvalidateParent(true) -- self:GetWide()\n\n\tlocal pnl = uigs.Create(\"igs_wmat\")\n\tpnl:SetSize(self:GetWide(),self:GetWide() \/ 5 * 2) -- —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ 5:2\n\tpnl:SetURL(sUrl)\n\n\tself:AddPanel(\"–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ\",pnl)\nend\n\nvgui.Register(\"igs_iteminfo\",PANEL,\"Panel\")\n\n-- IGS.WIN.Item(\"group_premium_15d\")\n", "igs\/modules\/pushes\/_main.lua":"IGS.sv(\"akupol_sv.lua\")\nIGS.sv(\"init_sv.lua\")\nIGS.sv(\"actions_sv.lua\")\n", "igs\/dependencies\/scc.lua":"-- Simple Chat Commands\n-- Special for IGS by _AMD_\n-- 2019.11.08 01:47\n\nscc = {\n\tcommands = {},\n}\n\nif SERVER then\n\tutil.AddNetworkString(\"scc.run\")\nend\n\nfunction scc.add(command, callback)\n\tscc.commands[command:lower()] = callback\nend\n\nfunction scc.run(pl, command, args)\n\tlocal callback = scc.commands[command:lower()]\n\tcallback(pl, unpack(args or {}))\nend\n\n\nif SERVER then\n\thook.Add(\"PlayerSay\", \"scc\", function(pl, text)\n\t\ttext = text:Trim()\n\t\tif text[1] == \"\/\" then\n\t\t\tlocal pieces  = text:Split(\" \")\n\t\t\tlocal command = pieces[1]:sub(2):lower()\n\n\t\t\tif scc.commands[command] then\n\t\t\t\tlocal args = {}\n\t\t\t\tfor i = 2,#pieces do\n\t\t\t\t\targs[#args + 1] = pieces[i]\n\t\t\t\tend\n\n\t\t\t\tscc.run(pl, command, args)\n\t\t\t\treturn \"\"\n\t\t\tend\n\t\tend\n\tend)\nend\n\n\n--[[-------------------------------------------------------------------------\n---------------------------------------------------------------------------]]\n\nlocal PLAYER = FindMetaTable(\"Player\")\nfunction PLAYER:RunSCC(command, ...)\n\tscc.run(self, command, {...})\nend\n\n-- function scc.addWithCooldown(cooldown, command, callback)\n-- \tlocal runIfNotCooldown = function(pl, ...)\n-- \t\tif not pl.sccLastRun then pl.sccLastRun = {} end\n-- \t\tif CurTime() - (pl.sccLastRun[command] or 0) >= cooldown then\n-- \t\t\tpl.sccLastRun[command] = CurTime()\n-- \t\t\tcallback(pl, ...)\n-- \t\tend\n-- \tend\n\n-- \tscc.add(command, runIfNotCooldown)\n-- end\n\nif SERVER then\n\tutil.AddNetworkString(\"scc.run\")\nelse\n\tnet.Receive(\"scc.run\", function()\n\t\tlocal command = net.ReadString()\n\t\tlocal args = {}\n\t\tfor i = 1, net.ReadUInt(4) do\n\t\t\targs[i] = net.ReadString()\n\t\tend\n\n\t\tscc.run(LocalPlayer(), command, args)\n\tend)\nend\n\nfunction scc.addClientside(command, callback)\n\tlocal runOnClient = SERVER and function(pl, ...)\n\t\tlocal args = {...}\n\t\tnet.Start(\"scc.run\")\n\t\t\tnet.WriteString(command)\n\t\t\tnet.WriteUInt(#args, 4)\n\t\t\tfor _,arg in ipairs(args) do\n\t\t\t\tnet.WriteString(arg)\n\t\t\tend\n\t\tnet.Send(pl)\n\tend or callback\n\n\tscc.add(command, runOnClient)\nend\n", "entities\/npc_igs\/init.lua":"IGS.sh(\"shared.lua\")\nIGS.cl(\"cl_init.lua\")\n\nfunction ENT:Initialize()\n\tself:SetModel(IGS_NPC_MODEL or \"models\/gman_high.mdl\")\n\tself:SetHullType( HULL_HUMAN )\n\tself:SetHullSizeNormal()\n\tself:SetSolid( SOLID_BBOX )\n\tself:CapabilitiesAdd( CAP_ANIMATEDFACE )\n\tself:CapabilitiesAdd( CAP_TURN_HEAD )\n\tself:DropToFloor()\n\tself:SetMoveType( MOVETYPE_NONE )\n\tself:SetCollisionGroup( COLLISION_GROUP_PLAYER )\n\tself:SetUseType( SIMPLE_USE )\n\n\tlocal phys = self:GetPhysicsObject()\n\tif IsValid(phys) then\n\t\tphys:EnableMotion(false)\n\tend\nend\n\nfunction ENT:PlayerUse(pl)\n\tIGS.UI(pl)\nend\n\nfunction ENT:AcceptInput(name, activator, pl, data)\n\tif name == \"Use\" then\n\t\tself:PlayerUse(pl)\n\tend\nend\n", "igs\/network\/net_cl.lua":"-- –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ–∫—É–ø–∫—É –∏—Ç–µ–º–∞ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å\nfunction IGS.Purchase(sItemUID, callback)\n\tnet.Start(\"IGS.Purchase\")\n\t\tnet.WriteString(sItemUID)\n\tnet.SendToServer()\n\n\tnet.Receive(\"IGS.Purchase\",function()\n\t\tlocal errMsg  = net.ReadIGSError()\n\n\t\tlocal ITEM = IGS.GetItemByUID(sItemUID)\n\t\tif errMsg then\n\t\t\tif callback then callback(errMsg) end\n\t\t\thook.Run(\"IGS.OnFailedPurchase\", ITEM, errMsg)\n\t\telse\n\t\t\tlocal invDbID_ = IGS.C.Inv_Enabled and net.ReadUInt(IGS.BIT_INV_ID)\n\t\t\tif callback then callback(nil, invDbID_) end\n\t\t\thook.Run(\"IGS.PlayerPurchasedItem\", LocalPlayer(), ITEM, invDbID_)\n\t\tend\n\tend)\nend\n\n-- –ê–∫—Ç–∏–≤–∏—Ä—É–µ—Ç –∫—É–ø–ª–µ–Ω–Ω—ã–π –∏—Ç–µ–º (–¢–æ–ª—å–∫–æ –µ—Å–ª–∏ IGS.C.Inv_Enabled)\nfunction IGS.Activate(iInvID, callback)\n\tnet.Start(\"IGS.Activate\")\n\t\tnet.WriteUInt(iInvID, IGS.BIT_INV_ID)\n\t\tnet.WriteBool(callback)\n\tnet.SendToServer()\n\n\tif not callback then return end\n\tnet.Receive(\"IGS.Activate\", function()\n\t\tlocal ok = net.ReadBool()\n\t\tlocal iPurchID = ok and net.ReadUInt(IGS.BIT_PURCH_ID)\n\t\tlocal sMsg_ = net.ReadIGSMessage()\n\t\tcallback(ok, iPurchID, sMsg_)\n\tend)\nend\n\nfunction IGS.UseCoupon(sCoupon, callback)\n\tnet.Start(\"IGS.UseCoupon\")\n\t\tnet.WriteString(sCoupon)\n\tnet.SendToServer()\n\n\tnet.Receive(\"IGS.UseCoupon\", function()\n\t\tcallback(net.ReadIGSError())\n\tend)\nend\n\n--[[-------------------------------------------------------------------------\n\t–°—Å—ã–ª–∫–∏\n---------------------------------------------------------------------------]]\nfunction IGS.GetPaymentURL(iSum,fCallback) -- url in callback\n\tnet.Start(\"IGS.GetPaymentURL\")\n\t\tnet.WriteDouble(iSum)\n\tnet.SendToServer()\n\n\tnet.Receive(\"IGS.GetPaymentURL\",function()\n\t\tfCallback(net.ReadString()) -- url\n\tend)\nend\n\n\n\nlocal cache,last_update = {},0 -- –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Ç–æ–∂–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ\nfunction IGS.GetLatestPurchases(fCallback)\n\tif last_update + 60 >= os.time() then\n\t\tfCallback(cache)\n\t\treturn\n\tend\n\n\tnet.Ping(\"IGS.GetLatestPurchases\")\n\tnet.Receive(\"IGS.GetLatestPurchases\",function()\n\t\tlocal dat = {}\n\t\tfor i = 1,net.ReadUInt(IGS.BIT_LATEST_PURCH) do\n\t\t\tdat[i] = net.ReadIGSPurchase() -- id –∏ purchase –Ω–µ —é–∑–∞—é—Ç—Å—è\n\t\tend\n\n\t\tcache = dat\n\t\tlast_update = os.time()\n\n\t\tfCallback(dat)\n\tend)\nend\n\n-- —Ç—É—Ç —Ç–∞–π–º–∞—É—Ç –Ω–µ –Ω—É–∂–Ω–æ. –î–∞–∂–µ –µ—Å–ª–∏ –∑–∞—Å–ø–∞–º–∏—Ç—å net - –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç\nfunction IGS.GetMyTransactions(fCallback)\n\tnet.Ping(\"IGS.GetMyTransactions\")\n\n\tnet.Receive(\"IGS.GetMyTransactions\",function()\n\t\tlocal dat = {}\n\t\tfor i = 1,net.ReadUInt(IGS.BIT_TX) do\n\t\t\tdat[i] = net.ReadIGSTx()\n\t\tend\n\n\t\tfCallback(dat)\n\tend)\nend\n\nfunction IGS.GetMyPurchases(fCallback)\n\tnet.Ping(\"IGS.GetMyPurchases\")\n\n\tnet.Receive(\"IGS.GetMyPurchases\",function()\n\t\tlocal dat = {}\n\t\tfor i = 1,net.ReadUInt(8) do\n\t\t\tdat[i] = net.ReadIGSPurchase()\n\t\tend\n\n\t\tfCallback(dat)\n\tend)\nend\n\n\n\n\n--[[-------------------------------------------------------------------------\n\t–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å\n---------------------------------------------------------------------------]]\nfunction IGS.GetInventory(fCallback)\n\tnet.Ping(\"IGS.GetInventory\")\n\n\tnet.Receive(\"IGS.GetInventory\",function()\n\t\tlocal d = {}\n\n\t\tfor i = 1,net.ReadUInt(7) do\n\t\t\td[i] = net.ReadIGSInventoryItem()\n\t\tend\n\n\t\tfCallback(d)\n\tend)\nend\n\nfunction IGS.DropItem(iID,fCallback) -- —ç–Ω—Ç–∏—Ç–∏ –≤ –∫–∞–ª–ª–±—ç–∫–µ\n\tif not IGS.C.Inv_AllowDrop then\n\t\tIGS.ShowNotify(\"–î—Ä–æ–ø –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –æ—Ç–∫–ª—é—á–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º\", \"–û—à–∏–±–∫–∞\")\n\t\treturn\n\tend\n\n\tnet.Start(\"IGS.DropItem\")\n\t\tnet.WriteUInt(iID,IGS.BIT_INV_ID)\n\tnet.SendToServer()\n\n\tnet.Receive(\"IGS.DropItem\",function()\n\t\tlocal ent = net.ReadEntity()\n\n\t\tif fCallback then\n\t\t\tfCallback(ent)\n\t\tend\n\tend)\nend\n\n\n\n\nnet.Receive(\"IGS.PaymentStatusUpdated\",function()\n\tlocal t = {}\n\tt.paymentType = net.ReadString()\n\tt.orderSum    = net.ReadString()\n\tt.method      = net.ReadString()\n\n\tif t.method == \"error\" then\n\t\tt.errorMessage = net.ReadString()\n\tend\n\n\thook.Run(\"IGS.PaymentStatusUpdated\",t)\nend)\n\nnet.Receive(\"IGS.UI\",function()\n\tIGS.UI()\nend)\n", "igs\/extensions\/pointshop2.lua":"local STORE_ITEM = MT_IGSItem\n\nfunction STORE_ITEM:SetPremiumPoints(iAmount)\n\treturn self:SetInstaller(function(pl)\n\t\tpl:PS2_AddPremiumPoints(iAmount)\n\tend):SetMeta(\"ps2_prempoints\", iAmount)\nend\n\nfunction STORE_ITEM:SetPoints(iAmount)\n\treturn self:SetInstaller(function(pl)\n\t\tpl:PS2_AddStandardPoints(iAmount, \"\/donate\")\n\tend):SetMeta(\"ps2_points\", iAmount)\nend\n", "igs\/extensions\/extra.lua":"local STORE_ITEM = MT_IGSItem\n\nfunction STORE_ITEM:SetMaxGlobalPurchases(iMax)\n\tIGS.nw.Register(\"total_purchases_\" .. self:UID()) -- —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ —Ö—É–∫–∞ —é–∑\n\t\t:Write(net.WriteUInt, 8)\n\t\t:Read(net.ReadUInt, 8)\n\t:SetGlobal():SetHook(\"total_purchases_\" .. self:UID())\n\n\tif CLIENT then -- #todo nw –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç, –Ω–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –û–î–ò–ù –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π —Ö—É–∫\n\t\thook.Add(\"total_purchases_\" .. self:UID(), self:UID(), function(purchased)\n\t\t\tif self.user_icon == nil then -- —á—Ç–æ–±—ã –ø—Ä–æ –ª—É–∞ —Ä–µ—Ñ—Ä–µ—à–µ –Ω–µ —Å—Ç–∞–ª–æ true\n\t\t\t\tself.user_icon = tobool(self.icon) -- bool –≤–º–µ—Å—Ç–æ —Å—Å—ã–ª–∫–∏. –ù—É–∂–µ–Ω, —á—Ç–æ–±—ã –Ω–µ –æ–≤–µ—Ä—Ä–∞–π–¥–∏—Ç—å —é–∑–µ—Ä—Å–∫–∏–µ –∏–∫–æ–Ω–∫–∏\n\t\t\tend\n\t\t\tif not self.user_icon then\n\t\t\t\tlocal left = iMax - purchased\n\t\t\t\tlocal icon = left <= 0 and \" 0 \" or left -- –ø–æ—Ç–æ–º—É —á—Ç–æ 0 —Å–∞–π—Ç –Ω–µ –ø–µ—Ä–µ–∂–µ–≤—ã–≤–∞–µ—Ç\n\t\t\t\tself:SetIcon(\"https:\/\/via.placeholder.com\/90x90.png?text=\" .. icon)\n\t\t\tend\n\n\t\t\tif purchased >= iMax then\n\t\t\t\tself:SetHidden()\n\t\t\tend\n\t\tend)\n\telse\n\t\tlocal purchased = bib.getNum(\"igs:total_purchases:\" .. self:UID())\n\t\tIGS.nw.SetGlobal(\"total_purchases_\" .. self:UID(), purchased or 0)\n\tend\n\n\treturn self:SetMeta(\"global_limit\", iMax)\nend\n\nhook.Add(\"IGS.CanPlayerBuyItem\", \"GlobalLimit\", function(_, ITEM)\n\tif SERVER and ITEM:GetMeta(\"global_limit\") then\n\t\tlocal limit     = ITEM:GetMeta(\"global_limit\")\n\t\tlocal purchased = bib.getNum(\"igs:total_purchases:\" .. ITEM:UID(), 0)\n\n\t\tif purchased >= limit then\n\t\t\treturn false, \"–≠—Ç–æ—Ç –ø—Ä–µ–¥–º–µ—Ç –∑–∞–∫–æ–Ω—á–∏–ª—Å—è\"\n\t\tend\n\tend\nend)\n\nhook.Add(\"IGS.PlayerPurchasedItem\", \"GlobalLimit\", function(_, ITEM)\n\tif SERVER and ITEM:GetMeta(\"global_limit\") then\n\t\tlocal limit     = ITEM:GetMeta(\"global_limit\")\n\t\tlocal purchased = bib.getNum(\"igs:total_purchases:\" .. ITEM:UID(), 0)\n\n\t\tbib.setNum(\"igs:total_purchases:\"   .. ITEM:UID(), purchased + 1)\n\t\tIGS.nw.SetGlobal(\"total_purchases_\" .. ITEM:UID(), purchased + 1)\n\n\t\tif purchased >= limit then\n\t\t\tITEM:SetHidden()\n\t\tend\n\tend\nend)\n\n\n\n\n-- –í–æ–∑–≤–æ–ª—è–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ü–û–ö–£–ü–û–ö –æ–¥–Ω–æ–≥–æ –ø—Ä–µ–¥–º–µ—Ç–∞\n-- –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –≤–∏–ø–æ–∫ –∑–∞ —Ä—É–±–ª—å –∏ —Ç–¥\nfunction STORE_ITEM:SetMaxPlayerPurchases(iLimit)\n\treturn self:SetOnBuy(function(pl)\n\t\tlocal limit = self:GetMeta(\"purchasesLimit\")\n\t\tif limit then\n\t\t\tlocal key = string.format(\"igs:purchases:%s:%s\", pl:UniqueID(), self:UID())\n\t\t\tlocal now_purchased = bib.getNum(key, 0) + 1\n\t\t\tbib.setNum(key, now_purchased)\n\t\t\tIGS.Notify(pl, \"–í—ã –∫—É–ø–∏–ª–∏ \" .. self:Name() .. \" \" .. now_purchased .. \" —Ä–∞–∑ –∏–∑ \" .. limit)\n\t\tend\n\tend):SetMeta(\"purchasesLimit\", iLimit)\nend\n\n-- –ü—Ä–∏—á–∏–Ω–∞ –ø–æ—á–µ–º—É –≤ —Ö—É–∫–µ, –∞ –Ω–µ –º–µ—Ç–æ–¥–µ: https:\/\/vk.com\/gim143836547?sel=273715457&msgid=211938\nhook.Add(\"IGS.CanPlayerBuyItem\", \"PlayerLimit\", function(pl, ITEM)\n\tif SERVER and ITEM:GetMeta(\"purchasesLimit\") then\n\t\tlocal limit = ITEM:GetMeta(\"purchasesLimit\")\n\t\tlocal key   = string.format(\"igs:purchases:%s:%s\", pl:UniqueID(), ITEM:UID())\n\t\tif bib.getNum(key, 0) >= limit then\n\t\t\treturn false, \"–≠—Ç–æ—Ç –ø—Ä–µ–¥–º–µ—Ç –º–æ–∂–Ω–æ –∫—É–ø–∏—Ç—å —Ç–æ–ª—å–∫–æ \" .. limit .. \" —Ä–∞–∑(–∞)\"\n\t\tend\n\tend\nend)\n\n\n\n\n-- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –∏—Ç–µ–º—ã –±—É–¥—É—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω—ã –Ω–∞ –∫–∞–∂–¥–æ–º —Å–µ—Ä–≤–µ—Ä–µ –ø—Ä–æ–µ–∫—Ç–∞\n-- https:\/\/img.qweqwe.ovh\/1574888071533.png\nfunction STORE_ITEM:SetGlobal(b)\n\treturn self:SetMeta(\"global\", b ~= false)\nend\n\nhook.Add(\"IGS.PlayerActivatedItem\", \"IGS.GlobalPurchase\", function(pl, ITEM)\n\tif SERVER and ITEM:GetMeta(\"global\") then\n\t\tfor sv_id in pairs(IGS.SERVERS.MAP) do\n\t\t\tif sv_id ~= IGS.SERVERS.CURRENT then -- –µ—â–µ –Ω–µ –≤—ã–¥–∞–Ω–æ\n\t\t\t\tIGS.StorePurchase(pl:SteamID64(), ITEM:UID(), ITEM:Term(), sv_id)\n\t\t\tend\n\t\tend\n\n\t\tIGS.Notify(pl, \"–ü—Ä–µ–¥–º–µ—Ç –≤—ã–¥–∞–Ω –Ω–∞ \" .. IGS.SERVERS.TOTAL .. \" —Å–µ—Ä–≤–µ—Ä–∞—Ö\")\n\tend\nend)\n\n-- –í—ã–¥–∞–µ—Ç —Ä–∞–Ω–¥–æ–º–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç –∏–∑ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö (–∞–Ω–∞–ª–æ–≥ –∫–µ–π—Å–æ–≤)\n-- https:\/\/trello.com\/c\/hWRihJ1k\/564\n-- –ó–∞–º–µ—Ç–∫–∞, –ø–æ—á–µ–º—É –Ω–µ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å tItemsUIDs\n-- https:\/\/img.qweqwe.ovh\/1568507799904.png\n-- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å :SetStackable –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏\nlocal function giveRandomItem(pl, tItems)\n\tlocal WINNED_ITEM = table.Random(tItems)\n\n\tIGS.PlayerActivateItem(pl, WINNED_ITEM:UID(), function()\n\t\tIGS.Notify(pl, \"–í—ã –ø–æ–ª—É—á–∏–ª–∏ \" .. WINNED_ITEM:Name())\n\tend)\nend\n\n-- –°–æ—á–µ—Ç–∞–µ—Ç—Å—è —Å :SetTerm(0), :SetMaxPurchases() –∏ :SetStackable()\nfunction STORE_ITEM:SetRandom(tItems)\n\treturn self:SetInstaller(function(pl)\n\t\tgiveRandomItem(pl, self:GetMeta(\"random_items\"))\n\tend):SetMeta(\"random_items\", tItems)\nend\n\n\nlocal function giveItemsSet(pl, tItems)\n\tlocal added = 0\n\tfor _,ITEM in ipairs(tItems) do\n\t\tIGS.AddToInventory(pl, ITEM:UID(), function()\n\t\t\tadded = added + 1\n\t\t\tif added == #tItems then\n\t\t\t\tIGS.Notify(pl, \"–í –≤–∞—à –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –¥–æ–±–∞–≤–ª–µ–Ω–æ \" .. added .. \" –ø—Ä–µ–¥–º–µ—Ç–æ–≤\")\n\t\t\tend\n\t\tend)\n\tend\nend\n\n-- –õ–æ–∂–∏—Ç –í –ò–ù–í–ï–ù–¢–ê–†–¨ –Ω–∞–±–æ—Ä —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤ (—Ö–æ—Ç—è –º–æ–∂–Ω–æ –∏ UID –¥–æ–±–∞–≤–∏—Ç—å)\n-- –ù–∞–ø—Ä–∏–º–µ—Ä 10 Hidden –∞–ø—Ç–µ—á–µ–∫ (–∫–∞–∫ –∑–∞–º–µ–Ω–∞ –ª–∏–º–∏—Ç—É –∞–∫—Ç–∏–≤–∞—Ü–∏–π –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä–µ)\nfunction STORE_ITEM:SetItems(tItems) -- IGS.C.Inv_Enabled\n\treturn self:SetInstaller(function(pl)\n\t\tgiveItemsSet(pl, self:GetMeta(\"items_set\"))\n\tend):SetMeta(\"items_set\", tItems)\nend\n-- local ITEM = IGS(\"–¢–∞–π–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç\", \"secret\", -10):SetStackable():SetHidden():SetOnActivate(fp{PRINT, \"YEAH!!\"})\n-- IGS(\"2 —Ç–∞–π–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–∞\", \"secret_2\", 5):SetStackable():SetItems({ITEM, ITEM})\n", "igs\/interface\/vgui\/igs_tabbar.lua":"local PANEL = {}\n\nlocal barTall = 50\nlocal btnWide = 70\n\nfunction PANEL:Init()\n\tself.activity = uigs.Create(\"igs_multipanel\",self)\n\n\tself.tabBar = uigs.Create(\"Panel\",self)\n\tself.tabBar:SetTall(barTall)\n\tself.tabBar.Paint = function(_, w, h)\n\t\tsurface.SetDrawColor(IGS.col.TAB_BAR)\n\t\tsurface.DrawRect(0,0,w,h) -- bg\n\n\t\tsurface.SetDrawColor(IGS.col.HARD_LINE)\n\t\tsurface.DrawLine(0,0,w,0) -- upper line\n\tend\n\n\tself.btnsPan = uigs.Create(\"DIconLayout\", self.tabBar)\n\tself.btnsPan.Paint = function() end\n\n\tself.Buttons = {}\nend\n\nfunction PANEL:SetActiveTab(num)\n\tfor i,btn in ipairs(self.Buttons) do\n\t\tbtn.Active = num == i -- –¥–ª—è –ø–æ–¥—Å–≤–µ—Ç–∫–∏\n\tend\n\n\tself.activity:SetActivePanel(num)\nend\n\nfunction PANEL:GetActiveTab()\n\treturn self.activity:GetActivePanel()\nend\n\nfunction PANEL:AddTab(sTitle,panel,sIcon,bActive)\n\tlocal ID = self.activity:AddPanel(panel,bActive)\n\n\tlocal button = uigs.Create(\"DButton\", function(btn)\n\t\tbtn:SetSize(btnWide, 50)\n\t\tbtn:SetText(\"\")\n\n\t\tbtn:SetFont(\"igs.24\")\n\n\t\tbtn.DoClick = function(s)\n\t\t\tself:SetActiveTab(s.ID)\n\t\tend\n\n\t\t--[[-------------------------------------------------------------------------\n\t\t\tTODO –°–¥–µ–ª–∞—Ç—å –æ—Ç—Ä–∏—Å–æ–≤–∫—É —Å–∫–∏–Ω–∞ —á–µ—Ä–µ–∑ —Å–∫–∏–Ω —Ö—É–∫\n\t\t\t—á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ —é–∑–∞—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –≤ IGS –±–µ–∑ –ø–æ—Ä—á–∏ –¥–∏–∑–∞–π–Ω–∞\n\t\t\t–í bar.Paint —Ç–æ–∂–µ\n\t\t---------------------------------------------------------------------------]]\n\t\tbtn.Paint = function(s,w,h)\n\t\t\tif s.Active then\n\t\t\t\tsurface.SetDrawColor(IGS.col.HIGHLIGHTING)\n\t\t\t\tsurface.SetTextColor(IGS.col.HIGHLIGHTING)\n\t\t\telse\n\t\t\t\tsurface.SetDrawColor(IGS.col.HIGHLIGHT_INACTIVE)\n\t\t\t\tsurface.SetTextColor(IGS.col.HIGHLIGHT_INACTIVE)\n\t\t\tend\n\n\t\t\tif sIcon then\n\t\t\t\tsurface.SetMaterial( Material(sIcon) )\n\t\t\t\tsurface.DrawTexturedRect(w \/ 2 - 32 \/ 2,3,32,32)\n\t\t\tend\n\n\t\t\tif sTitle then\n\t\t\t\tsurface.SetFont(\"igs.15\")\n\n\t\t\t\tlocal tw = surface.GetTextSize(sTitle)\n\t\t\t\tsurface.SetTextPos(w \/ 2 - tw \/ 2,32 + 3)\n\n\t\t\t\tsurface.DrawText( sTitle )\n\t\t\tend\n\t\tend\n\n\t\tbtn.ID     = ID\n\t\tbtn.Tab    = panel\n\t\tbtn.Active = bActive\n\tend)\n\n\tfunction button:Name()\n\t\treturn sTitle\n\tend\n\n\tself.btnsPan:Add(button)\n\ttable.insert(self.Buttons, button)\n\n\t-- self:PerformLayout()\n\tself.btnsPan:SetSize(#self.Buttons * btnWide,barTall)\n\tself.btnsPan:SetPos((self:GetWide() - self.btnsPan:GetWide()) \/ 2)\n\n\n\treturn button\nend\n\nfunction PANEL:PerformLayout()\n\tself.tabBar:SetWide(self:GetWide())\n\tself.tabBar:SetPos(0,self:GetTall() - self.tabBar:GetTall())\n\n\tself.activity:SetSize(self.tabBar:GetWide(),self:GetTall() - barTall)\nend\n\nfunction PANEL:Paint(w,h)\n\tdraw.RoundedBox(0,0,0,w,h,IGS.col.ACTIVITY_BG)\nend\n\nvgui.Register(\"igs_tabbar\", PANEL, \"Panel\")\n-- IGS.UI()\n", "entities\/npc_igs\/shared.lua":"ENT.Base      = \"base_ai\"\nENT.Type      = \"ai\"\nENT.PrintName = \"–î–æ–Ω–∞—Ç NPC\"\nENT.Author    = \"GMDonate\"\nENT.Category  = \"IGS\"\nENT.Spawnable = true\n\nENT.RenderGroup = RENDERGROUP_TRANSLUCENT\n", "igs\/interface\/vgui\/igs_scroll.lua":"local SCROLLBAR = {}\nfunction SCROLLBAR:Init()\n\tself.parent = self:GetParent()\n\n\tself.scrollButton = vgui.Create(\"Panel\", self)\n\tself.scrollButton.OnMousePressed = function(s, mb)\n\t\tif (mb == MOUSE_LEFT and not self:GetParent().ShouldHideScrollbar) then\n\t\t\tlocal _, my = s:CursorPos()\n\n\t\t\ts.scrolling = true\n\t\t\ts.mouseOffset = my\n\t\tend\n\tend\n\tself.scrollButton.OnMouseReleased = function(s, mb)\n\t\tif (mb == MOUSE_LEFT) then\n\t\t\ts.scrolling = false\n\t\t\ts.mouseOffset = nil\n\t\tend\n\tend\n\n\tself.height = 0\n\tself.addWidth = 0\nend\n\nfunction SCROLLBAR:Think()\n\tif (self.scrollButton.scrolling) then\n\t\tif (not input.IsMouseDown(MOUSE_LEFT)) then\n\t\t\tself.scrollButton:OnMouseReleased(MOUSE_LEFT)\n\t\t\treturn\n\t\tend\n\n\t\tlocal _, my = self.scrollButton:CursorPos()\n\n\t\tlocal diff = my - self.scrollButton.mouseOffset\n\n\t\tlocal maxOffset = self.parent:GetCanvas():GetTall() - self.parent:GetTall()\n\n\t\tlocal perc = (self.scrollButton.y + diff) \/ (self:GetTall() - self.height)\n\t\tself.parent.yOffset = math.Clamp(perc * maxOffset, 0, maxOffset)\n\n\t\tself.parent:InvalidateLayout()\n\tend\n\n\tlocal preSize = self.addWidth\n\n\tlocal mx, my = self:CursorPos()\n\tif ((mx > -8 and mx < self:GetWide() + 3 and my > self.scrollButton.y and my < self.scrollButton.y + self.height) or self.scrollButton.scrolling) then\n\t\tself.addWidth = math.Clamp(self.addWidth + (FrameTime() * 96), 0, 8)\n\telse\n\t\tself.addWidth = math.Clamp(self.addWidth - (FrameTime() * 96), 0, 8)\n\tend\n\n\tif (preSize ~= self.addWidth) then\n\t\tself:InvalidateLayout()\n\tend\nend\n\nfunction SCROLLBAR:PerformLayout()\n\tlocal maxOffset = self.parent:GetCanvas():GetTall() - self.parent:GetTall()\n\n\tself:SetSize(2 + self.addWidth, self.parent:GetTall())\n\tself:SetPos(self.parent:GetWide() - self:GetWide(), 0)\n\n\tself.heightRatio = self.parent:GetTall() \/ self.parent:GetCanvas():GetTall()\n\tself.height = math.Clamp(math.ceil(self.heightRatio * self.parent:GetTall()), 20, math.huge)\n\n\tself.scrollButton:SetSize(self:GetWide(), self.height)\n\tself.scrollButton:SetPos(0, math.Clamp(self.parent.yOffset \/ maxOffset, 0, 1) * (self:GetTall() - self.height))\nend\n\nfunction SCROLLBAR:Paint(w, h)\n\tif (self:GetParent().ShouldHideScrollbar) then return end\n\n\tdraw.Box(0, self.scrollButton.y, w, self.height, IGS.col.HIGHLIGHTING)\nend\n\nfunction SCROLLBAR:OnMouseWheeled(delta)\n\tself.parent:OnMouseWheeled(delta)\nend\n\nvgui.Register(\"ui_scrollbar\", SCROLLBAR, \"Panel\")\n\n\n\n\n\n\nlocal SCROLLABLE = {}\nfunction SCROLLABLE:Init()\n\tself.contentContainer = vgui.Create(\"Panel\", self)\n\tself.scrollBar = vgui.Create(\"ui_scrollbar\", self)\n\n\tself.yOffset = 0\n\tself.ySpeed = 0\n\tself.scrollSize = 4\n\tself.SpaceTop = 0\n\tself.Padding = 0\n\n\tfunction self.contentContainer:OnChildRemoved(child)\n\t\tself:GetParent():PerformLayout()\n\tend\nend\n\nfunction SCROLLABLE:Reset()\n\tself:GetCanvas():Clear(true)\n\tself.yOffset = 0\n\tself.ySpeed = 0\n\tself.scrollSize = 1\n\n\tself:PerformLayout()\nend\n\nfunction SCROLLABLE:AddItem(child)\n\tchild:SetParent(self:GetCanvas())\n\tself:PerformLayout()\n\treturn child\nend\n\nfunction SCROLLABLE:SetSpacing(i)\n\tself.SpaceTop = i\nend\n\nfunction SCROLLABLE:SetPadding(i)\n\tself.Padding = i\nend\n\nfunction SCROLLABLE:GetCanvas()\n\treturn self.contentContainer\nend\n\nfunction SCROLLABLE:SetScrollSize(int)\n\tself.scrollSize = int\nend\n\nfunction SCROLLABLE:ScrollTo(y)\n\tself.yOffset = y\n\n\tself:InvalidateLayout()\nend\n\nfunction SCROLLABLE:OnMouseWheeled(delta)\n\tif ((delta > 0 and self.ySpeed < 0) or (delta < 0 and self.ySpeed > 0)) then\n\t\tself.ySpeed = 0\n\telse\n\t\tself.ySpeed = self.ySpeed + (delta * self.scrollSize)\n\tend\n\n\tself:PerformLayout()\nend\n\nfunction SCROLLABLE:SetOffset(offSet)\n\tlocal maxOffset = (self:GetCanvas():GetTall() - self:GetTall())\n\tif (maxOffset < 0) then maxOffset = 0 end\n\n\tself.yOffset = math.Clamp(offSet, 0, maxOffset)\n\n\tself:PerformLayout()\n\n\tif (self.yOffset == 0 or self.yOffset == maxOffset) then return true end\nend\n\nfunction SCROLLABLE:Think()\n\tif (self.ySpeed ~= 0) then\n\t\tif (self:SetOffset(self.yOffset - self.ySpeed)) then\n\t\t\tself.ySpeed = 0\n\t\telse\n\t\t\tif (self.ySpeed < 0) then\n\t\t\t\tself.ySpeed = math.Clamp(self.ySpeed + (FrameTime() * self.scrollSize * 4), self.ySpeed, 0)\n\t\t\telse\n\t\t\t\tself.ySpeed = math.Clamp(self.ySpeed - (FrameTime() * self.scrollSize * 4), 0, self.ySpeed)\n\t\t\tend\n\t\tend\n\tend\nend\n\nfunction SCROLLABLE:PerformLayout()\n\tlocal canvas = self:GetCanvas()\n\n\tif (canvas:GetWide() ~= self:GetWide()) then\n\t\tcanvas:SetWide(self:GetWide())\n\tend\n\n\tlocal y = 0\n\tlocal lastChild\n\tfor k, v in ipairs(canvas:GetChildren()) do\n\t\tlocal childY = y + self.SpaceTop\n\t\tif (v.x ~= self.Padding or v.y ~= childY) then\n\t\t\tv:SetPos(math.max(0, self.Padding), y + self.SpaceTop)\n\t\tend\n\t\tif (v:GetWide() ~= self:GetWide() - self.Padding * 2) then\n\t\t\tv:SetWide(math.min(self:GetWide(), self:GetWide() - self.Padding * 2))\n\t\tend\n\n\t\ty = v.y + v:GetTall() + self.SpaceTop + self.Padding\n\t\tlastChild = v\n\tend\n\ty = lastChild and lastChild.y + lastChild:GetTall() or y\n\tif (canvas:GetTall() ~= y) then\n\t\tcanvas:SetTall(y)\n\tend\n\n\tif (canvas:GetTall() <= self:GetTall() and self.scrollBar:IsVisible()) then\n\t\tcanvas:SetTall(self:GetTall())\n\n\t\tself.scrollBar:SetVisible(false)\n\telseif (canvas:GetTall() > self:GetTall() and not self.scrollBar:IsVisible()) then\n\t\tself.scrollBar:SetVisible(true)\n\tend\n\n\tlocal maxOffset = self:GetCanvas():GetTall() - self:GetTall()\n\n\tif (self.yOffset > maxOffset) then\n\t\tself.yOffset = maxOffset\n\tend\n\n\tif (self.yOffset < 0) then\n\t\tself.yOffset = 0\n\tend\n\n\tif (canvas.x ~= 0 or canvas.y ~= -self.yOffset) then\n\t\tcanvas:SetPos(0, -self.yOffset)\n\t\tself.scrollBar:InvalidateLayout()\n\tend\nend\n\nfunction SCROLLABLE:IsAtMaxOffset()\n\tlocal maxOffset = math.Clamp(self:GetCanvas():GetTall() - self:GetTall(), 0, math.huge)\n\treturn self.yOffset == maxOffset\nend\n\nfunction SCROLLABLE:Paint(w, h)\nend\n\nfunction SCROLLABLE:HideScrollbar(bool)\n\tself.ShouldHideScrollbar = bool\nend\n\nfunction SCROLLABLE:DockToFrame()\n\tlocal p = self:GetParent()\n\tlocal x, y = p:GetDockPos()\n\n\tself:SetPos(x, y)\n\tself:SetSize(p:GetWide() - 10, p:GetTall() - (y + 5))\nend\n\nvgui.Register(\"igs_scroll\", SCROLLABLE, \"Panel\")\n", "igs\/utils\/ut_cl.lua":"-- –ù–æ—Ä–º –Ω–∞–∑–≤–∞–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞ –ø–æ –µ–≥–æ –ò–î\n-- –ï—Å–ª–∏ –≤–µ—Ä–Ω—É—Ç \"-\", –∑–Ω–∞—á–∏—Ç —Å–µ—Ä–≤–µ—Ä —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –æ—Ç–∫–ª—é—á–µ–Ω\nfunction IGS.ServerName(iID)\n\tlocal serv_name = iID == 0 and \"–û—Ç–∫–ª.\" or IGS.SERVERS(iID)\n\t      serv_name = serv_name or \"–ì–ª–æ–±.\" -- IGS.SERVERS(iID) –≤–µ—Ä–Ω—É–ª nil = –≤–µ–∑–¥–µ\n\t      -- serv_name = serv_name[1]:upper() .. serv_name:sub(2) -- –∞–ø–ø–µ—Ä–∫–µ–π—Å–∏—Ç –ø–µ—Ä–≤—É—é –±—É–∫–≤—É\n\n\treturn serv_name\nend\n\n\nfunction IGS.ProcessActivate(dbID, cb)\n\tIGS.Activate(dbID,function(ok, iPurchID, sMsg_)\n\t\tsMsg_ = sMsg_ or \"–ü—Ä–µ–¥–º–µ—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω. –°–ø–∞—Å–∏–±–æ –≤–∞–º!\"\n\t\tIGS.ShowNotify(sMsg_, ok and \"–£—Å–ø–µ—à–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è\" or \"–û—à–∏–±–∫–∞ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏\")\n\n\t\tif cb then\n\t\t\tcb(ok, iPurchID, sMsg_)\n\t\tend\n\tend)\nend\n", "igs\/interface\/activities\/main.lua":"local null = function() end\nlocal etoGlavnayaVkladkaBlya = true\n\nhook.Add(\"IGS.CatchActivities\",\"main\",function(activity,sidebar)\n\t-- –ó–æ–Ω–∞ –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø–æ–∫—É–ø–æ–∫ http:\/\/joxi.ru\/12MQQBlfzPnw2J\n\tlocal bg = sidebar:AddPage(\"–ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ–∫—É–ø–∫–∏\")\n\n\t-- –ü–∞–Ω–µ–ª—å —Ç–µ–≥–æ–≤ –∏ –≥–æ—Ç–æ–≤–∞—è –∫–Ω–æ–ø–∫–∞ —Å–±—Ä–æ—Å–∞ —Ñ–∏–ª—å—Ç—Ä–æ–≤\n\tlocal tagspan = uigs.Create(\"Panel\", bg)\n\ttagspan:SetWide(activity:GetWide())\n\ttagspan.Paint = function(s,w,h)\n\t\tIGS.S.Panel(s,w,h,nil,nil,nil,true)\n\tend\n\n\t-- —Å–µ—Ç–∫–∞ https:\/\/img.qweqwe.ovh\/1487714173294.png\n\tbg.tags = uigs.Create(\"DIconLayout\", function(tags)\n\t\ttags:SetWide(activity:GetWide() - 5 - 5)\n\t\ttags:SetPos(5,5)\n\t\ttags:SetSpaceX(10)\n\t\ttags:SetSpaceY(10)\n\t\ttags.Paint = null\n\n\t\tfunction tags:AddTag(sName,doClick)\n\t\t\tlocal tag = uigs.Create(\"igs_button\")\n\t\t\ttag:SetTall(18)\n\t\t\ttag:SetText(\" \" .. sName .. \" \") -- –∫–æ—Å—Ç—ã–ª—å –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏\n\t\t\ttag:SizeToContents()\n\t\t\ttag.DoClick = doClick\n\n\t\t\tself:Add(tag)\n\n\t\t\ttags:InvalidateLayout(true) -- tags:GetTall()\n\t\t\ttagspan:SetTall(tags:GetTall() + 5 + 5)\n\n\t\t\tlocal y = tagspan:GetTall()\n\n\t\t\t-- –†–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –≤–æ—Ç —Ç—É—Ç:\n\t\t\t-- https:\/\/img.qweqwe.ovh\/1493840355855.png\n\t\t\t-- y = y - 10 -- UPD 2020 t.me\/c\/1353676159\/7888\n\n\t\t\tbg.categs:SetTall(activity:GetTall() - y - activity.tabBar:GetTall())\n\t\t\tbg.categs:SetPos(0,y)\n\t\t\treturn tag\n\t\tend\n\tend, tagspan)\n\n\tbg.categs = uigs.Create(\"igs_panels_layout_list\", bg) -- center panel\n\tbg.categs:DisableAlignment(true)\n\tbg.categs:SetWide(activity:GetWide())\n\n\t-- –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ç—å, –µ—Å–ª–∏ –∑–∞—Ö–æ—á—É —É–±—Ä–∞—Ç—å —Ç–µ–≥–∏\n\t-- bg.categs:SetTall(activity:GetTall() - activity.tabBar:GetTall())\n\t-- bg.categs:SetPos(0,y)\n\n\n\t-- category = true\n\tlocal cats = {}\n\n\tlocal function addItems(fItemsFilter,fGroupFilter)\n\t\tlocal rows = {}\n\n\t\tfor _,GROUP in pairs( IGS.GetGroups() ) do -- name\n\t\t\tif not fGroupFilter or fGroupFilter(GROUP) ~= false then\n\t\t\t\tlocal pnl = uigs.Create(\"igs_group\"):SetGroup(GROUP)\n\t\t\t\tpnl.category = GROUP:Items()[1].item:Category() -- –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º, —á—Ç–æ –≤ –æ–¥–Ω–æ–π –≥—Ä—É–ø–ø–µ –±—É–¥—É—Ç –∏—Ç–µ–º—ã –æ–¥–Ω–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏\n\n\t\t\t\ttable.insert(rows,pnl)\n\t\t\tend\n\t\tend\n\n\t\tlocal check_skip = function(ITEM)\n\t\t\treturn ITEM.isnull  -- –ø—É—Å—Ç—ã—à–∫–∞\n\t\t\t\tor (not ITEM:CanSee( LocalPlayer() ))  -- –µ—â–µ –≤ IGS.WIN.Group\n\t\t\t\tor ITEM:Group() -- –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∏—Ç–µ–º—ã –∑–∞—Å—É–Ω—É—Ç—ã –≤ –≥—Ä—É–ø–ø—É –≤—ã—à–µ\n\t\t\t\tor (fItemsFilter and fItemsFilter(ITEM) == false)\n\t\tend\n\n\t\t-- –Ω–µ (i)pairs, –ø–æ—Ç–æ–º—É —á—Ç–æ –∫–∞–∫–æ–π-—Ç–æ ID –≤ –∫–∞–∫–æ–º-—Ç–æ –æ—á–µ–Ω—å —Ä–µ–¥–∫–æ–º —Å–ª—É—á–∞–µ –º–æ–∂–µ—Ç –æ—Ç—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å\n\t\t-- –µ—Å–ª–∏ –µ–≥–æ –∫—Ç–æ-—Ç–æ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –∑–∞–Ω–∏–ª–∏—Ç, —á—Ç–æ–±—ã —É–±—Ä–∞—Ç—å –∏—Ç–µ–º –Ω–∞–ø—Ä–∏–º–µ—Ä.\n\t\t-- –•–æ—Ç—è –º–∞–ª–æ–≤–µ—Ä–æ—è—Ç–Ω–æ, –Ω–æ –≤—Å–µ –∂–µ\n\t\tfor _,ITEM in pairs(IGS.GetItems()) do\n\t\t\tif not check_skip(ITEM) then\n\t\t\t\tlocal pnl = uigs.Create(\"igs_item\"):SetItem(ITEM)\n\t\t\t\tpnl.category = ITEM:Category()\n\n\t\t\t\ttable.insert(rows,pnl)\n\t\t\tend\n\t\tend\n\n\t\tfor _,pnl in ipairs(rows) do\n\t\t\tbg.categs:Add(pnl,pnl.category or \"–†–∞–∑–Ω–æ–µ\").title:SetTextColor(IGS.col.TEXT_HARD) -- http:\/\/joxi.ru\/Y2LqqyBh5BODA6\n\t\t\tcats[pnl.category or \"–†–∞–∑–Ω–æ–µ\"] = true\n\t\tend\n\tend\n\taddItems()\n\n\n\n\t--[[-------------------------------------------------------------------------\n\t\t–¢–µ–≥–∏ (–ë—ã—Å—Ç—Ä—ã–π –≤—ã–±–æ—Ä –∫–∞—Ç–µ–≥–æ—Ä–∏–∏)\n\t---------------------------------------------------------------------------]]\n\tbg.tags:AddTag(\"–°–±—Ä–æ—Å —Ñ–∏–ª—å—Ç—Ä–æ–≤\", function() bg.categs:Clear() addItems() end)\n\t\t:SetActive(true)\n\n\tfor categ in pairs(cats) do\n\t\tbg.tags:AddTag(categ,function(self)\n\t\t\tbg.categs:Clear()\n\n\t\t\t-- #todo –ø–µ—Ä–µ–ø–∏—Å–∞—Ç—å —ç—Ç–æ –≥–æ–≤–Ω–∏—â–µ\n\t\t\taddItems(function(ITEM)\n\t\t\t\treturn self.categ == \"–†–∞–∑–Ω–æ–µ\" and not ITEM:Category() or (ITEM:Category() == self.categ)\n\t\t\tend,function(GROUP)\n\t\t\t\treturn self.categ == \"–†–∞–∑–Ω–æ–µ\" and not GROUP:Items()[1].item:Category() or (GROUP:Items()[1].item:Category() == self.categ)\n\t\t\tend)\n\t\tend).categ = categ\n\tend\n\n\n\n\t--[[-------------------------------------------------------------------------\n\t\t–°–ø–∏—Å–æ–∫ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –ø–æ–∫—É–ø–æ–∫ –≤ —Å–∞–π–¥–±–∞—Ä–µ\n\t---------------------------------------------------------------------------]]\n\tIGS.GetLatestPurchases(function(latest_purchases)\n\t\tif not IsValid(activity) then return end\n\n\t\tlocal function addPurchasePanel(v)\n\t\t\tlocal b = uigs.Create(\"Panel\")\n\t\t\tb:SetTall(IGS.SERVERS.TOTAL > 1 and 100 or 100 - 20)\n\t\t\tb:DockPadding(5,5,5,5)\n\n\t\t\tlocal pnl = uigs.Create(\"Panel\", b)\n\t\t\tpnl:Dock(FILL)\n\t\t\tpnl:DockPadding(5,5,5,5)\n\t\t\tpnl.Paint = IGS.S.RoundedPanel\n\t\t\tfunction pnl:AddRow(sName,value)\n\t\t\t\tlocal row = uigs.Create(\"Panel\", pnl)\n\t\t\t\trow:Dock(TOP)\n\t\t\t\trow:SetTall(20)\n\t\t\t\t--:DockMargin(5,5,0,5)\n\t\t\t\t--row.Paint = IGS.S.RoundedPanel\n\n\t\t\t\t-- key\n\t\t\t\tuigs.Create(\"DLabel\", function(name)\n\t\t\t\t\tname:Dock(LEFT)\n\t\t\t\t\tname:SetWide(55)\n\t\t\t\t\tname:SetText(sName)\n\t\t\t\t\tname:SetFont(\"igs.18\")\n\t\t\t\t\tname:SetTextColor(IGS.col.TEXT_HARD)\n\t\t\t\t\tname:SetContentAlignment(6)\n\t\t\t\tend, row)\n\n\t\t\t\tuigs.Create(\"DLabel\", function(name)\n\t\t\t\t\tname:Dock(FILL)\n\t\t\t\t\tname:SetText(value)\n\t\t\t\t\tname:SetFont(\"igs.18\")\n\t\t\t\t\tname:SetTextColor(IGS.col.TEXT_SOFT)\n\t\t\t\t\tname:SetContentAlignment(4)\n\t\t\t\tend, row)\n\t\t\tend\n\n\t\t\t-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —É—Å–ª—É–≥–∏. –õ–µ–≥–∫–æ –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –ª–µ–π–±—É\n\t\t\tuigs.Create(\"DButton\", function(name)\n\t\t\t\tname:Dock(TOP)\n\t\t\t\tname:SetTall(20)\n\t\t\t\tname:SetText(IGS.GetItemByUID(v.item):Name())\n\t\t\t\tname:SetFont(\"igs.18\")\n\t\t\t\tname:SetTextColor(IGS.col.HIGHLIGHTING)\n\t\t\t\tname:SetContentAlignment(4)\n\t\t\t\tname.Paint = null\n\t\t\t\tname.DoClick = function()\n\t\t\t\t\tIGS.WIN.Item(v.item)\n\t\t\t\tend\n\t\t\tend, b)\n\n\t\t\tpnl:AddRow(\"–ö—É–ø–∏–ª: \",v.nick or \"NoName\")\n\t\t\tif IGS.SERVERS.TOTAL > 1 then\n\t\t\t\tpnl:AddRow(\"–ù–∞: \",IGS.ServerName(v.server))\n\t\t\t-- else\n\t\t\t-- \tpnl:AddRow(\"UID: \",v.item)\n\t\t\tend\n\t\t\tpnl:AddRow(\"–î–æ: \",IGS.TimestampToDate(v.expire) or \"–Ω–∞–≤—Å–µ–≥–¥–∞\")\n\n\t\t\tbg.side:AddItem(b)\n\t\tend\n\n\t\tfor _,purchase in ipairs(latest_purchases) do\n\t\t\tlocal ITEM = IGS.GetItemByUID(purchase.item)\n\t\t\tif not ITEM.isnull then\n\t\t\t\taddPurchasePanel(purchase)\n\t\t\tend\n\t\tend\n\tend)\n\n\tactivity:AddTab(\"–£—Å–ª—É–≥–∏\",bg,\"materials\/icons\/fa32\/rub.png\",etoGlavnayaVkladkaBlya)\nend)\n\n-- local p = IGS.UI()\n-- timer.Simple(3,function() if IsValid(p) then p:Remove() end end)\n", "igs\/interface\/vgui\/igs_html.lua":"local PANEL = {}\n\nfunction PANEL:Init()\n\tlocal c = IGS.col.HIGHLIGHT_INACTIVE\n\tself.text_color = Color(c.r,c.g,c.b,c.a)\nend\n\nlocal LOADING_TEXT = \"–ó–∞–≥—Ä—É–∑–æ—á–∫–∞...\"\nlocal ICO          = Material(\"materials\/icons\/fa32\/usd.png\", \"smooth\")\n\nfunction PANEL:Paint(w,h)\n\tself.text_color.a = Lerp( (math.sin(CurTime() * 5) + 1) \/ 2 ,0,255) -- Alpha\n\n\t-- –ò–ö–û–ù–ö–ê\n\tsurface.SetDrawColor(self.text_color)\n\tsurface.SetMaterial(ICO)\n\tlocal y = (h - 50) \/ 2\n\tsurface.DrawTexturedRect((w - 50) \/ 2,y - 10,50,50)\n\ty = y + 50 -- —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è —Ç–æ—á–∫–∞ –º–µ–∂–¥—É –∏–∫–æ–Ω–∫–æ–π –∏ —Ç–µ–∫—Å—Ç–æ–º\n\n\t-- –¢–ï–ö–°–¢\n\tsurface.SetTextColor(self.text_color)\n\tsurface.SetFont(\"igs.24\") -- 40\n\tlocal tw = surface.GetTextSize(LOADING_TEXT)\n\tsurface.SetTextPos((w - tw) \/ 2,y + 10)\n\tsurface.DrawText(LOADING_TEXT)\nend\n\nvgui.Register(\"igs_html\",PANEL,\"HTML\")\n", "igs\/extensions\/bwhitelist.lua":"IGS.ITEMS.Whitelist = IGS.ITEMS.Whitelist or {}\n\nlocal STORE_ITEM = MT_IGSItem\n\nlocal function team_id(team_cmd)\n\treturn DarkRP.getJobByCommand(team_cmd).team\nend\n\nfunction STORE_ITEM:SetBWhitelist(team_cmd)\n\tself:SetCanActivate(function(pl)\n\t\tif GAS.JobWhitelist:IsWhitelisted(pl, team_id(team_cmd)) then\n\t\t\treturn \"–í—ã –≤ –≤–∞–π—Ç–ª–∏—Å—Ç–µ\"\n\t\tend\n\tend)\n\tself:SetInstaller(function(pl)\n\t\tGAS.JobWhitelist:AddToWhitelist(team_id(team_cmd), GAS.JobWhitelist.LIST_TYPE_STEAMID, pl:SteamID())\n\tend)\n\tself:SetValidator(function(pl)\n\t\treturn GAS.JobWhitelist:IsWhitelisted(pl, team_id(team_cmd))\n\tend)\n\n\tself.whitelist = self:Insert(IGS.ITEMS.Whitelist, team_cmd) -- not team_id –∏–∑-–∑–∞ DarkRP = nil –Ω–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ\n\treturn self\nend\n\nif SERVER then\n\thook.Add(\"IGS.PlayerPurchasesLoaded\", \"IGS.bWhitelist\", function(pl)\n\t\tfor team_cmd,_ in pairs(IGS.ITEMS.Whitelist) do\n\t\t\tGAS.JobWhitelist:RemoveFromWhitelist(team_id(team_cmd), GAS.JobWhitelist.LIST_TYPE_STEAMID, pl:SteamID())\n\t\tend\n\tend)\nend\n"}